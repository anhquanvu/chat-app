2025-06-06 08:54:52 [main] INFO  c.r.chatapp.ChatappApplication - Starting ChatappApplication using Java 17.0.11 with PID 19608 (D:\job\chatapp\build\classes\java\main started by dskva in D:\job\chatapp)
2025-06-06 08:54:52 [main] DEBUG c.r.chatapp.ChatappApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-06 08:54:52 [main] INFO  c.r.chatapp.ChatappApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 337 ms. Found 11 JPA repository interfaces.
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.ConversationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.FileAttachmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageDeliveryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageReactionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomMemberRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserContactRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 08:54:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
2025-06-06 08:54:56 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-06 08:54:56 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 08:54:56 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-06 08:54:57 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 08:54:57 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4619 ms
2025-06-06 08:54:57 [main] INFO  c.r.chatapp.security.JwtTokenUtil - JWT configuration initialized - Expiration: 3600s, Refresh: 86400s
2025-06-06 08:54:57 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-06 08:54:57 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-06 08:54:57 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-06 08:54:59 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-06 08:54:59 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Starting...
2025-06-06 08:55:00 [main] INFO  com.zaxxer.hikari.pool.HikariPool - ChatAppHikariCP - Added connection com.mysql.cj.jdbc.ConnectionImpl@ca0a21f
2025-06-06 08:55:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Start completed.
2025-06-06 08:55:00 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.7.17 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-06-06 08:55:00 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-06 08:55:00 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (ChatAppHikariCP)']
	Database driver: undefined/unknown
	Database version: 5.7.17
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-06 08:55:03 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-06 08:55:03 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 08:55:04 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-06 08:55:08 [main] INFO  c.r.c.config.RateLimitingConfig - Rate limiting is disabled
2025-06-06 08:55:08 [main] DEBUG c.r.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-06 08:55:08 [main] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-06 08:55:08 [main] DEBUG c.r.c.security.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-06-06 08:55:08 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-06 08:55:08 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-06 08:55:11 [main] INFO  c.r.c.s.impl.UserSessionServiceImpl - UserSessionService initialized - Redis available: false
2025-06-06 08:55:11 [main] WARN  c.r.chatapp.config.EncryptionConfig - No encryption key provided. Generated new key: Z0kbD1rpcTvxo0+UXlrnYG2LVsE3//5aQFRNAtzXgyE=
2025-06-06 08:55:11 [main] WARN  c.r.chatapp.config.EncryptionConfig - Please save this key and add it to your configuration!
2025-06-06 08:55:11 [main] INFO  c.r.chatapp.config.CacheConfig - Redis Cache configuration initialized - Default TTL: 600s, User TTL: 1800s, Message TTL: 3600s
2025-06-06 08:55:11 [main] INFO  c.revotech.chatapp.config.CorsConfig - CORS configured - Origins: [http://localhost:3000, http://localhost:3001, http://127.0.0.1:3000], Methods: [GET, POST, PUT, DELETE, OPTIONS], Allow credentials: true
2025-06-06 08:55:12 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-06-06 08:55:12 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-06-06 08:55:12 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 67 mappings in 'requestMappingHandlerMapping'
2025-06-06 08:55:12 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-06-06 08:55:12 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-06 08:55:13 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.AuthController:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ChatController:
	{[MESSAGE],[/chat/room/{roomId}]}: sendMessageToRoom(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/enter]}: enterConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/leave]}: leaveRoom(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/typing/room/{roomId}]}: notifyTypingInRoom(Long,TypingNotification,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/enter]}: enterRoom(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/leave]}: leaveConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}]}: sendMessageToConversation(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/typing/conversation/{conversationId}]}: notifyTypingInConversation(Long,TypingNotification,SimpMessageHeaderAccessor)
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ConversationController:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.FileController:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.MessageController:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.NotificationController:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.RoomController:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.UserController:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-06-06 08:55:13 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-06-06 08:55:14 [main] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 08:55:14 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 08:55:14 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-06-06 08:55:14 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4e37f121]
2025-06-06 08:55:14 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4e37f121]
2025-06-06 08:55:14 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4e37f121]]
2025-06-06 08:55:14 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-06-06 08:55:14 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 08:55:14 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 08:55:14 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-06 08:55:14 [main] INFO  c.r.chatapp.ChatappApplication - Started ChatappApplication in 23.65 seconds (process running for 25.315)
2025-06-06 08:55:15 [RMI TCP Connection(7)-192.168.1.63] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 08:55:15 [RMI TCP Connection(7)-192.168.1.63] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 08:55:15 [RMI TCP Connection(7)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-06-06 08:55:15 [RMI TCP Connection(7)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-06-06 08:55:15 [RMI TCP Connection(7)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-06-06 08:55:15 [RMI TCP Connection(7)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5e10caa8
2025-06-06 08:55:15 [RMI TCP Connection(7)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3e3ffea8
2025-06-06 08:55:15 [RMI TCP Connection(7)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-06-06 08:55:15 [RMI TCP Connection(7)-192.168.1.63] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-06-06 08:55:16 [boundedElastic-1] WARN  o.s.b.a.d.r.RedisReactiveHealthIndicator - Redis health check failed
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1858)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1789)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1586)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1566)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1527)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1563)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedReactiveConnection(LettuceConnectionFactory.java:1274)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:1149)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:120)
	at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67)
	at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:63)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:41)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:354)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:220)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1787)
	... 16 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:336)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:339)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:784)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 08:55:41 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 08:55:41 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174942422
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174942421
2025-06-06 08:55:42 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174942421
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174942422
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174942422", parameters={masked}
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174942421", parameters={masked}
2025-06-06 08:55:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174942422
2025-06-06 08:55:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174942421
2025-06-06 08:55:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:42 [http-nio-8080-exec-5] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:42Z, a difference of 50241474 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:55:42 [http-nio-8080-exec-2] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:42Z, a difference of 50241474 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:42 [http-nio-8080-exec-9] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:42Z, a difference of 50241474 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/408/5kwwhltn/websocket
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:55:42 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/c (truncated)...]
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:55:42 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/r (truncated)...]
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:55:42 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/u (truncated)...]
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/408/5kwwhltn/websocket
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/408/5kwwhltn/websocket", parameters={}
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:55:42 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/408/5kwwhltn/websocket
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-1] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:42Z, a difference of 50241581 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:42 [http-nio-8080-exec-3] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:42Z, a difference of 50241581 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:55:42 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:55:42 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/u (truncated)...]
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:55:42 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:55:42 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/c (truncated)...]
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:55:42 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-4] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:42Z, a difference of 50241603 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:55:42 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/r (truncated)...]
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:55:42 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:55:42 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:55:42 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:55:42 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/450/qx2o3jd4/websocket
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/450/qx2o3jd4/websocket
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/450/qx2o3jd4/websocket", parameters={}
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/450/qx2o3jd4/websocket
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5kwwhltn]
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qx2o3jd4]
2025-06-06 08:55:42 [http-nio-8080-exec-8] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:42Z, a difference of 50241784 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:42 [http-nio-8080-exec-10] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:42Z, a difference of 50241784 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:42 [http-nio-8080-exec-8] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: 5kwwhltn
2025-06-06 08:55:42 [http-nio-8080-exec-10] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: qx2o3jd4
2025-06-06 08:55:42 [http-nio-8080-exec-8] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session 5kwwhltn: Invalid JWT token
2025-06-06 08:55:42 [http-nio-8080-exec-10] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session qx2o3jd4: Invalid JWT token
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session 5kwwhltn
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session qx2o3jd4
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 5kwwhltn with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session qx2o3jd4 with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=65d563d7-306d-181f-549e-fb57ddc0fe2f, uri=ws://localhost:8080/ws/408/5kwwhltn/websocket]
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=3a9afcc0-3c34-0b6d-f26d-c07cd83a139d, uri=ws://localhost:8080/ws/450/qx2o3jd4/websocket]
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5kwwhltn] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5kwwhltn
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qx2o3jd4] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qx2o3jd4
2025-06-06 08:55:42 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session 5kwwhltn
2025-06-06 08:55:42 [websocket-async-2] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session qx2o3jd4
2025-06-06 08:55:42 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=qx2o3jd4
2025-06-06 08:55:42 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=5kwwhltn
2025-06-06 08:55:42 [clientOutboundChannel-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=qx2o3jd4}], simpSessionId=qx2o3jd4}]
2025-06-06 08:55:42 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=5kwwhltn}], simpSessionId=5kwwhltn}]
2025-06-06 08:55:47 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174947804
2025-06-06 08:55:47 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:47 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174947804
2025-06-06 08:55:47 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174947804", parameters={masked}
2025-06-06 08:55:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174947804
2025-06-06 08:55:47 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:47 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174947804
2025-06-06 08:55:47 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:47 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174947804
2025-06-06 08:55:47 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174947804", parameters={masked}
2025-06-06 08:55:47 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/526/nkokdtw0/websocket
2025-06-06 08:55:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:47 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:47 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174947804
2025-06-06 08:55:47 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/526/nkokdtw0/websocket
2025-06-06 08:55:47 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/526/nkokdtw0/websocket", parameters={}
2025-06-06 08:55:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/526/nkokdtw0/websocket
2025-06-06 08:55:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:55:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nkokdtw0]
2025-06-06 08:55:47 [http-nio-8080-exec-3] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:47Z, a difference of 50246868 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:47 [http-nio-8080-exec-3] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: nkokdtw0
2025-06-06 08:55:47 [http-nio-8080-exec-3] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session nkokdtw0: Invalid JWT token
2025-06-06 08:55:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session nkokdtw0
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:55:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session nkokdtw0 with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=ef48939c-48db-8a93-e983-57638e5642ad, uri=ws://localhost:8080/ws/526/nkokdtw0/websocket]
2025-06-06 08:55:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nkokdtw0] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nkokdtw0
2025-06-06 08:55:47 [websocket-async-3] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session nkokdtw0
2025-06-06 08:55:47 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=nkokdtw0
2025-06-06 08:55:47 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=nkokdtw0}], simpSessionId=nkokdtw0}]
2025-06-06 08:55:47 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/129/54xvmzvx/websocket
2025-06-06 08:55:47 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:47 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/129/54xvmzvx/websocket
2025-06-06 08:55:47 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/129/54xvmzvx/websocket", parameters={}
2025-06-06 08:55:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/129/54xvmzvx/websocket
2025-06-06 08:55:47 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:55:47 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=54xvmzvx]
2025-06-06 08:55:47 [http-nio-8080-exec-9] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:47Z, a difference of 50246922 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:47 [http-nio-8080-exec-9] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: 54xvmzvx
2025-06-06 08:55:47 [http-nio-8080-exec-9] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session 54xvmzvx: Invalid JWT token
2025-06-06 08:55:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session 54xvmzvx
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:55:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 54xvmzvx with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=faa7f0ed-2d9a-a571-c962-ecd77fe80287, uri=ws://localhost:8080/ws/129/54xvmzvx/websocket]
2025-06-06 08:55:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=54xvmzvx] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 54xvmzvx
2025-06-06 08:55:47 [websocket-async-4] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session 54xvmzvx
2025-06-06 08:55:47 [clientInboundChannel-11] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=54xvmzvx
2025-06-06 08:55:47 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=54xvmzvx}], simpSessionId=54xvmzvx}]
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 08:55:52 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:52 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 08:55:52 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:52 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 08:55:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 08:55:52 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 08:55:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:55:52 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:52 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 08:55:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 08:55:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:55:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:52 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:52 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [5kwwhltn, qx2o3jd4]
2025-06-06 08:55:52 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174952885
2025-06-06 08:55:52 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:52 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174952885
2025-06-06 08:55:52 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174952885", parameters={masked}
2025-06-06 08:55:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174952885
2025-06-06 08:55:52 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:52 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/062/1zbvkfdh/websocket
2025-06-06 08:55:52 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:52 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/062/1zbvkfdh/websocket
2025-06-06 08:55:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/062/1zbvkfdh/websocket", parameters={}
2025-06-06 08:55:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/062/1zbvkfdh/websocket
2025-06-06 08:55:52 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:55:52 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174952933
2025-06-06 08:55:52 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1zbvkfdh]
2025-06-06 08:55:52 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:52 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174952933
2025-06-06 08:55:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174952933", parameters={masked}
2025-06-06 08:55:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174952933
2025-06-06 08:55:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:52 [http-nio-8080-exec-1] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:52Z, a difference of 50251971 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:52 [http-nio-8080-exec-1] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: 1zbvkfdh
2025-06-06 08:55:52 [http-nio-8080-exec-1] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session 1zbvkfdh: Invalid JWT token
2025-06-06 08:55:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session 1zbvkfdh
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:55:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 1zbvkfdh with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=ae60349b-0a22-c537-f833-c250e64bc5d5, uri=ws://localhost:8080/ws/062/1zbvkfdh/websocket]
2025-06-06 08:55:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1zbvkfdh] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1zbvkfdh
2025-06-06 08:55:52 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/929/iug0y5n2/websocket
2025-06-06 08:55:52 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:52 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/929/iug0y5n2/websocket
2025-06-06 08:55:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/929/iug0y5n2/websocket", parameters={}
2025-06-06 08:55:52 [clientInboundChannel-14] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=1zbvkfdh
2025-06-06 08:55:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:52 [websocket-async-5] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session 1zbvkfdh
2025-06-06 08:55:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/929/iug0y5n2/websocket
2025-06-06 08:55:52 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=1zbvkfdh}], simpSessionId=1zbvkfdh}]
2025-06-06 08:55:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:55:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iug0y5n2]
2025-06-06 08:55:52 [http-nio-8080-exec-4] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:52Z, a difference of 50251989 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:52 [http-nio-8080-exec-4] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: iug0y5n2
2025-06-06 08:55:52 [http-nio-8080-exec-4] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session iug0y5n2: Invalid JWT token
2025-06-06 08:55:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session iug0y5n2
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:55:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session iug0y5n2 with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=bde80d70-78a2-6626-d6b6-2a5b098d21b7, uri=ws://localhost:8080/ws/929/iug0y5n2/websocket]
2025-06-06 08:55:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iug0y5n2] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iug0y5n2
2025-06-06 08:55:52 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=iug0y5n2
2025-06-06 08:55:52 [websocket-async-6] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session iug0y5n2
2025-06-06 08:55:52 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=iug0y5n2}], simpSessionId=iug0y5n2}]
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:55:53 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:55:53 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:57 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [54xvmzvx, nkokdtw0]
2025-06-06 08:55:57 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174957984
2025-06-06 08:55:57 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:57 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174957984
2025-06-06 08:55:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174957984", parameters={masked}
2025-06-06 08:55:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174957984
2025-06-06 08:55:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:58 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/262/mie2kncj/websocket
2025-06-06 08:55:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174958001
2025-06-06 08:55:58 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:58 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:58 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/262/mie2kncj/websocket
2025-06-06 08:55:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174958001
2025-06-06 08:55:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/262/mie2kncj/websocket", parameters={}
2025-06-06 08:55:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174958001", parameters={masked}
2025-06-06 08:55:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174958001
2025-06-06 08:55:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/262/mie2kncj/websocket
2025-06-06 08:55:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:55:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:55:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mie2kncj]
2025-06-06 08:55:58 [http-nio-8080-exec-10] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:58Z, a difference of 50257031 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:58 [http-nio-8080-exec-10] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: mie2kncj
2025-06-06 08:55:58 [http-nio-8080-exec-10] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session mie2kncj: Invalid JWT token
2025-06-06 08:55:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session mie2kncj
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:55:58 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/225/3uuvn0xk/websocket
2025-06-06 08:55:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session mie2kncj with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:58 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:55:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=fdffdb71-026e-3193-227e-da50d3640def, uri=ws://localhost:8080/ws/262/mie2kncj/websocket]
2025-06-06 08:55:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mie2kncj] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mie2kncj
2025-06-06 08:55:58 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/225/3uuvn0xk/websocket
2025-06-06 08:55:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/225/3uuvn0xk/websocket", parameters={}
2025-06-06 08:55:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:55:58 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=mie2kncj
2025-06-06 08:55:58 [websocket-async-7] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session mie2kncj
2025-06-06 08:55:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/225/3uuvn0xk/websocket
2025-06-06 08:55:58 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=mie2kncj}], simpSessionId=mie2kncj}]
2025-06-06 08:55:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:55:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3uuvn0xk]
2025-06-06 08:55:58 [http-nio-8080-exec-2] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:55:58Z, a difference of 50257055 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:55:58 [http-nio-8080-exec-2] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: 3uuvn0xk
2025-06-06 08:55:58 [http-nio-8080-exec-2] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session 3uuvn0xk: Invalid JWT token
2025-06-06 08:55:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session 3uuvn0xk
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:55:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 3uuvn0xk with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=6ec61fdf-d3f1-6ed6-9b1f-79ae9fd93d71, uri=ws://localhost:8080/ws/225/3uuvn0xk/websocket]
2025-06-06 08:55:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3uuvn0xk] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:55:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3uuvn0xk
2025-06-06 08:55:58 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=3uuvn0xk
2025-06-06 08:55:58 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=3uuvn0xk}], simpSessionId=3uuvn0xk}]
2025-06-06 08:55:58 [websocket-async-8] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session 3uuvn0xk
2025-06-06 08:56:02 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [1zbvkfdh, iug0y5n2]
2025-06-06 08:56:03 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174963043
2025-06-06 08:56:03 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:03 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174963043
2025-06-06 08:56:03 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174963043", parameters={masked}
2025-06-06 08:56:03 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:03 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174963043
2025-06-06 08:56:03 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:03 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/270/w1gt4cky/websocket
2025-06-06 08:56:03 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:03 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174963073
2025-06-06 08:56:03 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/270/w1gt4cky/websocket
2025-06-06 08:56:03 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/270/w1gt4cky/websocket", parameters={}
2025-06-06 08:56:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:03 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174963073
2025-06-06 08:56:03 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174963073", parameters={masked}
2025-06-06 08:56:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/270/w1gt4cky/websocket
2025-06-06 08:56:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174963073
2025-06-06 08:56:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:03 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=w1gt4cky]
2025-06-06 08:56:03 [http-nio-8080-exec-9] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:03Z, a difference of 50262101 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:03 [http-nio-8080-exec-9] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: w1gt4cky
2025-06-06 08:56:03 [http-nio-8080-exec-9] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session w1gt4cky: Invalid JWT token
2025-06-06 08:56:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session w1gt4cky
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session w1gt4cky with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=7baefc7f-b1f4-ddd3-ea39-12c15699c1eb, uri=ws://localhost:8080/ws/270/w1gt4cky/websocket]
2025-06-06 08:56:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=w1gt4cky] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:03 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session w1gt4cky
2025-06-06 08:56:03 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/640/vy20nzsr/websocket
2025-06-06 08:56:03 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session w1gt4cky
2025-06-06 08:56:03 [clientInboundChannel-10] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=w1gt4cky
2025-06-06 08:56:03 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:03 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/640/vy20nzsr/websocket
2025-06-06 08:56:03 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/640/vy20nzsr/websocket", parameters={}
2025-06-06 08:56:03 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=w1gt4cky}], simpSessionId=w1gt4cky}]
2025-06-06 08:56:03 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:03 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/640/vy20nzsr/websocket
2025-06-06 08:56:03 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:03 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vy20nzsr]
2025-06-06 08:56:03 [http-nio-8080-exec-7] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:03Z, a difference of 50262119 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:03 [http-nio-8080-exec-7] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: vy20nzsr
2025-06-06 08:56:03 [http-nio-8080-exec-7] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session vy20nzsr: Invalid JWT token
2025-06-06 08:56:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session vy20nzsr
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session vy20nzsr with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=80cf4eb9-2a51-06b3-be74-f61abb601e0a, uri=ws://localhost:8080/ws/640/vy20nzsr/websocket]
2025-06-06 08:56:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vy20nzsr] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:03 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vy20nzsr
2025-06-06 08:56:03 [websocket-async-2] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session vy20nzsr
2025-06-06 08:56:03 [clientInboundChannel-11] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=vy20nzsr
2025-06-06 08:56:03 [clientOutboundChannel-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=vy20nzsr}], simpSessionId=vy20nzsr}]
2025-06-06 08:56:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/signin
2025-06-06 08:56:06 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/signin
2025-06-06 08:56:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/signin", parameters={}
2025-06-06 08:56:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#signIn(LoginRequest)
2025-06-06 08:56:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=123456)]
2025-06-06 08:56:06 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:56:06 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:56:07 [http-nio-8080-exec-8] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-06 08:56:07 [http-nio-8080-exec-8] INFO  c.r.c.service.impl.AuthServiceImpl - User logged in: admin
2025-06-06 08:56:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE (truncated)...]
2025-06-06 08:56:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:07 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174967171
2025-06-06 08:56:07 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:07 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174967171
2025-06-06 08:56:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174967171", parameters={masked}
2025-06-06 08:56:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174967171
2025-06-06 08:56:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:07 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/839/xhgy3foa/websocket
2025-06-06 08:56:07 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:07 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/839/xhgy3foa/websocket
2025-06-06 08:56:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/839/xhgy3foa/websocket", parameters={}
2025-06-06 08:56:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/839/xhgy3foa/websocket
2025-06-06 08:56:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xhgy3foa]
2025-06-06 08:56:07 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:56:07 [http-nio-8080-exec-2] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-06-06 08:56:07 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:07 [http-nio-8080-exec-3] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: xhgy3foa
2025-06-06 08:56:07 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=xhgy3foa
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 08:56:07 [websocket-async-3] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session xhgy3foa, scheduling retry...
2025-06-06 08:56:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:07 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=xhgy3foa
2025-06-06 08:56:07 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=xhgy3foa
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 08:56:07 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:07 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [3uuvn0xk, mie2kncj]
2025-06-06 08:56:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174968109
2025-06-06 08:56:08 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174968109
2025-06-06 08:56:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174968109", parameters={masked}
2025-06-06 08:56:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174968109
2025-06-06 08:56:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/588/afaxnsc3/websocket
2025-06-06 08:56:08 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/588/afaxnsc3/websocket
2025-06-06 08:56:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/588/afaxnsc3/websocket", parameters={}
2025-06-06 08:56:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/588/afaxnsc3/websocket
2025-06-06 08:56:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=afaxnsc3]
2025-06-06 08:56:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174968125
2025-06-06 08:56:08 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174968125
2025-06-06 08:56:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174968125", parameters={masked}
2025-06-06 08:56:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174968125
2025-06-06 08:56:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:08 [http-nio-8080-exec-1] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:08Z, a difference of 50267131 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:08 [http-nio-8080-exec-1] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: afaxnsc3
2025-06-06 08:56:08 [http-nio-8080-exec-1] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session afaxnsc3: Invalid JWT token
2025-06-06 08:56:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session afaxnsc3
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session afaxnsc3 with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=6743874b-1980-806f-8a50-6f8eadec94b8, uri=ws://localhost:8080/ws/588/afaxnsc3/websocket]
2025-06-06 08:56:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=afaxnsc3] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session afaxnsc3
2025-06-06 08:56:08 [websocket-async-4] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session afaxnsc3
2025-06-06 08:56:08 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=afaxnsc3
2025-06-06 08:56:08 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=afaxnsc3}], simpSessionId=afaxnsc3}]
2025-06-06 08:56:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/991/cqcadn3d/websocket
2025-06-06 08:56:08 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/991/cqcadn3d/websocket
2025-06-06 08:56:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/991/cqcadn3d/websocket", parameters={}
2025-06-06 08:56:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/991/cqcadn3d/websocket
2025-06-06 08:56:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cqcadn3d]
2025-06-06 08:56:08 [http-nio-8080-exec-3] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:08Z, a difference of 50267147 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:08 [http-nio-8080-exec-3] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: cqcadn3d
2025-06-06 08:56:08 [http-nio-8080-exec-3] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session cqcadn3d: Invalid JWT token
2025-06-06 08:56:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session cqcadn3d
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session cqcadn3d with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=d6378460-fb83-5bb3-daae-d6e689200139, uri=ws://localhost:8080/ws/991/cqcadn3d/websocket]
2025-06-06 08:56:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cqcadn3d] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cqcadn3d
2025-06-06 08:56:08 [websocket-async-5] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session cqcadn3d
2025-06-06 08:56:08 [clientInboundChannel-10] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=cqcadn3d
2025-06-06 08:56:08 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=cqcadn3d}], simpSessionId=cqcadn3d}]
2025-06-06 08:56:08 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session xhgy3foa
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:09 [http-nio-8080-exec-2] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:09Z, a difference of 50268632 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:09 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/r (truncated)...]
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:09 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:12 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [w1gt4cky, vy20nzsr]
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174973149
2025-06-06 08:56:13 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174973150
2025-06-06 08:56:13 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:13 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174973149
2025-06-06 08:56:13 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174973150
2025-06-06 08:56:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174973150", parameters={masked}
2025-06-06 08:56:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174973149", parameters={masked}
2025-06-06 08:56:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174973149
2025-06-06 08:56:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174973150
2025-06-06 08:56:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:13 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/670/4iblg5zx/websocket
2025-06-06 08:56:13 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:13 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/670/4iblg5zx/websocket
2025-06-06 08:56:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/670/4iblg5zx/websocket", parameters={}
2025-06-06 08:56:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/670/4iblg5zx/websocket
2025-06-06 08:56:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4iblg5zx]
2025-06-06 08:56:13 [http-nio-8080-exec-7] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:13Z, a difference of 50272170 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:13 [http-nio-8080-exec-7] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: 4iblg5zx
2025-06-06 08:56:13 [http-nio-8080-exec-7] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session 4iblg5zx: Invalid JWT token
2025-06-06 08:56:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session 4iblg5zx
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 4iblg5zx with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=1daf7426-75d7-f964-6c40-ae1a1a26368c, uri=ws://localhost:8080/ws/670/4iblg5zx/websocket]
2025-06-06 08:56:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4iblg5zx] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4iblg5zx
2025-06-06 08:56:13 [websocket-async-6] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session 4iblg5zx
2025-06-06 08:56:13 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=4iblg5zx
2025-06-06 08:56:13 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=4iblg5zx}], simpSessionId=4iblg5zx}]
2025-06-06 08:56:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/862/elf0m5ip/websocket
2025-06-06 08:56:13 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/862/elf0m5ip/websocket
2025-06-06 08:56:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/862/elf0m5ip/websocket", parameters={}
2025-06-06 08:56:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/862/elf0m5ip/websocket
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=elf0m5ip]
2025-06-06 08:56:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:13 [http-nio-8080-exec-1] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:13Z, a difference of 50272194 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:13 [http-nio-8080-exec-1] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: elf0m5ip
2025-06-06 08:56:13 [http-nio-8080-exec-1] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session elf0m5ip: Invalid JWT token
2025-06-06 08:56:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session elf0m5ip
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session elf0m5ip with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=c48f8f61-db32-e756-ff6a-95e6215a91cf, uri=ws://localhost:8080/ws/862/elf0m5ip/websocket]
2025-06-06 08:56:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=elf0m5ip] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session elf0m5ip
2025-06-06 08:56:13 [websocket-async-7] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session elf0m5ip
2025-06-06 08:56:13 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=elf0m5ip
2025-06-06 08:56:13 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=elf0m5ip}], simpSessionId=elf0m5ip}]
2025-06-06 08:56:14 [MessageBroker-7] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 15 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(15)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 51], outboundChannel[pool size = 15, active threads = 0, queued tasks = 0, completed tasks = 15], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 1, completed tasks = 7]
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-6] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:15Z, a difference of 50274839 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:15 [http-nio-8080-exec-5] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:15Z, a difference of 50274840 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:15 [http-nio-8080-exec-10] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:15Z, a difference of 50274840 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:15 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/r (truncated)...]
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:15 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/c (truncated)...]
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:15 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/u (truncated)...]
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174975844
2025-06-06 08:56:15 [http-nio-8080-exec-8] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:15Z, a difference of 50274858 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-9] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:15Z, a difference of 50274858 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-7] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:15Z, a difference of 50274859 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174975844
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174975844", parameters={masked}
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174975844
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:56:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:15 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/u (truncated)...]
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:15 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174975844
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174975844
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174975844", parameters={masked}
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:15 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/r (truncated)...]
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174975844
2025-06-06 08:56:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:15 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/c (truncated)...]
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:15 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:15 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:15 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/253/aixi0ajo/websocket
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/253/aixi0ajo/websocket
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/253/aixi0ajo/websocket", parameters={}
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/253/aixi0ajo/websocket
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=aixi0ajo]
2025-06-06 08:56:15 [http-nio-8080-exec-6] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:15Z, a difference of 50274888 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:15 [http-nio-8080-exec-6] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: aixi0ajo
2025-06-06 08:56:15 [http-nio-8080-exec-6] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session aixi0ajo: Invalid JWT token
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session aixi0ajo
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session aixi0ajo with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=9e99a497-c4bb-1553-7685-71af778aefdb, uri=ws://localhost:8080/ws/253/aixi0ajo/websocket]
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=aixi0ajo] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session aixi0ajo
2025-06-06 08:56:15 [websocket-async-8] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session aixi0ajo
2025-06-06 08:56:15 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=aixi0ajo
2025-06-06 08:56:15 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=aixi0ajo}], simpSessionId=aixi0ajo}]
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/392/ssvqje3q/websocket
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/392/ssvqje3q/websocket
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/392/ssvqje3q/websocket", parameters={}
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/392/ssvqje3q/websocket
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ssvqje3q]
2025-06-06 08:56:15 [http-nio-8080-exec-5] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:15Z, a difference of 50274904 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:15 [http-nio-8080-exec-5] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: ssvqje3q
2025-06-06 08:56:15 [http-nio-8080-exec-5] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session ssvqje3q: Invalid JWT token
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session ssvqje3q
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ssvqje3q with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=06ca7690-fdcd-1f5e-ba9f-eb181eea0159, uri=ws://localhost:8080/ws/392/ssvqje3q/websocket]
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ssvqje3q] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ssvqje3q
2025-06-06 08:56:15 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session ssvqje3q
2025-06-06 08:56:15 [clientInboundChannel-9] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=ssvqje3q
2025-06-06 08:56:15 [clientOutboundChannel-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=ssvqje3q}], simpSessionId=ssvqje3q}]
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:16 [http-nio-8080-exec-1] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:16Z, a difference of 50275577 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:16 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/r (truncated)...]
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:16 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:17 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [afaxnsc3, cqcadn3d]
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:17 [http-nio-8080-exec-9] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:17Z, a difference of 50276954 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:17 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/api/u (truncated)...]
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:17 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:20 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174980901
2025-06-06 08:56:20 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:20 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174980901
2025-06-06 08:56:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174980901", parameters={masked}
2025-06-06 08:56:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174980901
2025-06-06 08:56:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/956/nj13qh54/websocket
2025-06-06 08:56:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174980910
2025-06-06 08:56:20 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:20 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/956/nj13qh54/websocket
2025-06-06 08:56:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/956/nj13qh54/websocket", parameters={}
2025-06-06 08:56:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174980910
2025-06-06 08:56:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174980910", parameters={masked}
2025-06-06 08:56:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/956/nj13qh54/websocket
2025-06-06 08:56:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174980910
2025-06-06 08:56:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nj13qh54]
2025-06-06 08:56:20 [http-nio-8080-exec-8] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:20Z, a difference of 50279921 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:20 [http-nio-8080-exec-8] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: nj13qh54
2025-06-06 08:56:20 [http-nio-8080-exec-8] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session nj13qh54: Invalid JWT token
2025-06-06 08:56:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session nj13qh54
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session nj13qh54 with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=6c40a23e-c0df-288e-df64-280892b2f5cb, uri=ws://localhost:8080/ws/956/nj13qh54/websocket]
2025-06-06 08:56:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nj13qh54] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nj13qh54
2025-06-06 08:56:20 [websocket-async-2] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session nj13qh54
2025-06-06 08:56:20 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=nj13qh54
2025-06-06 08:56:20 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=nj13qh54}], simpSessionId=nj13qh54}]
2025-06-06 08:56:20 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/564/xb2v5lfi/websocket
2025-06-06 08:56:20 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:20 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/564/xb2v5lfi/websocket
2025-06-06 08:56:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/564/xb2v5lfi/websocket", parameters={}
2025-06-06 08:56:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/564/xb2v5lfi/websocket
2025-06-06 08:56:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xb2v5lfi]
2025-06-06 08:56:20 [http-nio-8080-exec-6] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:20Z, a difference of 50279940 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:20 [http-nio-8080-exec-6] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: xb2v5lfi
2025-06-06 08:56:20 [http-nio-8080-exec-6] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session xb2v5lfi: Invalid JWT token
2025-06-06 08:56:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session xb2v5lfi
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session xb2v5lfi with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=0f675d29-24f5-6b29-857b-19a96506e48b, uri=ws://localhost:8080/ws/564/xb2v5lfi/websocket]
2025-06-06 08:56:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xb2v5lfi] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xb2v5lfi
2025-06-06 08:56:20 [websocket-async-3] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session xb2v5lfi
2025-06-06 08:56:20 [clientInboundChannel-10] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=xb2v5lfi
2025-06-06 08:56:20 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=xb2v5lfi}], simpSessionId=xb2v5lfi}]
2025-06-06 08:56:22 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 4 sessions: [aixi0ajo, 4iblg5zx, elf0m5ip, ssvqje3q]
2025-06-06 08:56:22 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 08:56:22 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:22 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 08:56:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 08:56:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:56:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:22 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/.well (truncated)...]
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:22 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:25 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174985929
2025-06-06 08:56:25 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:25 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174985929
2025-06-06 08:56:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174985929", parameters={masked}
2025-06-06 08:56:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174985929
2025-06-06 08:56:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:25 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174985946
2025-06-06 08:56:25 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:25 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174985946
2025-06-06 08:56:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174985946", parameters={masked}
2025-06-06 08:56:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174985946
2025-06-06 08:56:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:25 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/492/bbhiekoo/websocket
2025-06-06 08:56:25 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:25 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/492/bbhiekoo/websocket
2025-06-06 08:56:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/492/bbhiekoo/websocket", parameters={}
2025-06-06 08:56:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/492/bbhiekoo/websocket
2025-06-06 08:56:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bbhiekoo]
2025-06-06 08:56:26 [http-nio-8080-exec-2] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:26Z, a difference of 50285005 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:26 [http-nio-8080-exec-2] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: bbhiekoo
2025-06-06 08:56:26 [http-nio-8080-exec-2] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session bbhiekoo: Invalid JWT token
2025-06-06 08:56:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session bbhiekoo
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session bbhiekoo with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=0b641d3e-d756-794e-8008-da080ae9c43f, uri=ws://localhost:8080/ws/492/bbhiekoo/websocket]
2025-06-06 08:56:26 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/797/sxdbnav0/websocket
2025-06-06 08:56:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bbhiekoo] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bbhiekoo
2025-06-06 08:56:26 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:26 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/797/sxdbnav0/websocket
2025-06-06 08:56:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/797/sxdbnav0/websocket", parameters={}
2025-06-06 08:56:26 [websocket-async-4] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session bbhiekoo
2025-06-06 08:56:26 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=bbhiekoo
2025-06-06 08:56:26 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=bbhiekoo}], simpSessionId=bbhiekoo}]
2025-06-06 08:56:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/797/sxdbnav0/websocket
2025-06-06 08:56:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sxdbnav0]
2025-06-06 08:56:26 [http-nio-8080-exec-8] ERROR c.r.chatapp.security.JwtTokenUtil - JWT token is expired: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:26Z, a difference of 50285030 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:26 [http-nio-8080-exec-8] WARN  c.r.chatapp.config.WebSocketConfig - Invalid JWT token received for session: sxdbnav0
2025-06-06 08:56:26 [http-nio-8080-exec-8] ERROR c.r.chatapp.config.WebSocketConfig - WebSocket authentication failed for session sxdbnav0: Invalid JWT token
2025-06-06 08:56:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send message to MessageChannel in session sxdbnav0
org.springframework.messaging.MessageDeliveryException: Failed to send message to ExecutorSubscribableChannel[clientInboundChannel]
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:149)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:125)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageFromClient(StompSubProtocolHandler.java:343)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:357)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.delegateMessages(AbstractSockJsSession.java:346)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.handleMessage(WebSocketServerSockJsSession.java:199)
	at org.springframework.web.socket.sockjs.transport.handler.SockJsWebSocketHandler.handleTextMessage(SockJsWebSocketHandler.java:93)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: Authentication failed: Invalid JWT token
	at com.revotech.chatapp.config.WebSocketConfig.handleConnectionAuthentication(WebSocketConfig.java:123)
	at com.revotech.chatapp.config.WebSocketConfig$1.preSend(WebSocketConfig.java:76)
	at org.springframework.messaging.support.AbstractMessageChannel$ChannelInterceptorChain.applyPreSend(AbstractMessageChannel.java:181)
	at org.springframework.messaging.support.AbstractMessageChannel.send(AbstractMessageChannel.java:135)
	... 31 common frames omitted
2025-06-06 08:56:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session sxdbnav0 with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=9616220b-0b80-0c1a-bb37-7e5af05ff989, uri=ws://localhost:8080/ws/797/sxdbnav0/websocket]
2025-06-06 08:56:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sxdbnav0] closed with CloseStatus[code=1002, reason=null]
2025-06-06 08:56:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sxdbnav0
2025-06-06 08:56:26 [websocket-async-5] WARN  c.r.c.l.WebSocketEventListener - Username or userId is null during disconnection of session sxdbnav0
2025-06-06 08:56:26 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=sxdbnav0
2025-06-06 08:56:26 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=sxdbnav0}], simpSessionId=sxdbnav0}]
2025-06-06 08:56:27 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [nj13qh54, xb2v5lfi]
2025-06-06 08:56:28 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/logout
2025-06-06 08:56:28 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:28 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/logout
2025-06-06 08:56:28 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/logout", parameters={}
2025-06-06 08:56:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#logout(String)
2025-06-06 08:56:28 [http-nio-8080-exec-3] ERROR c.r.chatapp.security.JwtTokenUtil - Error extracting username from token: JWT expired at 2025-06-05T11:58:21Z. Current time: 2025-06-06T01:56:28Z, a difference of 50287226 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-06-06 08:56:28 [http-nio-8080-exec-3] WARN  c.r.c.service.impl.AuthServiceImpl - Error during logout: Invalid token
2025-06-06 08:56:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:28 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:28 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:32 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [sxdbnav0, bbhiekoo]
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/signin
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/signin
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/signin", parameters={}
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#signIn(LoginRequest)
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=quandepzai, password=123456)]
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-06 08:56:36 [http-nio-8080-exec-10] INFO  c.r.c.service.impl.AuthServiceImpl - User logged in: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJxdWFuZGVwemFpIiwidHlwZSI6ImFjY2VzcyIsIml (truncated)...]
2025-06-06 08:56:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749174996884
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749174996884
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:36 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749174996884", parameters={masked}
2025-06-06 08:56:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:56:36 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749174996884
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 08:56:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:36 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/830/g0uuvnvo/websocket
2025-06-06 08:56:36 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 08:56:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:36 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/830/g0uuvnvo/websocket
2025-06-06 08:56:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/830/g0uuvnvo/websocket", parameters={}
2025-06-06 08:56:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/830/g0uuvnvo/websocket
2025-06-06 08:56:36 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=g0uuvnvo]
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:36 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:36 [http-nio-8080-exec-7] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: g0uuvnvo
2025-06-06 08:56:36 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=g0uuvnvo
2025-06-06 08:56:36 [websocket-async-6] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session g0uuvnvo, scheduling retry...
2025-06-06 08:56:36 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=g0uuvnvo
2025-06-06 08:56:36 [clientInboundChannel-10] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=g0uuvnvo
2025-06-06 08:56:38 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session g0uuvnvo
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 08:56:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 08:56:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:44 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-2 session=g0uuvnvo
2025-06-06 08:56:44 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=g0uuvnvo
2025-06-06 08:56:44 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=g0uuvnvo, lookupDestination='/chat/conversation/2/enter'
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 08:56:44 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:44 [clientInboundChannel-6] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session g0uuvnvo
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:44 [clientInboundChannel-6] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session g0uuvnvo
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 08:56:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:44 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:44 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:44 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:44 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:44 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:44 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:44 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"dc50f85e-393e-4b2b-92a0...(truncated)
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b0c76bb8-010f-4ece-aa86...(truncated)
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"724b112c-d308-44b2-bc26...(truncated)
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3c97df02-713f-4be7-b580...(truncated)
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"4160824a-ced4-4e8f-b626...(truncated)
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"8d65be0b-3aee-4136-a0df...(truncated)
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:45 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3
2025-06-06 08:56:45 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3
2025-06-06 08:56:45 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3
2025-06-06 08:56:45 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3
2025-06-06 08:56:45 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3
2025-06-06 08:56:45 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:45 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b09a4099-8bc5-4ae3-9d72...(truncated)
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"e4503b50-8a13-4765-b77e...(truncated)
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:45 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3
2025-06-06 08:56:45 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:45 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 08:56:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:49 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=g0uuvnvo, lookupDestination='/chat/conversation/2/leave'
2025-06-06 08:56:49 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 08:56:49 [clientInboundChannel-13] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat conversation:2 with session g0uuvnvo
2025-06-06 08:56:49 [clientInboundChannel-13] DEBUG c.r.c.controller.ChatController - User 3 left conversation 2 with session g0uuvnvo
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:50 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=g0uuvnvo
2025-06-06 08:56:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=g0uuvnvo] closed with CloseStatus[code=1000, reason=null]
2025-06-06 08:56:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session g0uuvnvo
2025-06-06 08:56:50 [websocket-async-7] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session g0uuvnvo
2025-06-06 08:56:50 [websocket-async-7] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session g0uuvnvo marked as offline
2025-06-06 08:56:50 [clientInboundChannel-10] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=g0uuvnvo
2025-06-06 08:56:50 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"g0uuvnvo"}
2025-06-06 08:56:50 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:50 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpHeartbeat=[J@3d9194d9, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=g0uuvnvo}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=g0uuvnvo}]
2025-06-06 08:56:50 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=g0uuvnvo}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=g0uuvnvo}]
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 08:56:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749175011043
2025-06-06 08:56:51 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749175011043
2025-06-06 08:56:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749175011043", parameters={masked}
2025-06-06 08:56:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 08:56:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749175011043
2025-06-06 08:56:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749175011043
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 08:56:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749175011043
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/035/z13igs2p/websocket
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/035/z13igs2p/websocket
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/035/z13igs2p/websocket", parameters={}
2025-06-06 08:56:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749175011043", parameters={masked}
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749175011043
2025-06-06 08:56:51 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/035/z13igs2p/websocket
2025-06-06 08:56:51 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 08:56:51 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 08:56:51 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=z13igs2p]
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/854/rakelcbp/websocket
2025-06-06 08:56:51 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 08:56:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/854/rakelcbp/websocket
2025-06-06 08:56:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/854/rakelcbp/websocket", parameters={}
2025-06-06 08:56:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 08:56:51 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/854/rakelcbp/websocket
2025-06-06 08:56:51 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 08:56:51 [http-nio-8080-exec-9] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: z13igs2p
2025-06-06 08:56:51 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=z13igs2p
2025-06-06 08:56:51 [websocket-async-8] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session z13igs2p, scheduling retry...
2025-06-06 08:56:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rakelcbp]
2025-06-06 08:56:51 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:51 [http-nio-8080-exec-2] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: rakelcbp
2025-06-06 08:56:51 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=rakelcbp
2025-06-06 08:56:51 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session rakelcbp, scheduling retry...
2025-06-06 08:56:51 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-1 session=rakelcbp
2025-06-06 08:56:51 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-2 session=rakelcbp
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:51 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:52 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session z13igs2p
2025-06-06 08:56:52 [ForkJoinPool.commonPool-worker-2] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session rakelcbp
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:53 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-3 session=rakelcbp
2025-06-06 08:56:53 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-4 session=rakelcbp
2025-06-06 08:56:53 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=rakelcbp, lookupDestination='/chat/room/1/enter'
2025-06-06 08:56:53 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 08:56:53 [clientInboundChannel-4] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session rakelcbp
2025-06-06 08:56:53 [clientInboundChannel-4] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session rakelcbp
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 08:56:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:53 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:53 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:53 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:53 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 08:56:53 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:53 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:53 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:56:53 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:53 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:56:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:54 [clientInboundChannel-14] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=rakelcbp, lookupDestination='/chat/room/1/leave'
2025-06-06 08:56:54 [clientInboundChannel-14] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 08:56:54 [clientInboundChannel-15] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/3 id=sub-5 session=rakelcbp
2025-06-06 08:56:54 [clientInboundChannel-5] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-6 session=rakelcbp
2025-06-06 08:56:54 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/enter session=rakelcbp, lookupDestination='/chat/room/3/enter'
2025-06-06 08:56:54 [clientInboundChannel-14] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:1 with session rakelcbp
2025-06-06 08:56:54 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 08:56:54 [clientInboundChannel-14] DEBUG c.r.c.controller.ChatController - User 3 left room 1 with session rakelcbp
2025-06-06 08:56:54 [clientInboundChannel-2] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:3 with session rakelcbp
2025-06-06 08:56:54 [clientInboundChannel-2] DEBUG c.r.c.controller.ChatController - User 3 entered room 3 with session rakelcbp
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/3/messages?page=0&size=50
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/3/messages?page=0&size=50
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/3/messages?page=0&size=50", parameters={masked}
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 08:56:54 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:54 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/leave session=rakelcbp, lookupDestination='/chat/room/3/leave'
2025-06-06 08:56:54 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 08:56:54 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/2 id=sub-7 session=rakelcbp
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/2/messages?page=0&size=50
2025-06-06 08:56:54 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-8 session=rakelcbp
2025-06-06 08:56:54 [clientInboundChannel-7] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:3 with session rakelcbp
2025-06-06 08:56:54 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/2/enter session=rakelcbp, lookupDestination='/chat/room/2/enter'
2025-06-06 08:56:54 [clientInboundChannel-7] DEBUG c.r.c.controller.ChatController - User 3 left room 3 with session rakelcbp
2025-06-06 08:56:54 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 08:56:54 [clientInboundChannel-16] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:2 with session rakelcbp
2025-06-06 08:56:54 [clientInboundChannel-16] DEBUG c.r.c.controller.ChatController - User 3 entered room 2 with session rakelcbp
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/2/messages?page=0&size=50
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/2/messages?page=0&size=50", parameters={masked}
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 08:56:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:56:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:56:57 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [g0uuvnvo]
2025-06-06 08:57:02 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/2/leave session=rakelcbp, lookupDestination='/chat/room/2/leave'
2025-06-06 08:57:02 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 08:57:02 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-9 session=rakelcbp
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 08:57:02 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-10 session=rakelcbp
2025-06-06 08:57:02 [clientInboundChannel-2] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:2 with session rakelcbp
2025-06-06 08:57:02 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=rakelcbp, lookupDestination='/chat/room/1/enter'
2025-06-06 08:57:02 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 08:57:02 [clientInboundChannel-2] DEBUG c.r.c.controller.ChatController - User 3 left room 2 with session rakelcbp
2025-06-06 08:57:02 [clientInboundChannel-5] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session rakelcbp
2025-06-06 08:57:02 [clientInboundChannel-5] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session rakelcbp
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 08:57:02 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:02 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:02 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:02 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:02 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:02 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=1, conversationId=null (truncated)...]
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:03 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:03 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:03 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:03 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 08:57:03 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:03 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:03 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:03 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:03 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 08:57:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 08:57:43 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:43 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:43 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 08:57:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 08:57:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 08:57:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 08:57:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 08:57:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:45 [clientInboundChannel-5] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-2 session=xhgy3foa
2025-06-06 08:57:45 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=xhgy3foa
2025-06-06 08:57:45 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=xhgy3foa, lookupDestination='/chat/conversation/2/enter'
2025-06-06 08:57:45 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 08:57:45 [clientInboundChannel-3] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:2 with session xhgy3foa
2025-06-06 08:57:45 [clientInboundChannel-3] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 2 with session xhgy3foa
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 08:57:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"498ae16e-bd54-4a5e-b5e9...(truncated)
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:45 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd marked as read by user 1
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=9d536ca6-8719-4aad-a9a5-386f20faa656, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=18ecee51-f6b0-481a-b245-cd3ea296c23c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=67106a51-ea87-4732-80b7-21af05d669dd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:45 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"67106a51-ea87-4732-80b7...(truncated)
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d1a2ccb7-a8ed-42d9-aa80...(truncated)
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:45 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd marked as read by user 1
2025-06-06 08:57:45 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 marked as read by user 1
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"9d536ca6-8719-4aad-a9a5...(truncated)
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:45 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 marked as read by user 1
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"18ecee51-f6b0-481a-b245...(truncated)
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:45 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c marked as read by user 1
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:45 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:48 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=xhgy3foa, lookupDestination='/chat/conversation/2/leave'
2025-06-06 08:57:48 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 08:57:48 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/3 id=sub-4 session=xhgy3foa
2025-06-06 08:57:48 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=xhgy3foa
2025-06-06 08:57:48 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/enter session=xhgy3foa, lookupDestination='/chat/conversation/3/enter'
2025-06-06 08:57:48 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/3/messages?page=0&size=50
2025-06-06 08:57:48 [clientInboundChannel-12] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:3 with session xhgy3foa
2025-06-06 08:57:48 [clientInboundChannel-13] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:2 with session xhgy3foa
2025-06-06 08:57:48 [clientInboundChannel-12] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 3 with session xhgy3foa
2025-06-06 08:57:48 [clientInboundChannel-13] DEBUG c.r.c.controller.ChatController - User 1 left conversation 2 with session xhgy3foa
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/3/messages?page=0&size=50
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/3/messages?page=0&size=50", parameters={masked}
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 08:57:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d16b939f-6475-44f3-ba69-fa434dd17132, roomId=null, conversationId=3 (truncated)...]
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=24885d4c-9586-4b21-908d-7473305abc7e, roomId=null, conversationId=3 (truncated)...]
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d16b939f-6475-44f3-ba69...(truncated)
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"24885d4c-9586-4b21-908d...(truncated)
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:48 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 24885d4c-9586-4b21-908d-7473305abc7e marked as read by user 1
2025-06-06 08:57:48 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message d16b939f-6475-44f3-ba69-fa434dd17132 marked as read by user 1
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:48 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:49 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/leave session=xhgy3foa, lookupDestination='/chat/conversation/3/leave'
2025-06-06 08:57:49 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 08:57:49 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/1 id=sub-6 session=xhgy3foa
2025-06-06 08:57:49 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-7 session=xhgy3foa
2025-06-06 08:57:49 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/1/enter session=xhgy3foa, lookupDestination='/chat/conversation/1/enter'
2025-06-06 08:57:49 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 08:57:49 [clientInboundChannel-3] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:3 with session xhgy3foa
2025-06-06 08:57:49 [clientInboundChannel-3] DEBUG c.r.c.controller.ChatController - User 1 left conversation 3 with session xhgy3foa
2025-06-06 08:57:49 [clientInboundChannel-16] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:1 with session xhgy3foa
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/1/messages?page=0&size=50
2025-06-06 08:57:49 [clientInboundChannel-16] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 1 with session xhgy3foa
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/1/messages?page=0&size=50
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/1/messages?page=0&size=50", parameters={masked}
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 08:57:49 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=52fcf0d2-c5fd-453d-a272-c02953ad35ff, roomId=null, conversationId=1 (truncated)...]
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=aab4ef78-75f6-4e18-b10d-17dc24e05ec7, roomId=null, conversationId=1 (truncated)...]
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=81a5d67d-0f6f-408a-86c3-9cc53a82131e, roomId=null, conversationId=1 (truncated)...]
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45bd83c1-3f84-11f0-abdc-0433c2abf6d4, roomId=null, conversationId=1 (truncated)...]
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45bd83c1-3f84-11f0-abdc...(truncated)
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"aab4ef78-75f6-4e18-b10d...(truncated)
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"81a5d67d-0f6f-408a-86c3...(truncated)
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:49 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45bd83c1-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 1
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:49 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message aab4ef78-75f6-4e18-b10d-17dc24e05ec7 marked as read by user 1
2025-06-06 08:57:49 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 81a5d67d-0f6f-408a-86c3-9cc53a82131e marked as read by user 1
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"52fcf0d2-c5fd-453d-a272...(truncated)
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 08:57:49 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 52fcf0d2-c5fd-453d-a272-c02953ad35ff marked as read by user 1
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:49 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:49 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 08:57:49 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:01:52 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/1/leave session=xhgy3foa, lookupDestination='/chat/conversation/1/leave'
2025-06-06 09:01:52 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:01:52 [clientInboundChannel-47] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:1 with session xhgy3foa
2025-06-06 09:01:52 [clientInboundChannel-47] DEBUG c.r.c.controller.ChatController - User 1 left conversation 1 with session xhgy3foa
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:01:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:08 [clientInboundChannel-46] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-8 session=xhgy3foa
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:02:08 [clientInboundChannel-48] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-9 session=xhgy3foa
2025-06-06 09:02:08 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=xhgy3foa, lookupDestination='/chat/room/1/enter'
2025-06-06 09:02:08 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:02:08 [clientInboundChannel-47] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:1 with session xhgy3foa
2025-06-06 09:02:08 [clientInboundChannel-47] DEBUG c.r.c.controller.ChatController - User 1 entered room 1 with session xhgy3foa
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b8c2c34b-86c8-480b-a8d9-23b78c2f4241, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=02ea9e2c-fef3-4ac5-82e4-9e4187905822, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=778a07d4-df41-4c87-a8d9-cd26087c15f2, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=6741ae16-2ab4-4652-b3ad-21b236703060, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b8c2c34b-86c8-480b-a8d9...(truncated)
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"778a07d4-df41-4c87-a8d9...(truncated)
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"02ea9e2c-fef3-4ac5-82e4...(truncated)
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"6741ae16-2ab4-4652-b3ad...(truncated)
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:02:08 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 1
2025-06-06 09:02:08 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 778a07d4-df41-4c87-a8d9-cd26087c15f2 marked as read by user 1
2025-06-06 09:02:08 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 6741ae16-2ab4-4652-b3ad-21b236703060 marked as read by user 1
2025-06-06 09:02:08 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message b8c2c34b-86c8-480b-a8d9-23b78c2f4241 marked as read by user 1
2025-06-06 09:02:08 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 02ea9e2c-fef3-4ac5-82e4-9e4187905822 marked as read by user 1
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:09 [clientInboundChannel-52] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=xhgy3foa, lookupDestination='/chat/room/1/leave'
2025-06-06 09:02:09 [clientInboundChannel-55] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/10 id=sub-10 session=xhgy3foa
2025-06-06 09:02:09 [clientInboundChannel-52] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:02:09 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-11 session=xhgy3foa
2025-06-06 09:02:09 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/10/enter session=xhgy3foa, lookupDestination='/chat/room/10/enter'
2025-06-06 09:02:09 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:02:09 [clientInboundChannel-52] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat room:1 with session xhgy3foa
2025-06-06 09:02:09 [clientInboundChannel-42] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:10 with session xhgy3foa
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/10/messages?page=0&size=50
2025-06-06 09:02:09 [clientInboundChannel-52] DEBUG c.r.c.controller.ChatController - User 1 left room 1 with session xhgy3foa
2025-06-06 09:02:09 [clientInboundChannel-42] DEBUG c.r.c.controller.ChatController - User 1 entered room 10 with session xhgy3foa
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/10/messages?page=0&size=50
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/10/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:02:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:09 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/10/leave session=xhgy3foa, lookupDestination='/chat/room/10/leave'
2025-06-06 09:02:09 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:02:09 [clientInboundChannel-54] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/9 id=sub-12 session=xhgy3foa
2025-06-06 09:02:09 [clientInboundChannel-41] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-13 session=xhgy3foa
2025-06-06 09:02:09 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/9/enter session=xhgy3foa, lookupDestination='/chat/room/9/enter'
2025-06-06 09:02:09 [clientInboundChannel-48] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat room:10 with session xhgy3foa
2025-06-06 09:02:09 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/9/messages?page=0&size=50
2025-06-06 09:02:09 [clientInboundChannel-48] DEBUG c.r.c.controller.ChatController - User 1 left room 10 with session xhgy3foa
2025-06-06 09:02:09 [clientInboundChannel-46] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:9 with session xhgy3foa
2025-06-06 09:02:09 [clientInboundChannel-46] DEBUG c.r.c.controller.ChatController - User 1 entered room 9 with session xhgy3foa
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/9/messages?page=0&size=50
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/9/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:02:09 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:10 [clientInboundChannel-49] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/9/leave session=xhgy3foa, lookupDestination='/chat/room/9/leave'
2025-06-06 09:02:10 [clientInboundChannel-49] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:02:10 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/8 id=sub-14 session=xhgy3foa
2025-06-06 09:02:10 [clientInboundChannel-47] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-15 session=xhgy3foa
2025-06-06 09:02:10 [clientInboundChannel-41] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/8/enter session=xhgy3foa, lookupDestination='/chat/room/8/enter'
2025-06-06 09:02:10 [clientInboundChannel-49] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat room:9 with session xhgy3foa
2025-06-06 09:02:10 [clientInboundChannel-41] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:02:10 [clientInboundChannel-49] DEBUG c.r.c.controller.ChatController - User 1 left room 9 with session xhgy3foa
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/8/messages?page=0&size=50
2025-06-06 09:02:10 [clientInboundChannel-41] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:8 with session xhgy3foa
2025-06-06 09:02:10 [clientInboundChannel-41] DEBUG c.r.c.controller.ChatController - User 1 entered room 8 with session xhgy3foa
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/8/messages?page=0&size=50
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/8/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:10 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:10 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/8/leave session=xhgy3foa, lookupDestination='/chat/room/8/leave'
2025-06-06 09:02:10 [clientInboundChannel-46] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/7 id=sub-16 session=xhgy3foa
2025-06-06 09:02:10 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:02:10 [clientInboundChannel-50] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-17 session=xhgy3foa
2025-06-06 09:02:10 [clientInboundChannel-53] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/7/enter session=xhgy3foa, lookupDestination='/chat/room/7/enter'
2025-06-06 09:02:10 [clientInboundChannel-53] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:02:10 [clientInboundChannel-44] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat room:8 with session xhgy3foa
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/7/messages?page=0&size=50
2025-06-06 09:02:10 [clientInboundChannel-53] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:7 with session xhgy3foa
2025-06-06 09:02:10 [clientInboundChannel-44] DEBUG c.r.c.controller.ChatController - User 1 left room 8 with session xhgy3foa
2025-06-06 09:02:10 [clientInboundChannel-53] DEBUG c.r.c.controller.ChatController - User 1 entered room 7 with session xhgy3foa
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/7/messages?page=0&size=50
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/7/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:10 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:11 [clientInboundChannel-55] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/7/leave session=xhgy3foa, lookupDestination='/chat/room/7/leave'
2025-06-06 09:02:11 [clientInboundChannel-41] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/6 id=sub-18 session=xhgy3foa
2025-06-06 09:02:11 [clientInboundChannel-55] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:02:11 [clientInboundChannel-45] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-19 session=xhgy3foa
2025-06-06 09:02:11 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/6/enter session=xhgy3foa, lookupDestination='/chat/room/6/enter'
2025-06-06 09:02:11 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:02:11 [clientInboundChannel-55] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat room:7 with session xhgy3foa
2025-06-06 09:02:11 [clientInboundChannel-55] DEBUG c.r.c.controller.ChatController - User 1 left room 7 with session xhgy3foa
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/6/messages?page=0&size=50
2025-06-06 09:02:11 [clientInboundChannel-46] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:6 with session xhgy3foa
2025-06-06 09:02:11 [clientInboundChannel-46] DEBUG c.r.c.controller.ChatController - User 1 entered room 6 with session xhgy3foa
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/6/messages?page=0&size=50
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/6/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:02:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:12 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/6/leave session=xhgy3foa, lookupDestination='/chat/room/6/leave'
2025-06-06 09:02:12 [clientInboundChannel-53] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/5 id=sub-20 session=xhgy3foa
2025-06-06 09:02:12 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:02:12 [clientInboundChannel-57] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-21 session=xhgy3foa
2025-06-06 09:02:12 [clientInboundChannel-51] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/5/enter session=xhgy3foa, lookupDestination='/chat/room/5/enter'
2025-06-06 09:02:12 [clientInboundChannel-51] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:02:12 [clientInboundChannel-47] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat room:6 with session xhgy3foa
2025-06-06 09:02:12 [clientInboundChannel-47] DEBUG c.r.c.controller.ChatController - User 1 left room 6 with session xhgy3foa
2025-06-06 09:02:12 [clientInboundChannel-51] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:5 with session xhgy3foa
2025-06-06 09:02:12 [clientInboundChannel-51] DEBUG c.r.c.controller.ChatController - User 1 entered room 5 with session xhgy3foa
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/5/messages?page=0&size=50
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/5/messages?page=0&size=50
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/5/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:02:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:14 [clientInboundChannel-50] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/5/leave session=xhgy3foa, lookupDestination='/chat/room/5/leave'
2025-06-06 09:02:14 [clientInboundChannel-50] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:02:14 [clientInboundChannel-50] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat room:5 with session xhgy3foa
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:02:14 [clientInboundChannel-50] DEBUG c.r.c.controller.ChatController - User 1 left room 5 with session xhgy3foa
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:02:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:02:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:15 [clientInboundChannel-54] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-22 session=xhgy3foa
2025-06-06 09:02:15 [clientInboundChannel-56] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-23 session=xhgy3foa
2025-06-06 09:02:15 [clientInboundChannel-41] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=xhgy3foa, lookupDestination='/chat/conversation/2/enter'
2025-06-06 09:02:15 [clientInboundChannel-41] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:02:15 [clientInboundChannel-41] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:2 with session xhgy3foa
2025-06-06 09:02:15 [clientInboundChannel-41] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 2 with session xhgy3foa
2025-06-06 09:02:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:02:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=67106a51-ea87-4732-80b7-21af05d669dd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=18ecee51-f6b0-481a-b245-cd3ea296c23c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=9d536ca6-8719-4aad-a9a5-386f20faa656, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"18ecee51-f6b0-481a-b245...(truncated)
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:16 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c marked as read by user 1
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"9d536ca6-8719-4aad-a9a5...(truncated)
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:16 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 marked as read by user 1
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"67106a51-ea87-4732-80b7...(truncated)
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:16 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd marked as read by user 1
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d1a2ccb7-a8ed-42d9-aa80...(truncated)
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:16 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 marked as read by user 1
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:16 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:16 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"498ae16e-bd54-4a5e-b5e9...(truncated)
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:16 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd marked as read by user 1
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:16 [clientInboundChannel-52] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=xhgy3foa, lookupDestination='/chat/conversation/2/leave'
2025-06-06 09:02:16 [clientInboundChannel-51] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/3 id=sub-24 session=xhgy3foa
2025-06-06 09:02:16 [clientInboundChannel-52] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:16 [clientInboundChannel-46] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-25 session=xhgy3foa
2025-06-06 09:02:16 [clientInboundChannel-52] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:2 with session xhgy3foa
2025-06-06 09:02:16 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/enter session=xhgy3foa, lookupDestination='/chat/conversation/3/enter'
2025-06-06 09:02:16 [clientInboundChannel-52] DEBUG c.r.c.controller.ChatController - User 1 left conversation 2 with session xhgy3foa
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:16 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:16 [clientInboundChannel-54] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:3 with session xhgy3foa
2025-06-06 09:02:16 [clientInboundChannel-54] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 3 with session xhgy3foa
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:16 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d16b939f-6475-44f3-ba69-fa434dd17132, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=24885d4c-9586-4b21-908d-7473305abc7e, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d16b939f-6475-44f3-ba69...(truncated)
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:16 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message d16b939f-6475-44f3-ba69-fa434dd17132 marked as read by user 1
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"24885d4c-9586-4b21-908d...(truncated)
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:16 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 24885d4c-9586-4b21-908d-7473305abc7e marked as read by user 1
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:17 [clientInboundChannel-56] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/leave session=xhgy3foa, lookupDestination='/chat/conversation/3/leave'
2025-06-06 09:02:17 [clientInboundChannel-56] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:17 [clientInboundChannel-41] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/1 id=sub-26 session=xhgy3foa
2025-06-06 09:02:17 [clientInboundChannel-45] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-27 session=xhgy3foa
2025-06-06 09:02:17 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/1/enter session=xhgy3foa, lookupDestination='/chat/conversation/1/enter'
2025-06-06 09:02:17 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/1/messages?page=0&size=50
2025-06-06 09:02:17 [clientInboundChannel-42] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:1 with session xhgy3foa
2025-06-06 09:02:17 [clientInboundChannel-56] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:3 with session xhgy3foa
2025-06-06 09:02:17 [clientInboundChannel-42] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 1 with session xhgy3foa
2025-06-06 09:02:17 [clientInboundChannel-56] DEBUG c.r.c.controller.ChatController - User 1 left conversation 3 with session xhgy3foa
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/1/messages?page=0&size=50
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=aab4ef78-75f6-4e18-b10d-17dc24e05ec7, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45bd83c1-3f84-11f0-abdc-0433c2abf6d4, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=81a5d67d-0f6f-408a-86c3-9cc53a82131e, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=52fcf0d2-c5fd-453d-a272-c02953ad35ff, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"aab4ef78-75f6-4e18-b10d...(truncated)
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45bd83c1-3f84-11f0-abdc...(truncated)
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"52fcf0d2-c5fd-453d-a272...(truncated)
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"81a5d67d-0f6f-408a-86c3...(truncated)
2025-06-06 09:02:17 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45bd83c1-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 1
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:17 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 81a5d67d-0f6f-408a-86c3-9cc53a82131e marked as read by user 1
2025-06-06 09:02:17 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 52fcf0d2-c5fd-453d-a272-c02953ad35ff marked as read by user 1
2025-06-06 09:02:17 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message aab4ef78-75f6-4e18-b10d-17dc24e05ec7 marked as read by user 1
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:26 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/1/leave session=xhgy3foa, lookupDestination='/chat/conversation/1/leave'
2025-06-06 09:02:26 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:26 [clientInboundChannel-41] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/3 id=sub-28 session=xhgy3foa
2025-06-06 09:02:26 [clientInboundChannel-47] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-29 session=xhgy3foa
2025-06-06 09:02:26 [clientInboundChannel-41] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/enter session=xhgy3foa, lookupDestination='/chat/conversation/3/enter'
2025-06-06 09:02:26 [clientInboundChannel-41] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:26 [clientInboundChannel-54] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:1 with session xhgy3foa
2025-06-06 09:02:26 [clientInboundChannel-41] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:3 with session xhgy3foa
2025-06-06 09:02:26 [clientInboundChannel-54] DEBUG c.r.c.controller.ChatController - User 1 left conversation 1 with session xhgy3foa
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:26 [clientInboundChannel-41] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 3 with session xhgy3foa
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=24885d4c-9586-4b21-908d-7473305abc7e, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d16b939f-6475-44f3-ba69-fa434dd17132, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"24885d4c-9586-4b21-908d...(truncated)
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d16b939f-6475-44f3-ba69...(truncated)
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:26 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 24885d4c-9586-4b21-908d-7473305abc7e marked as read by user 1
2025-06-06 09:02:26 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message d16b939f-6475-44f3-ba69-fa434dd17132 marked as read by user 1
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:27 [clientInboundChannel-56] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/leave session=xhgy3foa, lookupDestination='/chat/conversation/3/leave'
2025-06-06 09:02:27 [clientInboundChannel-52] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-30 session=xhgy3foa
2025-06-06 09:02:27 [clientInboundChannel-56] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:27 [clientInboundChannel-51] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-31 session=xhgy3foa
2025-06-06 09:02:27 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=xhgy3foa, lookupDestination='/chat/conversation/2/enter'
2025-06-06 09:02:27 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:27 [clientInboundChannel-56] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:3 with session xhgy3foa
2025-06-06 09:02:27 [clientInboundChannel-47] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:2 with session xhgy3foa
2025-06-06 09:02:27 [clientInboundChannel-56] DEBUG c.r.c.controller.ChatController - User 1 left conversation 3 with session xhgy3foa
2025-06-06 09:02:27 [clientInboundChannel-47] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 2 with session xhgy3foa
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:27 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:27 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:27 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:27 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=67106a51-ea87-4732-80b7-21af05d669dd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"67106a51-ea87-4732-80b7...(truncated)
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:28 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd marked as read by user 1
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:28 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=9d536ca6-8719-4aad-a9a5-386f20faa656, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=18ecee51-f6b0-481a-b245-cd3ea296c23c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"9d536ca6-8719-4aad-a9a5...(truncated)
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:28 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 marked as read by user 1
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:28 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"498ae16e-bd54-4a5e-b5e9...(truncated)
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:28 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd marked as read by user 1
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"18ecee51-f6b0-481a-b245...(truncated)
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:28 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c marked as read by user 1
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:28 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:28 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d1a2ccb7-a8ed-42d9-aa80...(truncated)
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:28 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 marked as read by user 1
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:28 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:29 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=xhgy3foa, lookupDestination='/chat/conversation/2/leave'
2025-06-06 09:02:29 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/3 id=sub-32 session=xhgy3foa
2025-06-06 09:02:29 [clientInboundChannel-53] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/enter session=xhgy3foa, lookupDestination='/chat/conversation/3/enter'
2025-06-06 09:02:29 [clientInboundChannel-54] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-33 session=xhgy3foa
2025-06-06 09:02:29 [clientInboundChannel-53] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:29 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:29 [clientInboundChannel-53] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:3 with session xhgy3foa
2025-06-06 09:02:29 [clientInboundChannel-53] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 3 with session xhgy3foa
2025-06-06 09:02:29 [clientInboundChannel-44] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:2 with session xhgy3foa
2025-06-06 09:02:29 [clientInboundChannel-44] DEBUG c.r.c.controller.ChatController - User 1 left conversation 2 with session xhgy3foa
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:29 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=24885d4c-9586-4b21-908d-7473305abc7e, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d16b939f-6475-44f3-ba69-fa434dd17132, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d16b939f-6475-44f3-ba69...(truncated)
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"24885d4c-9586-4b21-908d...(truncated)
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:29 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message d16b939f-6475-44f3-ba69-fa434dd17132 marked as read by user 1
2025-06-06 09:02:29 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 24885d4c-9586-4b21-908d-7473305abc7e marked as read by user 1
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:29 [clientInboundChannel-50] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/leave session=xhgy3foa, lookupDestination='/chat/conversation/3/leave'
2025-06-06 09:02:29 [clientInboundChannel-50] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:29 [clientInboundChannel-46] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/1 id=sub-34 session=xhgy3foa
2025-06-06 09:02:29 [clientInboundChannel-50] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:3 with session xhgy3foa
2025-06-06 09:02:29 [clientInboundChannel-46] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-35 session=xhgy3foa
2025-06-06 09:02:29 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/1/enter session=xhgy3foa, lookupDestination='/chat/conversation/1/enter'
2025-06-06 09:02:29 [clientInboundChannel-50] DEBUG c.r.c.controller.ChatController - User 1 left conversation 3 with session xhgy3foa
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/1/messages?page=0&size=50
2025-06-06 09:02:29 [clientInboundChannel-46] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:29 [clientInboundChannel-46] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:1 with session xhgy3foa
2025-06-06 09:02:29 [clientInboundChannel-46] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 1 with session xhgy3foa
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/1/messages?page=0&size=50
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=aab4ef78-75f6-4e18-b10d-17dc24e05ec7, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=81a5d67d-0f6f-408a-86c3-9cc53a82131e, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=52fcf0d2-c5fd-453d-a272-c02953ad35ff, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45bd83c1-3f84-11f0-abdc-0433c2abf6d4, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"81a5d67d-0f6f-408a-86c3...(truncated)
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:30 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 81a5d67d-0f6f-408a-86c3-9cc53a82131e marked as read by user 1
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"52fcf0d2-c5fd-453d-a272...(truncated)
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:30 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 52fcf0d2-c5fd-453d-a272-c02953ad35ff marked as read by user 1
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"aab4ef78-75f6-4e18-b10d...(truncated)
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:30 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message aab4ef78-75f6-4e18-b10d-17dc24e05ec7 marked as read by user 1
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45bd83c1-3f84-11f0-abdc...(truncated)
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:30 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45bd83c1-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 1
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:31 [clientInboundChannel-51] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/1/leave session=xhgy3foa, lookupDestination='/chat/conversation/1/leave'
2025-06-06 09:02:31 [clientInboundChannel-44] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/3 id=sub-36 session=xhgy3foa
2025-06-06 09:02:31 [clientInboundChannel-51] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:31 [clientInboundChannel-44] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-37 session=xhgy3foa
2025-06-06 09:02:31 [clientInboundChannel-56] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/enter session=xhgy3foa, lookupDestination='/chat/conversation/3/enter'
2025-06-06 09:02:31 [clientInboundChannel-56] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:31 [clientInboundChannel-51] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:1 with session xhgy3foa
2025-06-06 09:02:31 [clientInboundChannel-51] DEBUG c.r.c.controller.ChatController - User 1 left conversation 1 with session xhgy3foa
2025-06-06 09:02:31 [clientInboundChannel-56] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:3 with session xhgy3foa
2025-06-06 09:02:31 [clientInboundChannel-56] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 3 with session xhgy3foa
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:31 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=24885d4c-9586-4b21-908d-7473305abc7e, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d16b939f-6475-44f3-ba69-fa434dd17132, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"24885d4c-9586-4b21-908d...(truncated)
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d16b939f-6475-44f3-ba69...(truncated)
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:31 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 24885d4c-9586-4b21-908d-7473305abc7e marked as read by user 1
2025-06-06 09:02:31 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message d16b939f-6475-44f3-ba69-fa434dd17132 marked as read by user 1
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:31 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/leave session=xhgy3foa, lookupDestination='/chat/conversation/3/leave'
2025-06-06 09:02:31 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:31 [clientInboundChannel-55] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-38 session=xhgy3foa
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:02:31 [clientInboundChannel-57] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:3 with session xhgy3foa
2025-06-06 09:02:31 [clientInboundChannel-47] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-39 session=xhgy3foa
2025-06-06 09:02:31 [clientInboundChannel-57] DEBUG c.r.c.controller.ChatController - User 1 left conversation 3 with session xhgy3foa
2025-06-06 09:02:31 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=xhgy3foa, lookupDestination='/chat/conversation/2/enter'
2025-06-06 09:02:31 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:31 [clientInboundChannel-42] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:2 with session xhgy3foa
2025-06-06 09:02:31 [clientInboundChannel-42] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 2 with session xhgy3foa
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=67106a51-ea87-4732-80b7-21af05d669dd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=18ecee51-f6b0-481a-b245-cd3ea296c23c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=9d536ca6-8719-4aad-a9a5-386f20faa656, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d1a2ccb7-a8ed-42d9-aa80...(truncated)
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:31 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 marked as read by user 1
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"67106a51-ea87-4732-80b7...(truncated)
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"498ae16e-bd54-4a5e-b5e9...(truncated)
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:31 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd marked as read by user 1
2025-06-06 09:02:31 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd marked as read by user 1
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"18ecee51-f6b0-481a-b245...(truncated)
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:31 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c marked as read by user 1
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:31 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"9d536ca6-8719-4aad-a9a5...(truncated)
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:31 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 marked as read by user 1
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:32 [clientInboundChannel-49] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=xhgy3foa, lookupDestination='/chat/conversation/2/leave'
2025-06-06 09:02:32 [clientInboundChannel-56] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/3 id=sub-40 session=xhgy3foa
2025-06-06 09:02:32 [clientInboundChannel-49] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:32 [clientInboundChannel-53] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-41 session=xhgy3foa
2025-06-06 09:02:32 [clientInboundChannel-49] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:2 with session xhgy3foa
2025-06-06 09:02:32 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/enter session=xhgy3foa, lookupDestination='/chat/conversation/3/enter'
2025-06-06 09:02:32 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:32 [clientInboundChannel-49] DEBUG c.r.c.controller.ChatController - User 1 left conversation 2 with session xhgy3foa
2025-06-06 09:02:32 [clientInboundChannel-44] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:3 with session xhgy3foa
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:32 [clientInboundChannel-44] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 3 with session xhgy3foa
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d16b939f-6475-44f3-ba69-fa434dd17132, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=24885d4c-9586-4b21-908d-7473305abc7e, roomId=null, conversationId=3 (truncated)...]
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"d16b939f-6475-44f3-ba69...(truncated)
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:32 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message d16b939f-6475-44f3-ba69-fa434dd17132 marked as read by user 1
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/3 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"24885d4c-9586-4b21-908d...(truncated)
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:32 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 24885d4c-9586-4b21-908d-7473305abc7e marked as read by user 1
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:32 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/leave session=xhgy3foa, lookupDestination='/chat/conversation/3/leave'
2025-06-06 09:02:32 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/1 id=sub-42 session=xhgy3foa
2025-06-06 09:02:32 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:02:32 [clientInboundChannel-52] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-43 session=xhgy3foa
2025-06-06 09:02:32 [clientInboundChannel-57] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:3 with session xhgy3foa
2025-06-06 09:02:32 [clientInboundChannel-45] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/1/enter session=xhgy3foa, lookupDestination='/chat/conversation/1/enter'
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/1/messages?page=0&size=50
2025-06-06 09:02:32 [clientInboundChannel-57] DEBUG c.r.c.controller.ChatController - User 1 left conversation 3 with session xhgy3foa
2025-06-06 09:02:32 [clientInboundChannel-45] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:02:32 [clientInboundChannel-45] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:1 with session xhgy3foa
2025-06-06 09:02:32 [clientInboundChannel-45] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 1 with session xhgy3foa
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/1/messages?page=0&size=50
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:02:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=81a5d67d-0f6f-408a-86c3-9cc53a82131e, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=52fcf0d2-c5fd-453d-a272-c02953ad35ff, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=aab4ef78-75f6-4e18-b10d-17dc24e05ec7, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45bd83c1-3f84-11f0-abdc-0433c2abf6d4, roomId=null, conversationId=1 (truncated)...]
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"52fcf0d2-c5fd-453d-a272...(truncated)
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:33 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 52fcf0d2-c5fd-453d-a272-c02953ad35ff marked as read by user 1
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"81a5d67d-0f6f-408a-86c3...(truncated)
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:33 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 81a5d67d-0f6f-408a-86c3-9cc53a82131e marked as read by user 1
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"aab4ef78-75f6-4e18-b10d...(truncated)
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:33 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message aab4ef78-75f6-4e18-b10d-17dc24e05ec7 marked as read by user 1
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45bd83c1-3f84-11f0-abdc...(truncated)
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:02:33 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45bd83c1-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 1
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:02:33 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:15:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/refresh
2025-06-06 09:15:53 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:15:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/refresh
2025-06-06 09:15:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/refresh", parameters={}
2025-06-06 09:15:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#refreshToken(String)
2025-06-06 09:15:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to ["eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzQ5MTc0OTY3LCJleHAiOjE3NDk (truncated)..."]
2025-06-06 09:15:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:15:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE (truncated)...]
2025-06-06 09:15:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:15:53 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749176153854
2025-06-06 09:15:53 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:15:53 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749176153854
2025-06-06 09:15:53 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749176153854", parameters={masked}
2025-06-06 09:15:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 09:15:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749176153854
2025-06-06 09:15:53 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:15:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/755/k1bq4u0c/websocket
2025-06-06 09:15:53 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:15:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/755/k1bq4u0c/websocket
2025-06-06 09:15:53 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/755/k1bq4u0c/websocket", parameters={}
2025-06-06 09:15:53 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 09:15:53 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/755/k1bq4u0c/websocket
2025-06-06 09:15:53 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:15:53 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=k1bq4u0c]
2025-06-06 09:15:53 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:15:53 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:15:53 [http-nio-8080-exec-1] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: k1bq4u0c
2025-06-06 09:15:53 [clientInboundChannel-165] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=k1bq4u0c
2025-06-06 09:15:53 [websocket-async-2] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session k1bq4u0c, scheduling retry...
2025-06-06 09:15:53 [clientInboundChannel-168] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=k1bq4u0c
2025-06-06 09:15:53 [clientInboundChannel-155] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=k1bq4u0c
2025-06-06 09:15:55 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session k1bq4u0c
2025-06-06 09:16:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/refresh
2025-06-06 09:16:51 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:16:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/refresh
2025-06-06 09:16:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/refresh", parameters={}
2025-06-06 09:16:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#refreshToken(String)
2025-06-06 09:16:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to ["eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJxdWFuZGVwemFpIiwidHlwZSI6InJlZnJlc2giLCJpYXQiOjE3NDkxNzQ5OTYsImV4cCI (truncated)..."]
2025-06-06 09:16:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:16:51 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJxdWFuZGVwemFpIiwidHlwZSI6ImFjY2VzcyIsIml (truncated)...]
2025-06-06 09:16:51 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:16:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749176211860
2025-06-06 09:16:51 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:16:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749176211860
2025-06-06 09:16:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749176211860", parameters={masked}
2025-06-06 09:16:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 09:16:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749176211860
2025-06-06 09:16:51 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:16:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/645/4ihzjq1j/websocket
2025-06-06 09:16:51 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:16:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/645/4ihzjq1j/websocket
2025-06-06 09:16:51 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/645/4ihzjq1j/websocket", parameters={}
2025-06-06 09:16:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@50a1495c
2025-06-06 09:16:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/645/4ihzjq1j/websocket
2025-06-06 09:16:51 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:16:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4ihzjq1j]
2025-06-06 09:16:51 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:16:51 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:16:51 [http-nio-8080-exec-7] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: 4ihzjq1j
2025-06-06 09:16:51 [clientInboundChannel-163] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=4ihzjq1j
2025-06-06 09:16:51 [websocket-async-3] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session 4ihzjq1j, scheduling retry...
2025-06-06 09:16:51 [clientInboundChannel-165] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=4ihzjq1j
2025-06-06 09:16:51 [clientInboundChannel-165] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=4ihzjq1j
2025-06-06 09:16:53 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session 4ihzjq1j
2025-06-06 09:26:14 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[5 current WS(5)-HttpStream(0)-HttpPoll(0), 26 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(26)-CONNECTED(6)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 819], outboundChannel[pool size = 15, active threads = 0, queued tasks = 0, completed tasks = 450], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 1, completed tasks = 368]
2025-06-06 09:29:00 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-06 09:29:03 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session k1bq4u0c with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=k1bq4u0c]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=k1bq4u0c] closed with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session k1bq4u0c
2025-06-06 09:29:03 [websocket-async-4] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session k1bq4u0c
2025-06-06 09:29:03 [websocket-async-4] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session k1bq4u0c marked as offline
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session rakelcbp with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"k1bq4u0c"}
2025-06-06 09:29:03 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 4 sessions.
2025-06-06 09:29:03 [clientInboundChannel-282] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=k1bq4u0c
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=rakelcbp]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rakelcbp] closed with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rakelcbp
2025-06-06 09:29:03 [websocket-async-5] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session rakelcbp
2025-06-06 09:29:03 [websocket-async-5] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session rakelcbp marked as offline
2025-06-06 09:29:03 [websocket-async-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"rakelcbp"}
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session z13igs2p with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [websocket-async-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 3 sessions.
2025-06-06 09:29:03 [clientInboundChannel-285] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=rakelcbp
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=z13igs2p]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=z13igs2p] closed with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session z13igs2p
2025-06-06 09:29:03 [websocket-async-6] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session z13igs2p
2025-06-06 09:29:03 [websocket-async-6] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session z13igs2p marked as offline
2025-06-06 09:29:03 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"z13igs2p"}
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 4ihzjq1j with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=4ihzjq1j]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4ihzjq1j] closed with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4ihzjq1j
2025-06-06 09:29:03 [websocket-async-7] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session 4ihzjq1j
2025-06-06 09:29:03 [websocket-async-7] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session 4ihzjq1j marked as offline
2025-06-06 09:29:03 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"4ihzjq1j"}
2025-06-06 09:29:03 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session xhgy3foa with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=xhgy3foa]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xhgy3foa] closed with CloseStatus[code=1001, reason=null]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xhgy3foa
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-06-06 09:29:03 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4e37f121]]
2025-06-06 09:29:03 [websocket-async-8] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session xhgy3foa
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4e37f121]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4e37f121]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 09:29:03 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 09:29:03 [websocket-async-8] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session xhgy3foa marked as offline
2025-06-06 09:29:03 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 09:29:03 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown initiated...
2025-06-06 09:29:03 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown completed.
2025-06-06 09:37:00 [main] INFO  c.r.chatapp.ChatappApplication - Starting ChatappApplication using Java 17.0.11 with PID 10036 (D:\job\chatapp\build\classes\java\main started by dskva in D:\job\chatapp)
2025-06-06 09:37:00 [main] DEBUG c.r.chatapp.ChatappApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-06 09:37:00 [main] INFO  c.r.chatapp.ChatappApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 218 ms. Found 11 JPA repository interfaces.
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.ConversationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.FileAttachmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageDeliveryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageReactionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomMemberRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserContactRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:37:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
2025-06-06 09:37:03 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-06 09:37:03 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 09:37:03 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-06 09:37:03 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 09:37:03 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3119 ms
2025-06-06 09:37:03 [main] INFO  c.r.chatapp.security.JwtTokenUtil - JWT configuration initialized - Expiration: 3600s, Refresh: 86400s
2025-06-06 09:37:03 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-06 09:37:04 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-06 09:37:04 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-06 09:37:04 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-06 09:37:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Starting...
2025-06-06 09:37:04 [main] INFO  com.zaxxer.hikari.pool.HikariPool - ChatAppHikariCP - Added connection com.mysql.cj.jdbc.ConnectionImpl@cc7909f
2025-06-06 09:37:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Start completed.
2025-06-06 09:37:04 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.7.17 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-06-06 09:37:04 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-06 09:37:04 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (ChatAppHikariCP)']
	Database driver: undefined/unknown
	Database version: 5.7.17
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-06 09:37:06 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-06 09:37:07 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 09:37:07 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-06 09:37:09 [main] INFO  c.r.c.config.RateLimitingConfig - Rate limiting is disabled
2025-06-06 09:37:09 [main] DEBUG c.r.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-06 09:37:09 [main] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-06 09:37:09 [main] DEBUG c.r.c.security.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-06-06 09:37:09 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-06 09:37:09 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-06 09:37:11 [main] INFO  c.r.c.s.impl.UserSessionServiceImpl - UserSessionService initialized - Redis available: false
2025-06-06 09:37:11 [main] WARN  c.r.chatapp.config.EncryptionConfig - No encryption key provided. Generated new key: Z0efRUQiLm4NvefBfEx7aVwG2+KfImAPRb/e+mJoAMc=
2025-06-06 09:37:11 [main] WARN  c.r.chatapp.config.EncryptionConfig - Please save this key and add it to your configuration!
2025-06-06 09:37:12 [main] INFO  c.r.chatapp.config.CacheConfig - Redis Cache configuration initialized - Default TTL: 600s, User TTL: 1800s, Message TTL: 3600s
2025-06-06 09:37:12 [main] INFO  c.revotech.chatapp.config.CorsConfig - CORS configured - Origins: [http://localhost:3000, http://localhost:3001, http://127.0.0.1:3000], Methods: [GET, POST, PUT, DELETE, OPTIONS], Allow credentials: true
2025-06-06 09:37:12 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-06-06 09:37:12 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-06-06 09:37:12 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 70 mappings in 'requestMappingHandlerMapping'
2025-06-06 09:37:12 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-06-06 09:37:13 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-06 09:37:13 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.AuthController:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ChatController:
	{[MESSAGE],[/chat/typing/conversation/{conversationId}]}: notifyTypingInConversation(Long,TypingNotification,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}]}: sendMessageToConversation(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/leave]}: leaveRoom(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}]}: sendMessageToRoom(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/leave]}: leaveConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/enter]}: enterRoom(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/enter]}: enterConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/typing/room/{roomId}]}: notifyTypingInRoom(Long,TypingNotification,SimpMessageHeaderAccessor)
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ConversationController:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.FileController:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.MessageController:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.NotificationController:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.RoomController:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.UserController:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-06-06 09:37:13 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-06-06 09:37:14 [main] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 09:37:14 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 09:37:14 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-06-06 09:37:14 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@22f67246]
2025-06-06 09:37:14 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@22f67246]
2025-06-06 09:37:14 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@22f67246]]
2025-06-06 09:37:14 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-06-06 09:37:14 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 09:37:14 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 09:37:14 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-06 09:37:14 [main] INFO  c.r.chatapp.ChatappApplication - Started ChatappApplication in 14.642 seconds (process running for 15.786)
2025-06-06 09:37:15 [RMI TCP Connection(3)-192.168.1.63] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 09:37:15 [RMI TCP Connection(3)-192.168.1.63] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 09:37:15 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-06-06 09:37:15 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-06-06 09:37:15 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-06-06 09:37:15 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6bd0cd96
2025-06-06 09:37:15 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6e7a4e3a
2025-06-06 09:37:15 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-06-06 09:37:15 [RMI TCP Connection(3)-192.168.1.63] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-06-06 09:37:16 [boundedElastic-1] WARN  o.s.b.a.d.r.RedisReactiveHealthIndicator - Redis health check failed
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1858)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1789)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1586)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1566)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1527)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1563)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedReactiveConnection(LettuceConnectionFactory.java:1274)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:1149)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:120)
	at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67)
	at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:63)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:41)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:354)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:220)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1787)
	... 16 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:336)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:339)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:784)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:38:14 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-06-06 09:41:41 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-06 09:41:41 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-06 09:41:41 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 09:41:41 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 09:41:41 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-06-06 09:41:41 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@22f67246]]
2025-06-06 09:41:41 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@22f67246]
2025-06-06 09:41:41 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@22f67246]
2025-06-06 09:41:41 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-06-06 09:41:41 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 09:41:41 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 09:41:41 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 09:41:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown initiated...
2025-06-06 09:41:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown completed.
2025-06-06 09:41:47 [main] INFO  c.r.chatapp.ChatappApplication - Starting ChatappApplication using Java 17.0.11 with PID 7508 (D:\job\chatapp\build\classes\java\main started by dskva in D:\job\chatapp)
2025-06-06 09:41:47 [main] DEBUG c.r.chatapp.ChatappApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-06 09:41:47 [main] INFO  c.r.chatapp.ChatappApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 206 ms. Found 11 JPA repository interfaces.
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.ConversationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.FileAttachmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageDeliveryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageReactionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomMemberRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserContactRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 09:41:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
2025-06-06 09:41:49 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-06 09:41:49 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 09:41:49 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-06 09:41:49 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 09:41:49 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2633 ms
2025-06-06 09:41:49 [main] INFO  c.r.chatapp.security.JwtTokenUtil - JWT configuration initialized - Expiration: 3600s, Refresh: 86400s
2025-06-06 09:41:50 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-06 09:41:50 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-06 09:41:50 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-06 09:41:50 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-06 09:41:50 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Starting...
2025-06-06 09:41:50 [main] INFO  com.zaxxer.hikari.pool.HikariPool - ChatAppHikariCP - Added connection com.mysql.cj.jdbc.ConnectionImpl@6773bab2
2025-06-06 09:41:50 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Start completed.
2025-06-06 09:41:50 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.7.17 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-06-06 09:41:50 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-06 09:41:50 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (ChatAppHikariCP)']
	Database driver: undefined/unknown
	Database version: 5.7.17
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-06 09:41:52 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-06 09:41:52 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 09:41:52 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-06 09:41:54 [main] INFO  c.r.c.config.RateLimitingConfig - Rate limiting is disabled
2025-06-06 09:41:54 [main] DEBUG c.r.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-06 09:41:54 [main] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-06 09:41:54 [main] DEBUG c.r.c.security.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-06-06 09:41:54 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-06 09:41:54 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-06 09:41:56 [main] INFO  c.r.c.s.impl.UserSessionServiceImpl - UserSessionService initialized - Redis available: false
2025-06-06 09:41:56 [main] WARN  c.r.chatapp.config.EncryptionConfig - No encryption key provided. Generated new key: VP4eKxADfhIL/Wl+IwGmCpPChAjO358u/cOU1FBGhgE=
2025-06-06 09:41:56 [main] WARN  c.r.chatapp.config.EncryptionConfig - Please save this key and add it to your configuration!
2025-06-06 09:41:56 [main] INFO  c.r.chatapp.config.CacheConfig - Redis Cache configuration initialized - Default TTL: 600s, User TTL: 1800s, Message TTL: 3600s
2025-06-06 09:41:56 [main] INFO  c.revotech.chatapp.config.CorsConfig - CORS configured - Origins: [http://localhost:3000, http://localhost:3001, http://127.0.0.1:3000], Methods: [GET, POST, PUT, DELETE, OPTIONS], Allow credentials: true
2025-06-06 09:41:56 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-06-06 09:41:56 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-06-06 09:41:56 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 70 mappings in 'requestMappingHandlerMapping'
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-06-06 09:41:57 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-06 09:41:57 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.AuthController:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ChatController:
	{[MESSAGE],[/chat/typing/conversation/{conversationId}]}: notifyTypingInConversation(Long,TypingNotification,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}]}: sendMessageToConversation(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/enter]}: enterConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/enter]}: enterRoom(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}]}: sendMessageToRoom(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/leave]}: leaveConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/leave]}: leaveRoom(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/typing/room/{roomId}]}: notifyTypingInRoom(Long,TypingNotification,SimpMessageHeaderAccessor)
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ConversationController:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.FileController:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.MessageController:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.NotificationController:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.RoomController:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.UserController:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-06-06 09:41:57 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-06-06 09:41:58 [main] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 09:41:58 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 09:41:58 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-06-06 09:41:58 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@73ce59fd]
2025-06-06 09:41:58 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@73ce59fd]
2025-06-06 09:41:58 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@73ce59fd]]
2025-06-06 09:41:58 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-06-06 09:41:58 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 09:41:58 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 09:41:58 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-06 09:41:58 [main] INFO  c.r.chatapp.ChatappApplication - Started ChatappApplication in 12.008 seconds (process running for 12.868)
2025-06-06 09:41:58 [RMI TCP Connection(2)-192.168.1.63] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 09:41:58 [RMI TCP Connection(2)-192.168.1.63] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 09:41:58 [RMI TCP Connection(2)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-06-06 09:41:58 [RMI TCP Connection(2)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-06-06 09:41:58 [RMI TCP Connection(2)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-06-06 09:41:58 [RMI TCP Connection(2)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@8cb69b2
2025-06-06 09:41:58 [RMI TCP Connection(2)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@45eb7acd
2025-06-06 09:41:58 [RMI TCP Connection(2)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-06-06 09:41:58 [RMI TCP Connection(2)-192.168.1.63] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-06-06 09:42:00 [boundedElastic-1] WARN  o.s.b.a.d.r.RedisReactiveHealthIndicator - Redis health check failed
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1858)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1789)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1586)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1566)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1527)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1563)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedReactiveConnection(LettuceConnectionFactory.java:1274)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:1149)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:120)
	at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67)
	at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:63)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:41)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:354)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:220)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1787)
	... 16 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:336)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:339)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:784)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 09:42:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:14 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 09:42:14 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:14 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 09:42:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 09:42:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:42:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 09:42:14 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 09:42:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 09:42:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:42:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:14 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 09:42:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/signin
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/signin
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/signin", parameters={}
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#signIn(LoginRequest)
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=123456)]
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-06 09:42:21 [http-nio-8080-exec-5] INFO  c.r.c.service.impl.AuthServiceImpl - User logged in: admin
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE (truncated)...]
2025-06-06 09:42:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:42:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749177741474
2025-06-06 09:42:21 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749177741474
2025-06-06 09:42:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749177741474", parameters={masked}
2025-06-06 09:42:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:42:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749177741474
2025-06-06 09:42:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/108/4i2cpnly/websocket
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/108/4i2cpnly/websocket
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/108/4i2cpnly/websocket", parameters={}
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/108/4i2cpnly/websocket
2025-06-06 09:42:21 [http-nio-8080-exec-8] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:42:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4i2cpnly]
2025-06-06 09:42:21 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:21 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:21 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:42:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:42:21 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:42:21 [http-nio-8080-exec-10] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: 4i2cpnly
2025-06-06 09:42:21 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=4i2cpnly
2025-06-06 09:42:21 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session 4i2cpnly, scheduling retry...
2025-06-06 09:42:21 [clientInboundChannel-5] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=4i2cpnly
2025-06-06 09:42:21 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=4i2cpnly
2025-06-06 09:42:22 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session 4i2cpnly
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/signin
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/signin
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/signin", parameters={}
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#signIn(LoginRequest)
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=quandepzai, password=123456)]
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-06 09:42:32 [http-nio-8080-exec-2] INFO  c.r.c.service.impl.AuthServiceImpl - User logged in: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJxdWFuZGVwemFpIiwidHlwZSI6ImFjY2VzcyIsIml (truncated)...]
2025-06-06 09:42:32 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:42:32 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749177752589
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:32 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:42:32 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749177752589
2025-06-06 09:42:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749177752589", parameters={masked}
2025-06-06 09:42:32 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:42:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749177752589
2025-06-06 09:42:32 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:32 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/155/m4hpvwuw/websocket
2025-06-06 09:42:32 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:32 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/155/m4hpvwuw/websocket
2025-06-06 09:42:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/155/m4hpvwuw/websocket", parameters={}
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:42:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/155/m4hpvwuw/websocket
2025-06-06 09:42:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:32 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:42:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=m4hpvwuw]
2025-06-06 09:42:32 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:32 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:32 [http-nio-8080-exec-7] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: m4hpvwuw
2025-06-06 09:42:32 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:32 [clientInboundChannel-11] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=m4hpvwuw
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:42:32 [websocket-async-2] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session m4hpvwuw, scheduling retry...
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:32 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:32 [clientInboundChannel-14] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=m4hpvwuw
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:32 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:32 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=m4hpvwuw
2025-06-06 09:42:33 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session m4hpvwuw
2025-06-06 09:42:39 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-2 session=m4hpvwuw
2025-06-06 09:42:39 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=m4hpvwuw
2025-06-06 09:42:39 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=m4hpvwuw, lookupDestination='/chat/conversation/2/enter'
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:42:39 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:39 [clientInboundChannel-9] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session m4hpvwuw
2025-06-06 09:42:39 [clientInboundChannel-9] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session m4hpvwuw
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:42:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:39 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.MessageServiceImpl.convertMessageToDTO(MessageServiceImpl.java:705)
	at com.revotech.chatapp.service.impl.MessageServiceImpl.markMessageAsRead(MessageServiceImpl.java:442)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.markMessageAsRead(<generated>)
	at com.revotech.chatapp.controller.MessageController.markMessageAsRead(MessageController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:39 [http-nio-8080-exec-8] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.MessageServiceImpl.convertMessageToDTO(MessageServiceImpl.java:705)
	at com.revotech.chatapp.service.impl.MessageServiceImpl.markMessageAsRead(MessageServiceImpl.java:442)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.markMessageAsRead(<generated>)
	at com.revotech.chatapp.controller.MessageController.markMessageAsRead(MessageController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:39 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:39 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:39 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:39 [http-nio-8080-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.MessageServiceImpl.convertMessageToDTO(MessageServiceImpl.java:705)
	at com.revotech.chatapp.service.impl.MessageServiceImpl.markMessageAsRead(MessageServiceImpl.java:442)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.markMessageAsRead(<generated>)
	at com.revotech.chatapp.controller.MessageController.markMessageAsRead(MessageController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:39 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:39 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.MessageServiceImpl.convertMessageToDTO(MessageServiceImpl.java:705)
	at com.revotech.chatapp.service.impl.MessageServiceImpl.markMessageAsRead(MessageServiceImpl.java:442)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.markMessageAsRead(<generated>)
	at com.revotech.chatapp.controller.MessageController.markMessageAsRead(MessageController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:39 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:39 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:39 [http-nio-8080-exec-9] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.MessageServiceImpl.convertMessageToDTO(MessageServiceImpl.java:705)
	at com.revotech.chatapp.service.impl.MessageServiceImpl.markMessageAsRead(MessageServiceImpl.java:442)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.markMessageAsRead(<generated>)
	at com.revotech.chatapp.controller.MessageController.markMessageAsRead(MessageController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:39 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:39 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.MessageServiceImpl.convertMessageToDTO(MessageServiceImpl.java:705)
	at com.revotech.chatapp.service.impl.MessageServiceImpl.markMessageAsRead(MessageServiceImpl.java:442)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.markMessageAsRead(<generated>)
	at com.revotech.chatapp.controller.MessageController.markMessageAsRead(MessageController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.MessageServiceImpl.convertMessageToDTO(MessageServiceImpl.java:705)
	at com.revotech.chatapp.service.impl.MessageServiceImpl.markMessageAsRead(MessageServiceImpl.java:442)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.markMessageAsRead(<generated>)
	at com.revotech.chatapp.controller.MessageController.markMessageAsRead(MessageController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:39 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:39 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:39 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:39 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:42:39 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.MessageServiceImpl.convertMessageToDTO(MessageServiceImpl.java:705)
	at com.revotech.chatapp.service.impl.MessageServiceImpl.markMessageAsRead(MessageServiceImpl.java:442)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.markMessageAsRead(<generated>)
	at com.revotech.chatapp.controller.MessageController.markMessageAsRead(MessageController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:42:39 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:42:39 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:42:58 [MessageBroker-6] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 33], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 1, completed tasks = 8]
2025-06-06 09:44:56 [clientInboundChannel-25] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=4i2cpnly
2025-06-06 09:44:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4i2cpnly] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:44:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4i2cpnly
2025-06-06 09:44:56 [clientOutboundChannel-14] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send WebSocket message to client in session 4i2cpnly
java.lang.IllegalStateException: Cannot send a message when session is closed
	at org.springframework.util.Assert.state(Assert.java:79)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.sendMessage(AbstractSockJsSession.java:144)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:190)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:163)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:529)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:44:56 [clientInboundChannel-27] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=4i2cpnly
2025-06-06 09:44:56 [websocket-async-3] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session 4i2cpnly
2025-06-06 09:44:56 [websocket-async-3] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session 4i2cpnly marked as offline
2025-06-06 09:44:56 [websocket-async-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"4i2cpnly"}
2025-06-06 09:44:56 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=1, username=admin}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=4i2cpnly}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=4i2cpnly}]
2025-06-06 09:44:56 [websocket-async-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:44:56 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 09:44:56 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:56 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 09:44:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 09:44:57 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 09:44:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 09:44:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:44:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749177897149
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749177897149
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749177897149", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749177897149
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749177897155
2025-06-06 09:44:57 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749177897155
2025-06-06 09:44:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749177897155", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:44:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749177897155
2025-06-06 09:44:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/971/24zp35dc/websocket
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:57 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/971/24zp35dc/websocket
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:44:57 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:44:57 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/971/24zp35dc/websocket", parameters={}
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:44:57 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:44:57 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/971/24zp35dc/websocket
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 09:44:57 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=24zp35dc]
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/962/bonlu1f5/websocket
2025-06-06 09:44:57 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/962/bonlu1f5/websocket
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/962/bonlu1f5/websocket", parameters={}
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:44:57 [http-nio-8080-exec-10] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: 24zp35dc
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/962/bonlu1f5/websocket
2025-06-06 09:44:57 [clientInboundChannel-28] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=24zp35dc
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bonlu1f5]
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:44:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:44:57 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:44:57 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:44:57 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:44:57 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:57 [http-nio-8080-exec-3] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: bonlu1f5
2025-06-06 09:44:57 [clientInboundChannel-33] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=bonlu1f5
2025-06-06 09:44:57 [clientInboundChannel-37] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=bonlu1f5
2025-06-06 09:44:57 [clientInboundChannel-37] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=bonlu1f5
2025-06-06 09:44:57 [websocket-async-4] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session 24zp35dc, scheduling retry...
2025-06-06 09:44:57 [clientInboundChannel-29] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-2 session=bonlu1f5
2025-06-06 09:44:57 [websocket-async-5] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session bonlu1f5, scheduling retry...
2025-06-06 09:44:57 [clientInboundChannel-29] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=bonlu1f5
2025-06-06 09:44:58 [clientInboundChannel-28] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-4 session=bonlu1f5
2025-06-06 09:44:58 [clientInboundChannel-36] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=bonlu1f5
2025-06-06 09:44:58 [clientInboundChannel-39] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=bonlu1f5, lookupDestination='/chat/conversation/2/enter'
2025-06-06 09:44:58 [clientInboundChannel-39] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:44:58 [clientInboundChannel-39] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:2 with session bonlu1f5
2025-06-06 09:44:58 [clientInboundChannel-39] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 2 with session bonlu1f5
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:44:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:58 [ForkJoinPool.commonPool-worker-2] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session bonlu1f5
2025-06-06 09:44:58 [ForkJoinPool.commonPool-worker-3] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session 24zp35dc
2025-06-06 09:44:58 [clientInboundChannel-30] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/3 id=sub-6 session=bonlu1f5
2025-06-06 09:44:58 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=bonlu1f5, lookupDestination='/chat/conversation/2/leave'
2025-06-06 09:44:58 [clientInboundChannel-30] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-7 session=bonlu1f5
2025-06-06 09:44:58 [clientInboundChannel-30] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/enter session=bonlu1f5, lookupDestination='/chat/conversation/3/enter'
2025-06-06 09:44:58 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:44:58 [clientInboundChannel-30] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:44:58 [clientInboundChannel-30] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:3 with session bonlu1f5
2025-06-06 09:44:58 [clientInboundChannel-26] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:2 with session bonlu1f5
2025-06-06 09:44:58 [clientInboundChannel-30] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 3 with session bonlu1f5
2025-06-06 09:44:58 [clientInboundChannel-26] DEBUG c.r.c.controller.ChatController - User 1 left conversation 2 with session bonlu1f5
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/3/messages?page=0&size=50
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:44:58 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:44:59 [clientInboundChannel-36] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/leave session=bonlu1f5, lookupDestination='/chat/conversation/3/leave'
2025-06-06 09:44:59 [clientInboundChannel-39] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/1 id=sub-8 session=bonlu1f5
2025-06-06 09:44:59 [clientInboundChannel-36] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:44:59 [clientInboundChannel-32] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-9 session=bonlu1f5
2025-06-06 09:44:59 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/1/enter session=bonlu1f5, lookupDestination='/chat/conversation/1/enter'
2025-06-06 09:44:59 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:44:59 [clientInboundChannel-36] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:3 with session bonlu1f5
2025-06-06 09:44:59 [clientInboundChannel-36] DEBUG c.r.c.controller.ChatController - User 1 left conversation 3 with session bonlu1f5
2025-06-06 09:44:59 [clientInboundChannel-34] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:1 with session bonlu1f5
2025-06-06 09:44:59 [clientInboundChannel-34] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 1 with session bonlu1f5
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/1/messages?page=0&size=50
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/1/messages?page=0&size=50
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:44:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:45:00 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/1/leave session=bonlu1f5, lookupDestination='/chat/conversation/1/leave'
2025-06-06 09:45:00 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:45:00 [clientInboundChannel-33] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:1 with session bonlu1f5
2025-06-06 09:45:00 [clientInboundChannel-33] DEBUG c.r.c.controller.ChatController - User 1 left conversation 1 with session bonlu1f5
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:45:00 [http-nio-8080-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:45:00 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:45:00 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:45:06 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [4i2cpnly]
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:45:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:45:19 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:45:19 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:45:19 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/signin
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/signin
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/signin", parameters={}
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#signIn(LoginRequest)
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=123456)]
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-06 09:47:55 [http-nio-8080-exec-1] INFO  c.r.c.service.impl.AuthServiceImpl - User logged in: admin
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE (truncated)...]
2025-06-06 09:47:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:47:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:47:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:47:55 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:47:55 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:47:55 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:47:55 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178075641
2025-06-06 09:47:55 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:47:55 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178075641
2025-06-06 09:47:55 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178075641", parameters={masked}
2025-06-06 09:47:55 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:47:55 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178075641
2025-06-06 09:47:55 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:47:55 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/877/4n2cbalh/websocket
2025-06-06 09:47:55 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:47:55 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/877/4n2cbalh/websocket
2025-06-06 09:47:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/877/4n2cbalh/websocket", parameters={}
2025-06-06 09:47:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:47:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/877/4n2cbalh/websocket
2025-06-06 09:47:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:47:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4n2cbalh]
2025-06-06 09:47:55 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:47:55 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:47:55 [http-nio-8080-exec-4] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: 4n2cbalh
2025-06-06 09:47:55 [clientInboundChannel-44] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=4n2cbalh
2025-06-06 09:47:55 [websocket-async-6] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session 4n2cbalh, scheduling retry...
2025-06-06 09:47:55 [clientInboundChannel-47] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=4n2cbalh
2025-06-06 09:47:55 [clientInboundChannel-56] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=4n2cbalh
2025-06-06 09:47:56 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session 4n2cbalh
2025-06-06 09:47:57 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/3 id=sub-2 session=4n2cbalh
2025-06-06 09:47:57 [clientInboundChannel-60] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=4n2cbalh
2025-06-06 09:47:57 [clientInboundChannel-61] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/enter session=4n2cbalh, lookupDestination='/chat/room/3/enter'
2025-06-06 09:47:57 [clientInboundChannel-61] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:47:57 [clientInboundChannel-61] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:3 with session 4n2cbalh
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:47:57 [clientInboundChannel-61] DEBUG c.r.c.controller.ChatController - User 1 entered room 3 with session 4n2cbalh
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: com.revotech.chatapp.exception.AppException: You are not a member of this room
2025-06-06 09:47:57 [http-nio-8080-exec-9] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: com.revotech.chatapp.exception.AppException: You are not a member of this room] with root cause
com.revotech.chatapp.exception.AppException: You are not a member of this room
	at com.revotech.chatapp.service.impl.MessageServiceImpl.getRoomMessages(MessageServiceImpl.java:396)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.getRoomMessages(<generated>)
	at com.revotech.chatapp.controller.RoomController.getRoomMessages(RoomController.java:120)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:47:57 ICT 2025, status=500, error=Internal Server Error, message=You are no (truncated)...]
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:47:57 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:47:58 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/leave session=4n2cbalh, lookupDestination='/chat/room/3/leave'
2025-06-06 09:47:58 [clientInboundChannel-44] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:47:58 [clientInboundChannel-44] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat room:3 with session 4n2cbalh
2025-06-06 09:47:58 [clientInboundChannel-44] DEBUG c.r.c.controller.ChatController - User 1 left room 3 with session 4n2cbalh
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:47:58 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:47:58 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:47:58 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:47:58 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=m4hpvwuw, lookupDestination='/chat/conversation/2/leave'
2025-06-06 09:48:11 [clientInboundChannel-58] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=m4hpvwuw
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=m4hpvwuw] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session m4hpvwuw
2025-06-06 09:48:11 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:48:11 [clientInboundChannel-60] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=m4hpvwuw
2025-06-06 09:48:11 [clientInboundChannel-57] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat conversation:2 with session m4hpvwuw
2025-06-06 09:48:11 [clientInboundChannel-57] DEBUG c.r.c.controller.ChatController - User 3 left conversation 2 with session m4hpvwuw
2025-06-06 09:48:11 [websocket-async-7] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session m4hpvwuw
2025-06-06 09:48:11 [clientOutboundChannel-39] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=m4hpvwuw}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=m4hpvwuw}]
2025-06-06 09:48:11 [clientOutboundChannel-38] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpHeartbeat=[J@68018fb8, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=m4hpvwuw}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=m4hpvwuw}]
2025-06-06 09:48:11 [websocket-async-7] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session m4hpvwuw marked as offline
2025-06-06 09:48:11 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"m4hpvwuw"}
2025-06-06 09:48:11 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:48:11 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 09:48:11 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 09:48:11 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 09:48:11 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:48:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178091877
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178091877
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178091877", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178091877
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178091877
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/390/i0zwtb01/websocket
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/390/i0zwtb01/websocket
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/390/i0zwtb01/websocket", parameters={}
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/390/i0zwtb01/websocket
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178091877
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178091877", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=i0zwtb01]
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178091877
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 09:48:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:48:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:48:11 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 09:48:11 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/656/dbphp2wm/websocket
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:48:11 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/656/dbphp2wm/websocket
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/656/dbphp2wm/websocket", parameters={}
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 09:48:11 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:48:11 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:11 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/656/dbphp2wm/websocket
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-7] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: i0zwtb01
2025-06-06 09:48:11 [clientInboundChannel-49] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=i0zwtb01
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:48:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dbphp2wm]
2025-06-06 09:48:11 [websocket-async-8] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session i0zwtb01, scheduling retry...
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:48:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:11 [http-nio-8080-exec-9] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: dbphp2wm
2025-06-06 09:48:11 [clientInboundChannel-44] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=dbphp2wm
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:48:11 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session dbphp2wm, scheduling retry...
2025-06-06 09:48:11 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-1 session=dbphp2wm
2025-06-06 09:48:11 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-2 session=dbphp2wm
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:48:11 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:48:11 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:48:11 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:48:12 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:48:12 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:48:12 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:13 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session i0zwtb01
2025-06-06 09:48:13 [ForkJoinPool.commonPool-worker-5] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session dbphp2wm
2025-06-06 09:48:15 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=dbphp2wm
2025-06-06 09:48:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dbphp2wm] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:48:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dbphp2wm
2025-06-06 09:48:15 [clientInboundChannel-57] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=dbphp2wm
2025-06-06 09:48:15 [websocket-async-2] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session dbphp2wm
2025-06-06 09:48:15 [websocket-async-2] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session dbphp2wm marked as offline
2025-06-06 09:48:15 [clientOutboundChannel-31] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dbphp2wm}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dbphp2wm}]
2025-06-06 09:48:15 [websocket-async-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"dbphp2wm"}
2025-06-06 09:48:15 [websocket-async-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:48:15 [clientOutboundChannel-46] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpHeartbeat=[J@6f731ae9, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dbphp2wm}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dbphp2wm}]
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=i0zwtb01] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session i0zwtb01
2025-06-06 09:48:15 [websocket-async-3] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session i0zwtb01
2025-06-06 09:48:15 [clientInboundChannel-49] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=i0zwtb01
2025-06-06 09:48:15 [websocket-async-3] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session i0zwtb01 marked as offline
2025-06-06 09:48:15 [clientOutboundChannel-35] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=i0zwtb01}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=i0zwtb01}]
2025-06-06 09:48:15 [websocket-async-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"i0zwtb01"}
2025-06-06 09:48:15 [websocket-async-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:48:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 09:48:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 09:48:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:48:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178095462
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178095462
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178095462", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178095462
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178095463
2025-06-06 09:48:15 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178095463
2025-06-06 09:48:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178095463", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:48:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 09:48:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178095463
2025-06-06 09:48:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/826/n1wg2r2q/websocket
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:48:15 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/826/n1wg2r2q/websocket
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 09:48:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/826/n1wg2r2q/websocket", parameters={}
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/826/n1wg2r2q/websocket
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:48:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=n1wg2r2q]
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:48:15 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:48:15 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:48:15 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/432/4lyw0hje/websocket
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:15 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/432/4lyw0hje/websocket
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/432/4lyw0hje/websocket", parameters={}
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/432/4lyw0hje/websocket
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:48:15 [http-nio-8080-exec-7] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: n1wg2r2q
2025-06-06 09:48:15 [clientInboundChannel-44] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=n1wg2r2q
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4lyw0hje]
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:48:15 [websocket-async-4] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session n1wg2r2q, scheduling retry...
2025-06-06 09:48:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:15 [http-nio-8080-exec-9] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: 4lyw0hje
2025-06-06 09:48:15 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=4lyw0hje
2025-06-06 09:48:15 [websocket-async-5] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session 4lyw0hje, scheduling retry...
2025-06-06 09:48:15 [clientInboundChannel-58] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-1 session=4lyw0hje
2025-06-06 09:48:15 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-2 session=4lyw0hje
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:48:15 [http-nio-8080-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:48:15 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:48:15 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
2025-06-06 09:48:16 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null] with root cause
java.lang.NullPointerException: Cannot invoke "java.lang.Boolean.booleanValue()" because the return value of "com.revotech.chatapp.model.entity.Message.getIsPinned()" is null
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertMessageToDTO(RoomServiceImpl.java:423)
	at java.base/java.util.Optional.map(Optional.java:260)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.convertToDTO(RoomServiceImpl.java:358)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.lambda$getUserRooms$6(RoomServiceImpl.java:143)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at com.revotech.chatapp.service.impl.RoomServiceImpl.getUserRooms(RoomServiceImpl.java:144)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.RoomServiceImpl$$SpringCGLIB$$0.getUserRooms(<generated>)
	at com.revotech.chatapp.controller.RoomController.getUserRooms(RoomController.java:43)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=50
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error?page=0&size=50
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error?page=0&size=50", parameters={masked}
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:48:16 ICT 2025, status=500, error=Internal Server Error, message=Cannot inv (truncated)...]
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:48:16 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:48:16 [ForkJoinPool.commonPool-worker-5] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session n1wg2r2q
2025-06-06 09:48:16 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session 4lyw0hje
2025-06-06 09:48:21 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [dbphp2wm, i0zwtb01, m4hpvwuw]
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:49:05 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:49:05 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:07 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-3 session=4lyw0hje
2025-06-06 09:49:07 [clientInboundChannel-58] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-4 session=4lyw0hje
2025-06-06 09:49:07 [clientInboundChannel-61] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=4lyw0hje, lookupDestination='/chat/room/1/enter'
2025-06-06 09:49:07 [clientInboundChannel-61] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:49:07 [clientInboundChannel-61] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session 4lyw0hje
2025-06-06 09:49:07 [clientInboundChannel-61] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session 4lyw0hje
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:49:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:49:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:07 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=4lyw0hje, lookupDestination='/chat/room/1/leave'
2025-06-06 09:49:07 [clientInboundChannel-64] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/3 id=sub-5 session=4lyw0hje
2025-06-06 09:49:07 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:49:07 [clientInboundChannel-56] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-6 session=4lyw0hje
2025-06-06 09:49:07 [clientInboundChannel-59] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/enter session=4lyw0hje, lookupDestination='/chat/room/3/enter'
2025-06-06 09:49:07 [clientInboundChannel-59] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:49:07 [clientInboundChannel-26] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:1 with session 4lyw0hje
2025-06-06 09:49:07 [clientInboundChannel-59] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:3 with session 4lyw0hje
2025-06-06 09:49:07 [clientInboundChannel-26] DEBUG c.r.c.controller.ChatController - User 3 left room 1 with session 4lyw0hje
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:49:07 [clientInboundChannel-59] DEBUG c.r.c.controller.ChatController - User 3 entered room 3 with session 4lyw0hje
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:49:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=3, conversationId=null (truncated)...]
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=3, conversationId=null (truncated)...]
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=3, conversationId=null (truncated)...]
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=3, conversationId=null (truncated)...]
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=3, conversationId=null (truncated)...]
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=3
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 09:49:08 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 09:49:08 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:08 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:49:08 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:08 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=3
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=3", parameters={masked}
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:49:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:08 [clientInboundChannel-58] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/leave session=4lyw0hje, lookupDestination='/chat/room/3/leave'
2025-06-06 09:49:08 [clientInboundChannel-58] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:49:08 [clientInboundChannel-48] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/2 id=sub-7 session=4lyw0hje
2025-06-06 09:49:08 [clientInboundChannel-48] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-8 session=4lyw0hje
2025-06-06 09:49:08 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/2/enter session=4lyw0hje, lookupDestination='/chat/room/2/enter'
2025-06-06 09:49:08 [clientInboundChannel-58] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:3 with session 4lyw0hje
2025-06-06 09:49:08 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:49:08 [clientInboundChannel-58] DEBUG c.r.c.controller.ChatController - User 3 left room 3 with session 4lyw0hje
2025-06-06 09:49:08 [clientInboundChannel-48] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:2 with session 4lyw0hje
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/2/messages?page=0&size=50
2025-06-06 09:49:08 [clientInboundChannel-48] DEBUG c.r.c.controller.ChatController - User 3 entered room 2 with session 4lyw0hje
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/2/messages?page=0&size=50
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/2/messages?page=0&size=50", parameters={masked}
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:49:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=2
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=2
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=2", parameters={masked}
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:49:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:08 [clientInboundChannel-60] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/2/leave session=4lyw0hje, lookupDestination='/chat/room/2/leave'
2025-06-06 09:49:08 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-9 session=4lyw0hje
2025-06-06 09:49:08 [clientInboundChannel-60] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:49:08 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-10 session=4lyw0hje
2025-06-06 09:49:08 [clientInboundChannel-58] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=4lyw0hje, lookupDestination='/chat/room/1/enter'
2025-06-06 09:49:08 [clientInboundChannel-58] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:49:08 [clientInboundChannel-60] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:2 with session 4lyw0hje
2025-06-06 09:49:08 [clientInboundChannel-58] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session 4lyw0hje
2025-06-06 09:49:08 [clientInboundChannel-60] DEBUG c.r.c.controller.ChatController - User 3 left room 2 with session 4lyw0hje
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:49:08 [clientInboundChannel-58] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session 4lyw0hje
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:49:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:49:09 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:09 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 09:49:09 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:09 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:09 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 09:49:09 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:09 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:09 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:09 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:09 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/6741ae16-2ab4-4652-b3ad-21b236703060/pin?pinned=true
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/6741ae16-2ab4-4652-b3ad-21b236703060/pin?pinned=true
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/6741ae16-2ab4-4652-b3ad-21b236703060/pin?pinned=true", parameters={masked}
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"6741ae16-2ab4-4652-b3ad-21b236703...(truncated)
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:10 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 6741ae16-2ab4-4652-b3ad-21b236703060 pinned by user 3
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:10 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=6741ae16-2ab4-4652-b3ad-21b236703060, content=hì hì, senderId=3, senderName=Vu Anh Q (truncated)...]
2025-06-06 09:49:10 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=6741ae16-2ab4-4652-b3ad-21b236703060, content=hì hì, senderId=3, senderName=Vu Anh Q (truncated)...]
2025-06-06 09:49:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/415b098a-3b45-44ac-990c-caaa3a915e71/pin?pinned=true
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/415b098a-3b45-44ac-990c-caaa3a915e71/pin?pinned=true
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/415b098a-3b45-44ac-990c-caaa3a915e71/pin?pinned=true", parameters={masked}
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: com.revotech.chatapp.exception.AppException: You don't have permission to pin/unpin messages
2025-06-06 09:49:19 [http-nio-8080-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: com.revotech.chatapp.exception.AppException: You don't have permission to pin/unpin messages] with root cause
com.revotech.chatapp.exception.AppException: You don't have permission to pin/unpin messages
	at com.revotech.chatapp.service.impl.MessageServiceImpl.pinMessage(MessageServiceImpl.java:1024)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.revotech.chatapp.service.impl.MessageServiceImpl$$SpringCGLIB$$0.pinMessage(<generated>)
	at com.revotech.chatapp.controller.MessageController.pinMessage(MessageController.java:101)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.revotech.chatapp.security.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:28)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.revotech.chatapp.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error?pinned=true
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error?pinned=true
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error?pinned=true", parameters={masked}
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:49:19 ICT 2025, status=500, error=Internal Server Error, message=You don't  (truncated)...]
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-06-06 09:49:19 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/02ea9e2c-fef3-4ac5-82e4-9e4187905822/pin?pinned=true
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/02ea9e2c-fef3-4ac5-82e4-9e4187905822/pin?pinned=true
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/02ea9e2c-fef3-4ac5-82e4-9e4187905822/pin?pinned=true", parameters={masked}
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"02ea9e2c-fef3-4ac5-82e4-9e4187905...(truncated)
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:26 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 02ea9e2c-fef3-4ac5-82e4-9e4187905822 pinned by user 3
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=02ea9e2c-fef3-4ac5-82e4-9e4187905822, content=:v, senderId=3, senderName=Vu Anh Quan (truncated)...]
2025-06-06 09:49:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=02ea9e2c-fef3-4ac5-82e4-9e4187905822, content=:v, senderId=3, senderName=Vu Anh Quan (truncated)...]
2025-06-06 09:49:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/02ea9e2c-fef3-4ac5-82e4-9e4187905822/pin?pinned=false
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/02ea9e2c-fef3-4ac5-82e4-9e4187905822/pin?pinned=false
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/02ea9e2c-fef3-4ac5-82e4-9e4187905822/pin?pinned=false", parameters={masked}
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"02ea9e2c-fef3-4ac5-82e4-9e41879...(truncated)
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:33 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 02ea9e2c-fef3-4ac5-82e4-9e4187905822 unpinned by user 3
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=6741ae16-2ab4-4652-b3ad-21b236703060, content=hì hì, senderId=3, senderName=Vu Anh Q (truncated)...]
2025-06-06 09:49:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=6741ae16-2ab4-4652-b3ad-21b236703060, content=hì hì, senderId=3, senderName=Vu Anh Q (truncated)...]
2025-06-06 09:49:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:33 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/6741ae16-2ab4-4652-b3ad-21b236703060/pin?pinned=false
2025-06-06 09:49:33 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:33 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/6741ae16-2ab4-4652-b3ad-21b236703060/pin?pinned=false
2025-06-06 09:49:33 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/6741ae16-2ab4-4652-b3ad-21b236703060/pin?pinned=false", parameters={masked}
2025-06-06 09:49:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:49:34 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"6741ae16-2ab4-4652-b3ad-21b2367...(truncated)
2025-06-06 09:49:34 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:34 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 6741ae16-2ab4-4652-b3ad-21b236703060 unpinned by user 3
2025-06-06 09:49:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:34 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:49:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:49:34 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:40 [clientInboundChannel-64] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=4lyw0hje, lookupDestination='/chat/room/1/leave'
2025-06-06 09:49:40 [clientInboundChannel-58] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/3 id=sub-11 session=4lyw0hje
2025-06-06 09:49:40 [clientInboundChannel-64] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:49:40 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-12 session=4lyw0hje
2025-06-06 09:49:40 [clientInboundChannel-62] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/enter session=4lyw0hje, lookupDestination='/chat/room/3/enter'
2025-06-06 09:49:40 [clientInboundChannel-62] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:49:40 [clientInboundChannel-64] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:1 with session 4lyw0hje
2025-06-06 09:49:40 [clientInboundChannel-64] DEBUG c.r.c.controller.ChatController - User 3 left room 1 with session 4lyw0hje
2025-06-06 09:49:40 [clientInboundChannel-62] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:3 with session 4lyw0hje
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:49:40 [clientInboundChannel-62] DEBUG c.r.c.controller.ChatController - User 3 entered room 3 with session 4lyw0hje
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:49:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=3
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=3
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=3", parameters={masked}
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:49:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:40 [clientInboundChannel-59] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/leave session=4lyw0hje, lookupDestination='/chat/room/3/leave'
2025-06-06 09:49:40 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-13 session=4lyw0hje
2025-06-06 09:49:40 [clientInboundChannel-59] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:49:40 [clientInboundChannel-58] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-14 session=4lyw0hje
2025-06-06 09:49:40 [clientInboundChannel-58] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=4lyw0hje, lookupDestination='/chat/room/1/enter'
2025-06-06 09:49:40 [clientInboundChannel-58] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:49:40 [clientInboundChannel-59] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:3 with session 4lyw0hje
2025-06-06 09:49:40 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:49:40 [clientInboundChannel-58] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session 4lyw0hje
2025-06-06 09:49:40 [clientInboundChannel-59] DEBUG c.r.c.controller.ChatController - User 3 left room 3 with session 4lyw0hje
2025-06-06 09:49:40 [clientInboundChannel-58] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session 4lyw0hje
2025-06-06 09:49:41 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:41 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:41 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:41 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:49:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:49:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:49:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:49:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:49:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:42 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:42 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:42 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:42 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:42 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:49:42 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:43 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=4lyw0hje, lookupDestination='/chat/room/1/leave'
2025-06-06 09:49:43 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=4lyw0hje
2025-06-06 09:49:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4lyw0hje] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:49:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4lyw0hje
2025-06-06 09:49:43 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:49:43 [websocket-async-6] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session 4lyw0hje
2025-06-06 09:49:43 [websocket-async-6] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session 4lyw0hje marked as offline
2025-06-06 09:49:43 [clientOutboundChannel-40] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send WebSocket message to client in session 4lyw0hje
java.lang.IllegalStateException: Cannot send a message when session is closed
	at org.springframework.util.Assert.state(Assert.java:79)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.sendMessage(AbstractSockJsSession.java:144)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:190)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:163)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:529)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:49:43 [clientInboundChannel-49] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=4lyw0hje
2025-06-06 09:49:43 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"4lyw0hje"}
2025-06-06 09:49:43 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:43 [clientInboundChannel-57] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:1 with session 4lyw0hje
2025-06-06 09:49:43 [clientInboundChannel-57] DEBUG c.r.c.controller.ChatController - User 3 left room 1 with session 4lyw0hje
2025-06-06 09:49:43 [clientOutboundChannel-43] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4lyw0hje}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4lyw0hje}]
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=n1wg2r2q] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:49:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session n1wg2r2q
2025-06-06 09:49:43 [clientInboundChannel-56] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=n1wg2r2q
2025-06-06 09:49:43 [clientOutboundChannel-45] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n1wg2r2q}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n1wg2r2q}]
2025-06-06 09:49:43 [websocket-async-7] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session n1wg2r2q
2025-06-06 09:49:43 [websocket-async-7] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session n1wg2r2q marked as offline
2025-06-06 09:49:43 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"n1wg2r2q"}
2025-06-06 09:49:43 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 09:49:43 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:49:43 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:49:43 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 09:49:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 09:49:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:49:43 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:49:43 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:49:43 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178183970
2025-06-06 09:49:43 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:43 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178183970
2025-06-06 09:49:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178183970", parameters={masked}
2025-06-06 09:49:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178183973
2025-06-06 09:49:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:49:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178183970
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:49:43 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:43 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:43 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178183973
2025-06-06 09:49:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178183973", parameters={masked}
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:49:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178183973
2025-06-06 09:49:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:49:43 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 09:49:43 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/973/e2tkckud/websocket
2025-06-06 09:49:43 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/973/e2tkckud/websocket
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/973/e2tkckud/websocket", parameters={}
2025-06-06 09:49:43 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/973/e2tkckud/websocket
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:49:43 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:49:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=e2tkckud]
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:49:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:49:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:49:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:49:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:49:44 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:44 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:49:44 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:44 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:44 [http-nio-8080-exec-5] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: e2tkckud
2025-06-06 09:49:44 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/122/2qrndbqw/websocket
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:44 [clientInboundChannel-26] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=e2tkckud
2025-06-06 09:49:44 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:49:44 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/122/2qrndbqw/websocket
2025-06-06 09:49:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/122/2qrndbqw/websocket", parameters={}
2025-06-06 09:49:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:49:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/122/2qrndbqw/websocket
2025-06-06 09:49:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:49:44 [websocket-async-8] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session e2tkckud, scheduling retry...
2025-06-06 09:49:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2qrndbqw]
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:49:44 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:44 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:44 [http-nio-8080-exec-3] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: 2qrndbqw
2025-06-06 09:49:44 [clientInboundChannel-58] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=2qrndbqw
2025-06-06 09:49:44 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session 2qrndbqw, scheduling retry...
2025-06-06 09:49:44 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-2 session=2qrndbqw
2025-06-06 09:49:44 [clientInboundChannel-47] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-1 session=2qrndbqw
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:49:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:45 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-3 session=2qrndbqw
2025-06-06 09:49:45 [clientInboundChannel-48] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-4 session=2qrndbqw
2025-06-06 09:49:45 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=2qrndbqw, lookupDestination='/chat/conversation/2/enter'
2025-06-06 09:49:45 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:49:45 [clientInboundChannel-26] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session 2qrndbqw
2025-06-06 09:49:45 [clientInboundChannel-26] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session 2qrndbqw
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:49:45 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session e2tkckud
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:49:45 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:45 [ForkJoinPool.commonPool-worker-5] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session 2qrndbqw
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:49:45 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3c97df02-713f-4be7-b580...(truncated)
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"724b112c-d308-44b2-bc26...(truncated)
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"4160824a-ced4-4e8f-b626...(truncated)
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:46 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3
2025-06-06 09:49:46 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3
2025-06-06 09:49:46 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"dc50f85e-393e-4b2b-92a0...(truncated)
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b0c76bb8-010f-4ece-aa86...(truncated)
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:46 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3
2025-06-06 09:49:46 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"8d65be0b-3aee-4136-a0df...(truncated)
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:46 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"e4503b50-8a13-4765-b77e...(truncated)
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b09a4099-8bc5-4ae3-9d72...(truncated)
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:46 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3
2025-06-06 09:49:46 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:46 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/b09a4099-8bc5-4ae3-9d72-780873310d76/pin?pinned=true
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/b09a4099-8bc5-4ae3-9d72-780873310d76/pin?pinned=true
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/b09a4099-8bc5-4ae3-9d72-780873310d76/pin?pinned=true", parameters={masked}
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"b09a4099-8bc5-4ae3-9d72-780873310...(truncated)
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:49:46 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 pinned by user 3
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:49:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:49:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:49:51 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [n1wg2r2q, 4lyw0hje]
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=true
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=true
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=true", parameters={masked}
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"18ecee51-f6b0-481a-b245-cd3ea296c...(truncated)
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:07 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c pinned by user 3
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=18ecee51-f6b0-481a-b245-cd3ea296c23c, content=123213, senderId=3, senderName=Vu Anh  (truncated)...]
2025-06-06 09:50:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=false
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=false
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=false", parameters={masked}
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"18ecee51-f6b0-481a-b245-cd3ea29...(truncated)
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:10 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c unpinned by user 3
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:17 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=2qrndbqw, lookupDestination='/chat/conversation/2/leave'
2025-06-06 09:50:17 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:50:17 [clientInboundChannel-26] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat conversation:2 with session 2qrndbqw
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:50:17 [clientInboundChannel-26] DEBUG c.r.c.controller.ChatController - User 3 left conversation 2 with session 2qrndbqw
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:50:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:50:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:50:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [clientInboundChannel-49] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=2qrndbqw
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2qrndbqw] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2qrndbqw
2025-06-06 09:50:21 [clientOutboundChannel-39] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send WebSocket message to client in session 2qrndbqw
java.lang.IllegalStateException: Cannot send a message when session is closed
	at org.springframework.util.Assert.state(Assert.java:79)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.sendMessage(AbstractSockJsSession.java:144)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:190)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:163)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:529)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:50:21 [clientInboundChannel-57] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=2qrndbqw
2025-06-06 09:50:21 [websocket-async-2] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session 2qrndbqw
2025-06-06 09:50:21 [websocket-async-2] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session 2qrndbqw marked as offline
2025-06-06 09:50:21 [clientOutboundChannel-46] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2qrndbqw}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2qrndbqw}]
2025-06-06 09:50:21 [websocket-async-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"2qrndbqw"}
2025-06-06 09:50:21 [websocket-async-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=e2tkckud] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session e2tkckud
2025-06-06 09:50:21 [clientInboundChannel-56] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=e2tkckud
2025-06-06 09:50:21 [clientOutboundChannel-33] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=e2tkckud}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=e2tkckud}]
2025-06-06 09:50:21 [websocket-async-3] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session e2tkckud
2025-06-06 09:50:21 [websocket-async-3] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session e2tkckud marked as offline
2025-06-06 09:50:21 [websocket-async-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"e2tkckud"}
2025-06-06 09:50:21 [websocket-async-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 09:50:21 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 09:50:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 09:50:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178221232
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178221232
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178221232", parameters={masked}
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178221232
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178221233
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178221233
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178221233", parameters={masked}
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178221233
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:50:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:50:21 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/971/djuhoecq/websocket
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 09:50:21 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/971/djuhoecq/websocket
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/971/djuhoecq/websocket", parameters={}
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/971/djuhoecq/websocket
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=djuhoecq]
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:50:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-8] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: djuhoecq
2025-06-06 09:50:21 [clientInboundChannel-48] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=djuhoecq
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:21 [websocket-async-4] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session djuhoecq, scheduling retry...
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/734/ajqs10a1/websocket
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:21 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/734/ajqs10a1/websocket
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/734/ajqs10a1/websocket", parameters={}
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/734/ajqs10a1/websocket
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:50:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ajqs10a1]
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-7] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: ajqs10a1
2025-06-06 09:50:21 [clientInboundChannel-64] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=ajqs10a1
2025-06-06 09:50:21 [websocket-async-5] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session ajqs10a1, scheduling retry...
2025-06-06 09:50:21 [clientInboundChannel-26] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-1 session=ajqs10a1
2025-06-06 09:50:21 [clientInboundChannel-49] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-2 session=ajqs10a1
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:50:21 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:21 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-3 session=ajqs10a1
2025-06-06 09:50:21 [clientInboundChannel-56] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-4 session=ajqs10a1
2025-06-06 09:50:21 [clientInboundChannel-56] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=ajqs10a1, lookupDestination='/chat/conversation/2/enter'
2025-06-06 09:50:21 [clientInboundChannel-56] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:50:21 [clientInboundChannel-56] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session ajqs10a1
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:50:21 [clientInboundChannel-56] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session ajqs10a1
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:50:21 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:22 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:22 [ForkJoinPool.commonPool-worker-5] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session djuhoecq
2025-06-06 09:50:22 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session ajqs10a1
2025-06-06 09:50:22 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:50:22 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:50:22 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:50:22 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:50:22 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:50:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:50:22 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:50:22 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:50:22 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:50:22 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:22 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:50:22 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:50:22 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:50:23 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3c97df02-713f-4be7-b580...(truncated)
2025-06-06 09:50:23 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"4160824a-ced4-4e8f-b626...(truncated)
2025-06-06 09:50:23 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:23 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:23 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3
2025-06-06 09:50:23 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3
2025-06-06 09:50:23 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"724b112c-d308-44b2-bc26...(truncated)
2025-06-06 09:50:23 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:23 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"8d65be0b-3aee-4136-a0df...(truncated)
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:23 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"dc50f85e-393e-4b2b-92a0...(truncated)
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:23 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b0c76bb8-010f-4ece-aa86...(truncated)
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:23 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3
2025-06-06 09:50:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:50:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:50:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"e4503b50-8a13-4765-b77e...(truncated)
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:23 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b09a4099-8bc5-4ae3-9d72...(truncated)
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:23 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:26 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [e2tkckud, 2qrndbqw]
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd/pin?pinned=true
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd/pin?pinned=true
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd/pin?pinned=true", parameters={masked}
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"498ae16e-bd54-4a5e-b5e9-8bd8ba53e...(truncated)
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:27 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd pinned by user 3
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd, content=ok, senderId=3, senderName=Vu Anh Quan (truncated)...]
2025-06-06 09:50:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:28 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd/pin?pinned=false
2025-06-06 09:50:28 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:28 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:28 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:28 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd/pin?pinned=false
2025-06-06 09:50:28 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd/pin?pinned=false", parameters={masked}
2025-06-06 09:50:28 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:29 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"498ae16e-bd54-4a5e-b5e9-8bd8ba5...(truncated)
2025-06-06 09:50:29 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:29 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd unpinned by user 3
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093/pin?pinned=true
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093/pin?pinned=true
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093/pin?pinned=true", parameters={masked}
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"d1a2ccb7-a8ed-42d9-aa80-1a5994b2c...(truncated)
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:31 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 pinned by user 3
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093, content=123123123123213, senderId=3, senderNam (truncated)...]
2025-06-06 09:50:31 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093/pin?pinned=false
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093/pin?pinned=false
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093/pin?pinned=false", parameters={masked}
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"d1a2ccb7-a8ed-42d9-aa80-1a5994b...(truncated)
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:32 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 unpinned by user 3
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:32 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:32 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/9d536ca6-8719-4aad-a9a5-386f20faa656/pin?pinned=true
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/9d536ca6-8719-4aad-a9a5-386f20faa656/pin?pinned=true
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/9d536ca6-8719-4aad-a9a5-386f20faa656/pin?pinned=true", parameters={masked}
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"9d536ca6-8719-4aad-a9a5-386f20faa...(truncated)
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:34 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 pinned by user 3
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:34 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=9d536ca6-8719-4aad-a9a5-386f20faa656, content=123, senderId=3, senderName=Vu Anh Qua (truncated)...]
2025-06-06 09:50:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/9d536ca6-8719-4aad-a9a5-386f20faa656/pin?pinned=false
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/9d536ca6-8719-4aad-a9a5-386f20faa656/pin?pinned=false
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/9d536ca6-8719-4aad-a9a5-386f20faa656/pin?pinned=false", parameters={masked}
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"9d536ca6-8719-4aad-a9a5-386f20f...(truncated)
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:35 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 unpinned by user 3
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/67106a51-ea87-4732-80b7-21af05d669dd/pin?pinned=true
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/67106a51-ea87-4732-80b7-21af05d669dd/pin?pinned=true
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/67106a51-ea87-4732-80b7-21af05d669dd/pin?pinned=true", parameters={masked}
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"67106a51-ea87-4732-80b7-21af05d66...(truncated)
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:37 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd pinned by user 3
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:37 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=67106a51-ea87-4732-80b7-21af05d669dd, content=123213213, senderId=3, senderName=Vu A (truncated)...]
2025-06-06 09:50:37 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/67106a51-ea87-4732-80b7-21af05d669dd/pin?pinned=false
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/67106a51-ea87-4732-80b7-21af05d669dd/pin?pinned=false
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/67106a51-ea87-4732-80b7-21af05d669dd/pin?pinned=false", parameters={masked}
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"67106a51-ea87-4732-80b7-21af05d...(truncated)
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:38 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd unpinned by user 3
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:38 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:38 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=true
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=true
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=true", parameters={masked}
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"18ecee51-f6b0-481a-b245-cd3ea296c...(truncated)
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:40 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c pinned by user 3
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:40 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:40 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:40 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=18ecee51-f6b0-481a-b245-cd3ea296c23c, content=123213, senderId=3, senderName=Vu Anh  (truncated)...]
2025-06-06 09:50:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=false
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=false
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/18ecee51-f6b0-481a-b245-cd3ea296c23c/pin?pinned=false", parameters={masked}
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"18ecee51-f6b0-481a-b245-cd3ea29...(truncated)
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:43 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c unpinned by user 3
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:43 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/67106a51-ea87-4732-80b7-21af05d669dd/pin?pinned=false
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/67106a51-ea87-4732-80b7-21af05d669dd/pin?pinned=false
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/67106a51-ea87-4732-80b7-21af05d669dd/pin?pinned=false", parameters={masked}
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"67106a51-ea87-4732-80b7-21af05d...(truncated)
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:45 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd unpinned by user 3
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093/pin?pinned=false
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093/pin?pinned=false
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093/pin?pinned=false", parameters={masked}
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"d1a2ccb7-a8ed-42d9-aa80-1a5994b...(truncated)
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:53 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 unpinned by user 3
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:53 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:53 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:53 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:53 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:53 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:53 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:53 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:53 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:54 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd/pin?pinned=false
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd/pin?pinned=false
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd/pin?pinned=false", parameters={masked}
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"498ae16e-bd54-4a5e-b5e9-8bd8ba5...(truncated)
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:56 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd unpinned by user 3
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:50:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:50:56 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [clientInboundChannel-64] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=ajqs10a1, lookupDestination='/chat/conversation/2/leave'
2025-06-06 09:50:59 [clientInboundChannel-47] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=ajqs10a1
2025-06-06 09:50:59 [clientInboundChannel-64] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ajqs10a1] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ajqs10a1
2025-06-06 09:50:59 [clientInboundChannel-57] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=ajqs10a1
2025-06-06 09:50:59 [websocket-async-6] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session ajqs10a1
2025-06-06 09:50:59 [clientOutboundChannel-36] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send WebSocket message to client in session ajqs10a1
java.lang.IllegalStateException: Cannot send a message when session is closed
	at org.springframework.util.Assert.state(Assert.java:79)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.sendMessage(AbstractSockJsSession.java:144)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:190)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:163)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:529)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:50:59 [websocket-async-6] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session ajqs10a1 marked as offline
2025-06-06 09:50:59 [clientInboundChannel-64] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat conversation:2 with session ajqs10a1
2025-06-06 09:50:59 [clientOutboundChannel-38] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ajqs10a1}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ajqs10a1}]
2025-06-06 09:50:59 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"ajqs10a1"}
2025-06-06 09:50:59 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:59 [clientInboundChannel-64] DEBUG c.r.c.controller.ChatController - User 3 left conversation 2 with session ajqs10a1
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=djuhoecq] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session djuhoecq
2025-06-06 09:50:59 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=djuhoecq
2025-06-06 09:50:59 [websocket-async-7] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session djuhoecq
2025-06-06 09:50:59 [websocket-async-7] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session djuhoecq marked as offline
2025-06-06 09:50:59 [clientOutboundChannel-35] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=djuhoecq}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=djuhoecq}]
2025-06-06 09:50:59 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"djuhoecq"}
2025-06-06 09:50:59 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 09:50:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 09:50:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 09:50:59 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 09:50:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178259232
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178259232
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178259232", parameters={masked}
2025-06-06 09:50:59 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178259232
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178259231
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178259231
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178259231", parameters={masked}
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178259231
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/489/n1bpbmcg/websocket
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:50:59 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/489/n1bpbmcg/websocket
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/489/n1bpbmcg/websocket", parameters={}
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 09:50:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/489/n1bpbmcg/websocket
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=n1bpbmcg]
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:50:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:50:59 [http-nio-8080-exec-1] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: n1bpbmcg
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:50:59 [clientInboundChannel-48] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=n1bpbmcg
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:50:59 [websocket-async-8] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session n1bpbmcg, scheduling retry...
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:50:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:50:59 [clientInboundChannel-65] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=n1bpbmcg
2025-06-06 09:50:59 [clientInboundChannel-26] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=n1bpbmcg
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/648/y0ig4nyw/websocket
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/648/y0ig4nyw/websocket
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/648/y0ig4nyw/websocket", parameters={}
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/648/y0ig4nyw/websocket
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:50:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=y0ig4nyw]
2025-06-06 09:50:59 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:50:59 [http-nio-8080-exec-3] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: y0ig4nyw
2025-06-06 09:50:59 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=y0ig4nyw
2025-06-06 09:50:59 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session y0ig4nyw, scheduling retry...
2025-06-06 09:50:59 [clientInboundChannel-61] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-2 session=n1bpbmcg
2025-06-06 09:50:59 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=n1bpbmcg
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:50:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:00 [clientInboundChannel-48] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-4 session=n1bpbmcg
2025-06-06 09:51:00 [clientInboundChannel-48] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=n1bpbmcg
2025-06-06 09:51:00 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=n1bpbmcg, lookupDestination='/chat/conversation/2/enter'
2025-06-06 09:51:00 [clientInboundChannel-47] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:51:00 [clientInboundChannel-47] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session n1bpbmcg
2025-06-06 09:51:00 [clientInboundChannel-47] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session n1bpbmcg
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:51:00 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:00 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session n1bpbmcg
2025-06-06 09:51:00 [ForkJoinPool.commonPool-worker-5] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session y0ig4nyw
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 09:51:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3c97df02-713f-4be7-b580...(truncated)
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"4160824a-ced4-4e8f-b626...(truncated)
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:51:01 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3
2025-06-06 09:51:01 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"dc50f85e-393e-4b2b-92a0...(truncated)
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:51:01 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b0c76bb8-010f-4ece-aa86...(truncated)
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:51:01 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"724b112c-d308-44b2-bc26...(truncated)
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:51:01 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:51:01 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:51:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:51:01 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:51:01 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:01 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"8d65be0b-3aee-4136-a0df...(truncated)
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:51:01 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:51:01 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"e4503b50-8a13-4765-b77e...(truncated)
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:51:01 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b09a4099-8bc5-4ae3-9d72...(truncated)
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:51:01 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:51:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:51:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:51:06 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [djuhoecq, ajqs10a1]
2025-06-06 09:52:37 [clientInboundChannel-75] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=n1bpbmcg, lookupDestination='/chat/conversation/2/leave'
2025-06-06 09:52:37 [clientInboundChannel-75] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 09:52:37 [clientInboundChannel-75] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat conversation:2 with session n1bpbmcg
2025-06-06 09:52:37 [clientInboundChannel-75] DEBUG c.r.c.controller.ChatController - User 3 left conversation 2 with session n1bpbmcg
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:52:37 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:52:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:38 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-6 session=n1bpbmcg
2025-06-06 09:52:38 [clientInboundChannel-42] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-7 session=n1bpbmcg
2025-06-06 09:52:38 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=n1bpbmcg, lookupDestination='/chat/room/1/enter'
2025-06-06 09:52:38 [clientInboundChannel-42] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:52:38 [clientInboundChannel-42] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session n1bpbmcg
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:52:38 [clientInboundChannel-42] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session n1bpbmcg
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:52:38 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:52:38 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:39 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:39 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 09:52:39 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:52:39 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 09:52:39 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:39 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:40 [clientInboundChannel-75] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=n1bpbmcg, lookupDestination='/chat/room/1/leave'
2025-06-06 09:52:40 [clientInboundChannel-75] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:52:40 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/3 id=sub-8 session=n1bpbmcg
2025-06-06 09:52:40 [clientInboundChannel-65] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-9 session=n1bpbmcg
2025-06-06 09:52:40 [clientInboundChannel-75] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:1 with session n1bpbmcg
2025-06-06 09:52:40 [clientInboundChannel-65] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/enter session=n1bpbmcg, lookupDestination='/chat/room/3/enter'
2025-06-06 09:52:40 [clientInboundChannel-65] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:52:40 [clientInboundChannel-75] DEBUG c.r.c.controller.ChatController - User 3 left room 1 with session n1bpbmcg
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:52:40 [clientInboundChannel-65] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:3 with session n1bpbmcg
2025-06-06 09:52:40 [clientInboundChannel-65] DEBUG c.r.c.controller.ChatController - User 3 entered room 3 with session n1bpbmcg
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:52:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=3
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=3
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=3", parameters={masked}
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:52:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:41 [clientInboundChannel-74] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/leave session=n1bpbmcg, lookupDestination='/chat/room/3/leave'
2025-06-06 09:52:41 [clientInboundChannel-77] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-10 session=n1bpbmcg
2025-06-06 09:52:41 [clientInboundChannel-74] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:52:41 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-11 session=n1bpbmcg
2025-06-06 09:52:41 [clientInboundChannel-68] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=n1bpbmcg, lookupDestination='/chat/room/1/enter'
2025-06-06 09:52:41 [clientInboundChannel-68] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:52:41 [clientInboundChannel-74] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:3 with session n1bpbmcg
2025-06-06 09:52:41 [clientInboundChannel-74] DEBUG c.r.c.controller.ChatController - User 3 left room 3 with session n1bpbmcg
2025-06-06 09:52:41 [clientInboundChannel-68] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session n1bpbmcg
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:52:41 [clientInboundChannel-68] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session n1bpbmcg
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:52:41 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:52:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:42 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:42 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:42 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:42 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:42 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:42 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:52:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:45 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/room/1 session=n1bpbmcg, lookupDestination='/chat/typing/room/1'
2025-06-06 09:52:45 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInRoom[3 args]
2025-06-06 09:52:46 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"TYPING","action":"START","data":{"userId":3,"username":"quandepzai","ro...(truncated)
2025-06-06 09:52:46 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:46 [clientInboundChannel-70] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai started in /topic/room/1
2025-06-06 09:52:48 [clientInboundChannel-71] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1 session=n1bpbmcg, lookupDestination='/chat/room/1'
2025-06-06 09:52:48 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/room/1 session=n1bpbmcg, lookupDestination='/chat/typing/room/1'
2025-06-06 09:52:48 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInRoom[3 args]
2025-06-06 09:52:48 [clientInboundChannel-71] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToRoom[3 args]
2025-06-06 09:52:48 [clientInboundChannel-54] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","roo...(truncated)
2025-06-06 09:52:48 [clientInboundChannel-54] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:48 [clientInboundChannel-54] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/room/1
2025-06-06 09:52:48 [clientInboundChannel-71] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"816da2d7-5479-49d4-9005-a3104e36...(truncated)
2025-06-06 09:52:48 [clientInboundChannel-71] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:48 [clientInboundChannel-71] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/room/1
2025-06-06 09:52:48 [clientInboundChannel-71] INFO  c.r.c.controller.ChatController - Message sent to room 1: hix hix
2025-06-06 09:52:49 [clientInboundChannel-69] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/room/1 session=n1bpbmcg, lookupDestination='/chat/typing/room/1'
2025-06-06 09:52:49 [clientInboundChannel-69] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInRoom[3 args]
2025-06-06 09:52:49 [clientInboundChannel-69] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","roo...(truncated)
2025-06-06 09:52:49 [clientInboundChannel-69] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 09:52:49 [clientInboundChannel-69] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/room/1
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:52:57 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:52:59 [clientInboundChannel-71] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-4 session=4n2cbalh
2025-06-06 09:52:59 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=4n2cbalh
2025-06-06 09:52:59 [clientInboundChannel-69] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=4n2cbalh, lookupDestination='/chat/room/1/enter'
2025-06-06 09:52:59 [clientInboundChannel-69] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:52:59 [clientInboundChannel-69] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:1 with session 4n2cbalh
2025-06-06 09:52:59 [clientInboundChannel-69] DEBUG c.r.c.controller.ChatController - User 1 entered room 1 with session 4n2cbalh
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:52:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=6741ae16-2ab4-4652-b3ad-21b236703060, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=816da2d7-5479-49d4-9005-a3104e36b624, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=02ea9e2c-fef3-4ac5-82e4-9e4187905822, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b8c2c34b-86c8-480b-a8d9-23b78c2f4241, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=778a07d4-df41-4c87-a8d9-cd26087c15f2, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:00 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 1
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"6741ae16-2ab4-4652-b3ad...(truncated)
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:00 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 6741ae16-2ab4-4652-b3ad-21b236703060 marked as read by user 1
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"02ea9e2c-fef3-4ac5-82e4...(truncated)
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:00 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 02ea9e2c-fef3-4ac5-82e4-9e4187905822 marked as read by user 1
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b8c2c34b-86c8-480b-a8d9...(truncated)
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:00 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message b8c2c34b-86c8-480b-a8d9-23b78c2f4241 marked as read by user 1
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"778a07d4-df41-4c87-a8d9...(truncated)
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:00 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 778a07d4-df41-4c87-a8d9-cd26087c15f2 marked as read by user 1
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"816da2d7-5479-49d4-9005...(truncated)
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:00 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 816da2d7-5479-49d4-9005-a3104e36b624 marked as read by user 1
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:00 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:00 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:00 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [clientInboundChannel-72] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=4n2cbalh, lookupDestination='/chat/room/1/leave'
2025-06-06 09:53:04 [clientInboundChannel-73] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=4n2cbalh
2025-06-06 09:53:04 [clientInboundChannel-72] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4n2cbalh] closed with CloseStatus[code=1000, reason=null]
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4n2cbalh
2025-06-06 09:53:04 [clientInboundChannel-54] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=4n2cbalh
2025-06-06 09:53:04 [websocket-async-2] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session 4n2cbalh
2025-06-06 09:53:04 [websocket-async-2] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session 4n2cbalh marked as offline
2025-06-06 09:53:04 [clientOutboundChannel-57] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send WebSocket message to client in session 4n2cbalh
java.lang.IllegalStateException: Cannot send a message when session is closed
	at org.springframework.util.Assert.state(Assert.java:79)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.sendMessage(AbstractSockJsSession.java:144)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:190)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:163)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:529)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 09:53:04 [websocket-async-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"4n2cbalh"}
2025-06-06 09:53:04 [clientOutboundChannel-44] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=1, username=admin}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=4n2cbalh}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=4n2cbalh}]
2025-06-06 09:53:04 [websocket-async-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:04 [clientInboundChannel-72] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat room:1 with session 4n2cbalh
2025-06-06 09:53:04 [clientInboundChannel-72] DEBUG c.r.c.controller.ChatController - User 1 left room 1 with session 4n2cbalh
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 09:53:04 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 09:53:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 09:53:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:53:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178384232
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:53:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178384232
2025-06-06 09:53:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178384232", parameters={masked}
2025-06-06 09:53:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178384232
2025-06-06 09:53:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749178384237
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749178384237
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749178384237", parameters={masked}
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749178384237
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/266/45vhhqid/websocket
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/266/45vhhqid/websocket
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/266/45vhhqid/websocket", parameters={}
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/266/45vhhqid/websocket
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:53:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=45vhhqid]
2025-06-06 09:53:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 09:53:04 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 09:53:04 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/488/rni4nwkw/websocket
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/488/rni4nwkw/websocket
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/488/rni4nwkw/websocket", parameters={}
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/488/rni4nwkw/websocket
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 09:53:04 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rni4nwkw]
2025-06-06 09:53:04 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-5] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: 45vhhqid
2025-06-06 09:53:04 [clientInboundChannel-76] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=45vhhqid
2025-06-06 09:53:04 [websocket-async-3] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session 45vhhqid, scheduling retry...
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:04 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:04 [http-nio-8080-exec-6] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: rni4nwkw
2025-06-06 09:53:04 [clientInboundChannel-77] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=rni4nwkw
2025-06-06 09:53:04 [clientInboundChannel-54] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=rni4nwkw
2025-06-06 09:53:04 [websocket-async-4] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session rni4nwkw, scheduling retry...
2025-06-06 09:53:04 [clientInboundChannel-75] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=rni4nwkw
2025-06-06 09:53:04 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-2 session=rni4nwkw
2025-06-06 09:53:04 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=rni4nwkw
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:53:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:05 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session 45vhhqid
2025-06-06 09:53:05 [ForkJoinPool.commonPool-worker-6] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session rni4nwkw
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:53:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:07 [clientInboundChannel-76] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-4 session=rni4nwkw
2025-06-06 09:53:07 [clientInboundChannel-76] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=rni4nwkw
2025-06-06 09:53:07 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=rni4nwkw, lookupDestination='/chat/room/1/enter'
2025-06-06 09:53:07 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:53:07 [clientInboundChannel-54] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat room:1 with session rni4nwkw
2025-06-06 09:53:07 [clientInboundChannel-54] DEBUG c.r.c.controller.ChatController - User 1 entered room 1 with session rni4nwkw
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:53:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b8c2c34b-86c8-480b-a8d9-23b78c2f4241, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=778a07d4-df41-4c87-a8d9-cd26087c15f2, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=6741ae16-2ab4-4652-b3ad-21b236703060, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=816da2d7-5479-49d4-9005-a3104e36b624, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=02ea9e2c-fef3-4ac5-82e4-9e4187905822, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b8c2c34b-86c8-480b-a8d9...(truncated)
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"6741ae16-2ab4-4652-b3ad...(truncated)
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"778a07d4-df41-4c87-a8d9...(truncated)
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:08 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 778a07d4-df41-4c87-a8d9-cd26087c15f2 marked as read by user 1
2025-06-06 09:53:08 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 6741ae16-2ab4-4652-b3ad-21b236703060 marked as read by user 1
2025-06-06 09:53:08 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 1
2025-06-06 09:53:08 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message b8c2c34b-86c8-480b-a8d9-23b78c2f4241 marked as read by user 1
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"02ea9e2c-fef3-4ac5-82e4...(truncated)
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"816da2d7-5479-49d4-9005...(truncated)
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:08 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 816da2d7-5479-49d4-9005-a3104e36b624 marked as read by user 1
2025-06-06 09:53:08 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 02ea9e2c-fef3-4ac5-82e4-9e4187905822 marked as read by user 1
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:11 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [4n2cbalh]
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=true
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=true
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=true", parameters={masked}
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"3fa0d6ec-a261-4558-acf3-fca01236a...(truncated)
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:12 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b pinned by user 1
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=3fa0d6ec-a261-4558-acf3-fca01236a67b, content=ukm, senderId=1, senderName=Administra (truncated)...]
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=3fa0d6ec-a261-4558-acf3-fca01236a67b, content=ukm, senderId=1, senderName=Administra (truncated)...]
2025-06-06 09:53:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=3fa0d6ec-a261-4558-acf3-fca01236a67b, content=ukm, senderId=1, senderName=Administra (truncated)...]
2025-06-06 09:53:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false", parameters={masked}
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"3fa0d6ec-a261-4558-acf3-fca0123...(truncated)
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:15 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b unpinned by user 1
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false", parameters={masked}
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"3fa0d6ec-a261-4558-acf3-fca0123...(truncated)
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:17 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b unpinned by user 1
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=true
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=true
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=true", parameters={masked}
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"3fa0d6ec-a261-4558-acf3-fca01236a...(truncated)
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:19 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b pinned by user 1
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=3fa0d6ec-a261-4558-acf3-fca01236a67b, content=ukm, senderId=1, senderName=Administra (truncated)...]
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=3fa0d6ec-a261-4558-acf3-fca01236a67b, content=ukm, senderId=1, senderName=Administra (truncated)...]
2025-06-06 09:53:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=3fa0d6ec-a261-4558-acf3-fca01236a67b, content=ukm, senderId=1, senderName=Administra (truncated)...]
2025-06-06 09:53:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false", parameters={masked}
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"3fa0d6ec-a261-4558-acf3-fca0123...(truncated)
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:21 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b unpinned by user 1
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:21 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:21 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false", parameters={masked}
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"3fa0d6ec-a261-4558-acf3-fca0123...(truncated)
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:23 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b unpinned by user 1
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=true
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=true
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=true", parameters={masked}
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"3fa0d6ec-a261-4558-acf3-fca01236a...(truncated)
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:24 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b pinned by user 1
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=3fa0d6ec-a261-4558-acf3-fca01236a67b, content=ukm, senderId=1, senderName=Administra (truncated)...]
2025-06-06 09:53:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=3fa0d6ec-a261-4558-acf3-fca01236a67b, content=ukm, senderId=1, senderName=Administra (truncated)...]
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=3fa0d6ec-a261-4558-acf3-fca01236a67b, content=ukm, senderId=1, senderName=Administra (truncated)...]
2025-06-06 09:53:24 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false", parameters={masked}
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"3fa0d6ec-a261-4558-acf3-fca0123...(truncated)
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:27 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b unpinned by user 1
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:27 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/pin?pinned=false", parameters={masked}
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"3fa0d6ec-a261-4558-acf3-fca0123...(truncated)
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:29 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b unpinned by user 1
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:53:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true", parameters={masked}
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2abf...(truncated)
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:53:30 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 pinned by user 1
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:53:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:30 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:30 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:30 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:30 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:30 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:30 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:53:30 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:30 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:30 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:53:30 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:53:30 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:53:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:53:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:53:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:53:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:56 [clientInboundChannel-65] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=n1bpbmcg, lookupDestination='/chat/room/1/leave'
2025-06-06 09:53:56 [clientInboundChannel-65] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:53:56 [clientInboundChannel-65] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:1 with session n1bpbmcg
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:53:56 [clientInboundChannel-65] DEBUG c.r.c.controller.ChatController - User 3 left room 1 with session n1bpbmcg
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:53:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:53:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:53:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:53:58 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:53:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 09:53:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 09:54:00 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/reactions
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/reactions
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/reactions", parameters={}
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#addReaction(String, AddReactionRequest, UserPrincipal)
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [AddReactionRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, type=LIKE)]
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"REACTION","action":"ADD","data":{"messageId":"3fa0d6ec-a261-4558-acf3-f...(truncated)
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:35 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Reaction LIKE added to message 3fa0d6ec-a261-4558-acf3-fca01236a67b by user 3
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:35 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/reactions
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/reactions
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/3fa0d6ec-a261-4558-acf3-fca01236a67b/reactions", parameters={}
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getMessageReactions(String)
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MessageReactionDTO(type=LIKE, emoji=👍, count=1, users=[UserSummaryDTO(id=3, username=quandepzai, f (truncated)...]
2025-06-06 09:54:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:44 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:49 [clientInboundChannel-74] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/3 id=sub-12 session=n1bpbmcg
2025-06-06 09:54:49 [clientInboundChannel-74] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-13 session=n1bpbmcg
2025-06-06 09:54:49 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/enter session=n1bpbmcg, lookupDestination='/chat/room/3/enter'
2025-06-06 09:54:49 [clientInboundChannel-48] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:54:49 [clientInboundChannel-48] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:3 with session n1bpbmcg
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:54:49 [clientInboundChannel-48] DEBUG c.r.c.controller.ChatController - User 3 entered room 3 with session n1bpbmcg
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/3/messages?page=0&size=50
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/3/messages?page=0&size=50", parameters={masked}
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 09:54:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=3
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:49 [clientInboundChannel-79] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-14 session=n1bpbmcg
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:49 [clientInboundChannel-79] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-15 session=n1bpbmcg
2025-06-06 09:54:49 [clientInboundChannel-65] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/leave session=n1bpbmcg, lookupDestination='/chat/room/3/leave'
2025-06-06 09:54:49 [clientInboundChannel-65] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 09:54:49 [clientInboundChannel-80] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=n1bpbmcg, lookupDestination='/chat/room/1/enter'
2025-06-06 09:54:49 [clientInboundChannel-65] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:3 with session n1bpbmcg
2025-06-06 09:54:49 [clientInboundChannel-80] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:49 [clientInboundChannel-65] DEBUG c.r.c.controller.ChatController - User 3 left room 3 with session n1bpbmcg
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=3
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=3", parameters={masked}
2025-06-06 09:54:49 [clientInboundChannel-80] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session n1bpbmcg
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:49 [clientInboundChannel-80] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session n1bpbmcg
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:49 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 09:54:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:50 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=1, conversationId=null (truncated)...]
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:50 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:50 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:50 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 09:54:50 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 09:54:50 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:50 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:50 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:50 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:50 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:52 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:52 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:52 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:52 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:52 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true", parameters={masked}
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2abf...(truncated)
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:55 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 pinned by user 1
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:55 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:54:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:55 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:54:55 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:54:55 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:57 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:57 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:54:59 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:54:59 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:59 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:54:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true", parameters={masked}
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2abf...(truncated)
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:00 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 pinned by user 1
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:00 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:00 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:02 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:02 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:02 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:02 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:02 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:04 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true", parameters={masked}
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2abf...(truncated)
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:12 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 pinned by user 1
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:23 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:25 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true", parameters={masked}
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2abf...(truncated)
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:27 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 pinned by user 1
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:27 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:29 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:29 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:29 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:30 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:30 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:30 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:30 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true", parameters={masked}
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2abf...(truncated)
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:43 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 pinned by user 1
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:43 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:43 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:55:43 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:46 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=false", parameters={masked}
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"UNPIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2a...(truncated)
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:55:48 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 unpinned by user 1
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:55:48 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:48 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:48 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 09:55:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/45ba0abb-3f84-11f0-abdc-0433c2abf6d4/pin?pinned=true", parameters={masked}
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#pinMessage(String, Boolean, UserPrincipal)
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"PIN","data":{"id":"45ba0abb-3f84-11f0-abdc-0433c2abf...(truncated)
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 09:57:39 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 pinned by user 1
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 09:57:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:57:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:57:39 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:57:39 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 09:57:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:04:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/refresh
2025-06-06 10:04:57 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:04:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/refresh
2025-06-06 10:04:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/refresh", parameters={}
2025-06-06 10:04:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#refreshToken(String)
2025-06-06 10:04:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to ["eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzQ5MTc3NzQxLCJleHAiOjE3NDk (truncated)..."]
2025-06-06 10:04:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:04:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE (truncated)...]
2025-06-06 10:04:57 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:04:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749179097849
2025-06-06 10:04:57 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:04:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749179097849
2025-06-06 10:04:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749179097849", parameters={masked}
2025-06-06 10:04:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 10:04:57 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749179097849
2025-06-06 10:04:57 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:04:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/340/n1tk5tqu/websocket
2025-06-06 10:04:57 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:04:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/340/n1tk5tqu/websocket
2025-06-06 10:04:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/340/n1tk5tqu/websocket", parameters={}
2025-06-06 10:04:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 10:04:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/340/n1tk5tqu/websocket
2025-06-06 10:04:57 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:04:57 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=n1tk5tqu]
2025-06-06 10:04:57 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:04:57 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:04:57 [http-nio-8080-exec-3] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: n1tk5tqu
2025-06-06 10:04:57 [clientInboundChannel-165] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=n1tk5tqu
2025-06-06 10:04:57 [websocket-async-5] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session n1tk5tqu, scheduling retry...
2025-06-06 10:04:57 [clientInboundChannel-161] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=n1tk5tqu
2025-06-06 10:04:57 [clientInboundChannel-145] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=n1tk5tqu
2025-06-06 10:04:59 [ForkJoinPool.commonPool-worker-7] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session n1tk5tqu
2025-06-06 10:05:33 [clientInboundChannel-145] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=n1bpbmcg, lookupDestination='/chat/room/1/leave'
2025-06-06 10:05:33 [clientInboundChannel-145] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 10:05:33 [clientInboundChannel-145] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:1 with session n1bpbmcg
2025-06-06 10:05:33 [clientInboundChannel-145] DEBUG c.r.c.controller.ChatController - User 3 left room 1 with session n1bpbmcg
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:05:33 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:05:34 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:06 [clientInboundChannel-197] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-16 session=n1bpbmcg
2025-06-06 10:10:06 [clientInboundChannel-200] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-17 session=n1bpbmcg
2025-06-06 10:10:06 [clientInboundChannel-198] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=n1bpbmcg, lookupDestination='/chat/room/1/enter'
2025-06-06 10:10:06 [clientInboundChannel-198] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 10:10:06 [clientInboundChannel-198] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session n1bpbmcg
2025-06-06 10:10:06 [clientInboundChannel-198] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session n1bpbmcg
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:10:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 10:10:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:06 [clientInboundChannel-202] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=n1bpbmcg, lookupDestination='/chat/room/1/leave'
2025-06-06 10:10:06 [clientInboundChannel-206] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/3 id=sub-18 session=n1bpbmcg
2025-06-06 10:10:06 [clientInboundChannel-208] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-19 session=n1bpbmcg
2025-06-06 10:10:06 [clientInboundChannel-202] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 10:10:06 [clientInboundChannel-208] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/enter session=n1bpbmcg, lookupDestination='/chat/room/3/enter'
2025-06-06 10:10:06 [clientInboundChannel-208] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/3/messages?page=0&size=50
2025-06-06 10:10:06 [clientInboundChannel-208] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:3 with session n1bpbmcg
2025-06-06 10:10:06 [clientInboundChannel-208] DEBUG c.r.c.controller.ChatController - User 3 entered room 3 with session n1bpbmcg
2025-06-06 10:10:06 [clientInboundChannel-202] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:1 with session n1bpbmcg
2025-06-06 10:10:06 [clientInboundChannel-202] DEBUG c.r.c.controller.ChatController - User 3 left room 1 with session n1bpbmcg
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/3/messages?page=0&size=50
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/3/messages?page=0&size=50", parameters={masked}
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:10:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=3
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=3
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=3", parameters={masked}
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 10:10:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=3, conversationId=null (truncated)...]
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=3, conversationId=null (truncated)...]
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=3, conversationId=null (truncated)...]
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=3, conversationId=null (truncated)...]
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=3, conversationId=null (truncated)...]
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:07 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:07 [http-nio-8080-exec-4] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 10:10:07 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:07 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:07 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:07 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:07 [clientInboundChannel-204] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/2 id=sub-20 session=n1bpbmcg
2025-06-06 10:10:07 [clientInboundChannel-200] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/leave session=n1bpbmcg, lookupDestination='/chat/room/3/leave'
2025-06-06 10:10:07 [clientInboundChannel-205] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-21 session=n1bpbmcg
2025-06-06 10:10:07 [clientInboundChannel-204] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/2/enter session=n1bpbmcg, lookupDestination='/chat/room/2/enter'
2025-06-06 10:10:07 [clientInboundChannel-200] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 10:10:07 [clientInboundChannel-204] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 10:10:07 [clientInboundChannel-200] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:3 with session n1bpbmcg
2025-06-06 10:10:07 [clientInboundChannel-204] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:2 with session n1bpbmcg
2025-06-06 10:10:07 [clientInboundChannel-204] DEBUG c.r.c.controller.ChatController - User 3 entered room 2 with session n1bpbmcg
2025-06-06 10:10:07 [clientInboundChannel-200] DEBUG c.r.c.controller.ChatController - User 3 left room 3 with session n1bpbmcg
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/2/messages?page=0&size=50
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/2/messages?page=0&size=50
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:10:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:07 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=2
2025-06-06 10:10:07 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:07 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=2
2025-06-06 10:10:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=2", parameters={masked}
2025-06-06 10:10:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:10:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 10:10:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:08 [clientInboundChannel-197] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/2/leave session=n1bpbmcg, lookupDestination='/chat/room/2/leave'
2025-06-06 10:10:08 [clientInboundChannel-208] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/3 id=sub-22 session=n1bpbmcg
2025-06-06 10:10:08 [clientInboundChannel-198] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-23 session=n1bpbmcg
2025-06-06 10:10:08 [clientInboundChannel-197] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 10:10:08 [clientInboundChannel-206] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/enter session=n1bpbmcg, lookupDestination='/chat/room/3/enter'
2025-06-06 10:10:08 [clientInboundChannel-206] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 10:10:08 [clientInboundChannel-206] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:3 with session n1bpbmcg
2025-06-06 10:10:08 [clientInboundChannel-197] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:2 with session n1bpbmcg
2025-06-06 10:10:08 [clientInboundChannel-206] DEBUG c.r.c.controller.ChatController - User 3 entered room 3 with session n1bpbmcg
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/3/messages?page=0&size=50
2025-06-06 10:10:08 [clientInboundChannel-197] DEBUG c.r.c.controller.ChatController - User 3 left room 2 with session n1bpbmcg
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/3/messages?page=0&size=50
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/3/messages?page=0&size=50", parameters={masked}
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:10:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=3
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=3
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=3", parameters={masked}
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 10:10:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:08 [clientInboundChannel-204] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/1 id=sub-24 session=n1bpbmcg
2025-06-06 10:10:08 [clientInboundChannel-199] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/leave session=n1bpbmcg, lookupDestination='/chat/room/3/leave'
2025-06-06 10:10:08 [clientInboundChannel-209] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-25 session=n1bpbmcg
2025-06-06 10:10:08 [clientInboundChannel-199] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 10:10:08 [clientInboundChannel-203] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/enter session=n1bpbmcg, lookupDestination='/chat/room/1/enter'
2025-06-06 10:10:08 [clientInboundChannel-203] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 10:10:08 [clientInboundChannel-199] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:3 with session n1bpbmcg
2025-06-06 10:10:08 [clientInboundChannel-203] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:1 with session n1bpbmcg
2025-06-06 10:10:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/1/messages?page=0&size=50
2025-06-06 10:10:08 [clientInboundChannel-203] DEBUG c.r.c.controller.ChatController - User 3 entered room 1 with session n1bpbmcg
2025-06-06 10:10:08 [clientInboundChannel-199] DEBUG c.r.c.controller.ChatController - User 3 left room 3 with session n1bpbmcg
2025-06-06 10:10:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/1/messages?page=0&size=50
2025-06-06 10:10:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/1/messages?page=0&size=50", parameters={masked}
2025-06-06 10:10:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 10:10:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:09 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:10:09 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=1
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=1
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=1", parameters={masked}
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, content=Chào mừng các bạn đến với phòng chat c (truncated)...]
2025-06-06 10:10:09 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba0abb-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3fa0d6ec-a261-4558-acf3-fca01236a67b, roomId=1, conversationId=null (truncated)...]
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=45ba1f77-3f84-11f0-abdc-0433c2abf6d4, roomId=1, conversationId=null (truncated)...]
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=cfbb401e-396b-42ae-8592-875332e4d197, roomId=1, conversationId=null (truncated)...]
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=415b098a-3b45-44ac-990c-caaa3a915e71, roomId=1, conversationId=null (truncated)...]
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba0abb-3f84-11f0-abdc...(truncated)
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:10 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba0abb-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3fa0d6ec-a261-4558-acf3...(truncated)
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:10 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3fa0d6ec-a261-4558-acf3-fca01236a67b marked as read by user 3
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"45ba1f77-3f84-11f0-abdc...(truncated)
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:10 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message 45ba1f77-3f84-11f0-abdc-0433c2abf6d4 marked as read by user 3
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"cfbb401e-396b-42ae-8592...(truncated)
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:10 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message cfbb401e-396b-42ae-8592-875332e4d197 marked as read by user 3
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:10 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:10 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:10 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:10 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/room/1 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"415b098a-3b45-44ac-990c...(truncated)
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:10 [http-nio-8080-exec-10] INFO  c.r.c.s.impl.MessageServiceImpl - Message 415b098a-3b45-44ac-990c-caaa3a915e71 marked as read by user 3
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:10 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:10 [clientInboundChannel-201] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/1/leave session=n1bpbmcg, lookupDestination='/chat/room/1/leave'
2025-06-06 10:10:10 [clientInboundChannel-202] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/3 id=sub-26 session=n1bpbmcg
2025-06-06 10:10:10 [clientInboundChannel-201] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 10:10:10 [clientInboundChannel-204] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-27 session=n1bpbmcg
2025-06-06 10:10:10 [clientInboundChannel-204] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/enter session=n1bpbmcg, lookupDestination='/chat/room/3/enter'
2025-06-06 10:10:10 [clientInboundChannel-204] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 10:10:10 [clientInboundChannel-201] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:1 with session n1bpbmcg
2025-06-06 10:10:10 [clientInboundChannel-204] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:3 with session n1bpbmcg
2025-06-06 10:10:10 [clientInboundChannel-201] DEBUG c.r.c.controller.ChatController - User 3 left room 1 with session n1bpbmcg
2025-06-06 10:10:10 [clientInboundChannel-204] DEBUG c.r.c.controller.ChatController - User 3 entered room 3 with session n1bpbmcg
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/3/messages?page=0&size=50
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/3/messages?page=0&size=50
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/3/messages?page=0&size=50", parameters={masked}
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:10:10 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=3
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=3
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=3", parameters={masked}
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 10:10:10 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:11 [clientInboundChannel-206] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/3/leave session=n1bpbmcg, lookupDestination='/chat/room/3/leave'
2025-06-06 10:10:11 [clientInboundChannel-202] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-29 session=n1bpbmcg
2025-06-06 10:10:11 [clientInboundChannel-197] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/room/2 id=sub-28 session=n1bpbmcg
2025-06-06 10:10:11 [clientInboundChannel-201] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/2/enter session=n1bpbmcg, lookupDestination='/chat/room/2/enter'
2025-06-06 10:10:11 [clientInboundChannel-206] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 10:10:11 [clientInboundChannel-201] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterRoom[2 args]
2025-06-06 10:10:11 [clientInboundChannel-206] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:3 with session n1bpbmcg
2025-06-06 10:10:11 [clientInboundChannel-201] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat room:2 with session n1bpbmcg
2025-06-06 10:10:11 [clientInboundChannel-206] DEBUG c.r.c.controller.ChatController - User 3 left room 3 with session n1bpbmcg
2025-06-06 10:10:11 [clientInboundChannel-201] DEBUG c.r.c.controller.ChatController - User 3 entered room 2 with session n1bpbmcg
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms/2/messages?page=0&size=50
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms/2/messages?page=0&size=50
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getRoomMessages(Long, int, int, UserPrincipal)
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:10:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?roomId=2
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?roomId=2
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?roomId=2", parameters={masked}
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 10:10:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:12 [clientInboundChannel-203] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/room/2/leave session=n1bpbmcg, lookupDestination='/chat/room/2/leave'
2025-06-06 10:10:12 [clientInboundChannel-203] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveRoom[2 args]
2025-06-06 10:10:12 [clientInboundChannel-203] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat room:2 with session n1bpbmcg
2025-06-06 10:10:12 [clientInboundChannel-203] DEBUG c.r.c.controller.ChatController - User 3 left room 2 with session n1bpbmcg
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:10:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:13 [clientInboundChannel-205] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-31 session=n1bpbmcg
2025-06-06 10:10:13 [clientInboundChannel-196] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-30 session=n1bpbmcg
2025-06-06 10:10:13 [clientInboundChannel-205] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=n1bpbmcg, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:10:13 [clientInboundChannel-205] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:10:13 [clientInboundChannel-205] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session n1bpbmcg
2025-06-06 10:10:13 [clientInboundChannel-205] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session n1bpbmcg
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:10:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:10:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"724b112c-d308-44b2-bc26...(truncated)
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"3c97df02-713f-4be7-b580...(truncated)
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:14 [http-nio-8080-exec-8] INFO  c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3
2025-06-06 10:10:14 [http-nio-8080-exec-5] INFO  c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"4160824a-ced4-4e8f-b626...(truncated)
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:14 [http-nio-8080-exec-3] INFO  c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b0c76bb8-010f-4ece-aa86...(truncated)
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:14 [http-nio-8080-exec-7] INFO  c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"8d65be0b-3aee-4136-a0df...(truncated)
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:14 [http-nio-8080-exec-6] INFO  c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"dc50f85e-393e-4b2b-92a0...(truncated)
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:14 [http-nio-8080-exec-2] INFO  c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"e4503b50-8a13-4765-b77e...(truncated)
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"STATUS_UPDATE","data":{"id":"b09a4099-8bc5-4ae3-9d72...(truncated)
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:10:14 [http-nio-8080-exec-9] INFO  c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3
2025-06-06 10:10:14 [http-nio-8080-exec-1] INFO  c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:10:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/refresh
2025-06-06 10:10:59 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:10:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/refresh
2025-06-06 10:10:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/refresh", parameters={}
2025-06-06 10:10:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#refreshToken(String)
2025-06-06 10:10:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to ["eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJxdWFuZGVwemFpIiwidHlwZSI6InJlZnJlc2giLCJpYXQiOjE3NDkxNzc3NTIsImV4cCI (truncated)..."]
2025-06-06 10:10:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:10:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJxdWFuZGVwemFpIiwidHlwZSI6ImFjY2VzcyIsIml (truncated)...]
2025-06-06 10:10:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749179459238
2025-06-06 10:10:59 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:10:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749179459238
2025-06-06 10:10:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749179459238", parameters={masked}
2025-06-06 10:10:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 10:10:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749179459238
2025-06-06 10:10:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:10:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/133/faaew1zz/websocket
2025-06-06 10:10:59 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:10:59 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/133/faaew1zz/websocket
2025-06-06 10:10:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/133/faaew1zz/websocket", parameters={}
2025-06-06 10:10:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 10:10:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/133/faaew1zz/websocket
2025-06-06 10:10:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:10:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=faaew1zz]
2025-06-06 10:10:59 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:10:59 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:10:59 [http-nio-8080-exec-10] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: faaew1zz
2025-06-06 10:10:59 [clientInboundChannel-211] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=faaew1zz
2025-06-06 10:10:59 [websocket-async-6] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session faaew1zz, scheduling retry...
2025-06-06 10:10:59 [clientInboundChannel-208] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=faaew1zz
2025-06-06 10:10:59 [clientInboundChannel-202] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=faaew1zz
2025-06-06 10:11:00 [ForkJoinPool.commonPool-worker-8] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session faaew1zz
2025-06-06 10:12:58 [MessageBroker-6] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[8 current WS(8)-HttpStream(0)-HttpPoll(0), 19 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(19)-CONNECTED(19)-DISCONNECT(7)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 1437], outboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 805], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 1, completed tasks = 369]
2025-06-06 10:13:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/refresh
2025-06-06 10:13:04 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:13:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/refresh
2025-06-06 10:13:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/refresh", parameters={}
2025-06-06 10:13:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#refreshToken(String)
2025-06-06 10:13:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to ["eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzQ5MTc4MDc1LCJleHAiOjE3NDk (truncated)..."]
2025-06-06 10:13:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:13:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE (truncated)...]
2025-06-06 10:13:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:13:04 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749179584842
2025-06-06 10:13:04 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:13:04 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749179584842
2025-06-06 10:13:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749179584842", parameters={masked}
2025-06-06 10:13:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 10:13:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749179584842
2025-06-06 10:13:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:13:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/895/zgrvp2os/websocket
2025-06-06 10:13:04 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:13:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/895/zgrvp2os/websocket
2025-06-06 10:13:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/895/zgrvp2os/websocket", parameters={}
2025-06-06 10:13:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1544a1c3
2025-06-06 10:13:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/895/zgrvp2os/websocket
2025-06-06 10:13:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:13:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zgrvp2os]
2025-06-06 10:13:05 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:13:05 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:13:05 [http-nio-8080-exec-8] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: zgrvp2os
2025-06-06 10:13:05 [clientInboundChannel-222] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=zgrvp2os
2025-06-06 10:13:05 [websocket-async-7] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session zgrvp2os, scheduling retry...
2025-06-06 10:13:05 [clientInboundChannel-224] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=zgrvp2os
2025-06-06 10:13:05 [clientInboundChannel-224] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=zgrvp2os
2025-06-06 10:13:06 [ForkJoinPool.commonPool-worker-9] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session zgrvp2os
2025-06-06 10:16:34 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-06 10:16:34 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session bonlu1f5 with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=bonlu1f5]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bonlu1f5] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bonlu1f5
2025-06-06 10:16:34 [websocket-async-8] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session bonlu1f5
2025-06-06 10:16:34 [websocket-async-8] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session bonlu1f5 marked as offline
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session n1bpbmcg with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [websocket-async-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"bonlu1f5"}
2025-06-06 10:16:34 [websocket-async-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 6 sessions.
2025-06-06 10:16:34 [clientInboundChannel-249] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=bonlu1f5
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=n1bpbmcg]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=n1bpbmcg] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session n1bpbmcg
2025-06-06 10:16:34 [websocket-async-1] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session n1bpbmcg
2025-06-06 10:16:34 [websocket-async-1] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session n1bpbmcg marked as offline
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session y0ig4nyw with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [websocket-async-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"n1bpbmcg"}
2025-06-06 10:16:34 [websocket-async-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 5 sessions.
2025-06-06 10:16:34 [clientInboundChannel-252] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=n1bpbmcg
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=y0ig4nyw]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=y0ig4nyw] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session y0ig4nyw
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 24zp35dc with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [clientInboundChannel-241] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=y0ig4nyw
2025-06-06 10:16:34 [websocket-async-2] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session y0ig4nyw
2025-06-06 10:16:34 [websocket-async-2] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session y0ig4nyw marked as offline
2025-06-06 10:16:34 [websocket-async-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"y0ig4nyw"}
2025-06-06 10:16:34 [websocket-async-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 4 sessions.
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=24zp35dc]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=24zp35dc] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 24zp35dc
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session faaew1zz with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [clientInboundChannel-244] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=24zp35dc
2025-06-06 10:16:34 [websocket-async-3] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session 24zp35dc
2025-06-06 10:16:34 [websocket-async-3] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session 24zp35dc marked as offline
2025-06-06 10:16:34 [websocket-async-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"24zp35dc"}
2025-06-06 10:16:34 [websocket-async-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 4 sessions.
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=faaew1zz]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=faaew1zz] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session faaew1zz
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 45vhhqid with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [websocket-async-4] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session faaew1zz
2025-06-06 10:16:34 [clientInboundChannel-247] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=faaew1zz
2025-06-06 10:16:34 [websocket-async-4] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session faaew1zz marked as offline
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=45vhhqid]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"faaew1zz"}
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 3 sessions.
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=45vhhqid] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 45vhhqid
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session zgrvp2os with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [clientInboundChannel-202] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=45vhhqid
2025-06-06 10:16:34 [websocket-async-5] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session 45vhhqid
2025-06-06 10:16:34 [websocket-async-5] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session 45vhhqid marked as offline
2025-06-06 10:16:34 [websocket-async-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"45vhhqid"}
2025-06-06 10:16:34 [websocket-async-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 3 sessions.
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=zgrvp2os]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zgrvp2os] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zgrvp2os
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session rni4nwkw with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [clientInboundChannel-249] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=zgrvp2os
2025-06-06 10:16:34 [websocket-async-6] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session zgrvp2os
2025-06-06 10:16:34 [websocket-async-6] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session zgrvp2os marked as offline
2025-06-06 10:16:34 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"zgrvp2os"}
2025-06-06 10:16:34 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=rni4nwkw]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rni4nwkw] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rni4nwkw
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session n1tk5tqu with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [websocket-async-7] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session rni4nwkw
2025-06-06 10:16:34 [clientInboundChannel-252] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=rni4nwkw
2025-06-06 10:16:34 [websocket-async-7] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session rni4nwkw marked as offline
2025-06-06 10:16:34 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"rni4nwkw"}
2025-06-06 10:16:34 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=n1tk5tqu]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=n1tk5tqu] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session n1tk5tqu
2025-06-06 10:16:34 [websocket-async-8] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session n1tk5tqu
2025-06-06 10:16:34 [clientInboundChannel-241] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=n1tk5tqu
2025-06-06 10:16:34 [websocket-async-8] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session n1tk5tqu marked as offline
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-06-06 10:16:34 [websocket-async-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"n1tk5tqu"}
2025-06-06 10:16:34 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@73ce59fd]]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@73ce59fd]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@73ce59fd]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:16:34 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:16:35 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 10:16:35 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown initiated...
2025-06-06 10:16:35 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown completed.
2025-06-06 10:25:34 [main] INFO  c.r.chatapp.ChatappApplication - Starting ChatappApplication using Java 17.0.11 with PID 10156 (D:\job\chatapp\build\classes\java\main started by dskva in D:\job\chatapp)
2025-06-06 10:25:34 [main] DEBUG c.r.chatapp.ChatappApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-06 10:25:34 [main] INFO  c.r.chatapp.ChatappApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 230 ms. Found 11 JPA repository interfaces.
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.ConversationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.FileAttachmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageDeliveryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageReactionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomMemberRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserContactRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:25:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
2025-06-06 10:25:37 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-06 10:25:37 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 10:25:37 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-06 10:25:37 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 10:25:37 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2959 ms
2025-06-06 10:25:37 [main] INFO  c.r.chatapp.security.JwtTokenUtil - JWT configuration initialized - Expiration: 3600s, Refresh: 86400s
2025-06-06 10:25:38 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-06 10:25:38 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-06 10:25:38 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-06 10:25:38 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-06 10:25:38 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Starting...
2025-06-06 10:25:38 [main] INFO  com.zaxxer.hikari.pool.HikariPool - ChatAppHikariCP - Added connection com.mysql.cj.jdbc.ConnectionImpl@16c9f7f0
2025-06-06 10:25:38 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Start completed.
2025-06-06 10:25:38 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.7.17 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-06-06 10:25:38 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-06 10:25:38 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (ChatAppHikariCP)']
	Database driver: undefined/unknown
	Database version: 5.7.17
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-06 10:25:40 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-06 10:25:40 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 10:25:40 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-06 10:25:42 [main] INFO  c.r.c.config.RateLimitingConfig - Rate limiting is disabled
2025-06-06 10:25:43 [main] DEBUG c.r.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-06 10:25:43 [main] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-06 10:25:43 [main] DEBUG c.r.c.security.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-06-06 10:25:43 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-06 10:25:43 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-06 10:25:44 [main] INFO  c.r.c.s.impl.UserSessionServiceImpl - UserSessionService initialized - Redis available: false
2025-06-06 10:25:45 [main] WARN  c.r.chatapp.config.EncryptionConfig - No encryption key provided. Generated new key: YNXQZ/ySjXv8fcjpn73RgKMRy+RyKy6byxPickfb7AU=
2025-06-06 10:25:45 [main] WARN  c.r.chatapp.config.EncryptionConfig - Please save this key and add it to your configuration!
2025-06-06 10:25:45 [main] INFO  c.r.chatapp.config.CacheConfig - Redis Cache configuration initialized - Default TTL: 600s, User TTL: 1800s, Message TTL: 3600s
2025-06-06 10:25:45 [main] INFO  c.revotech.chatapp.config.CorsConfig - CORS configured - Origins: [http://localhost:3000, http://localhost:3001, http://127.0.0.1:3000], Methods: [GET, POST, PUT, DELETE, OPTIONS], Allow credentials: true
2025-06-06 10:25:45 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-06-06 10:25:45 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-06-06 10:25:45 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 70 mappings in 'requestMappingHandlerMapping'
2025-06-06 10:25:45 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-06-06 10:25:45 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-06 10:25:46 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.AuthController:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ChatController:
	{[MESSAGE],[/chat/typing/conversation/{conversationId}]}: notifyTypingInConversation(Long,TypingNotification,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}]}: sendMessageToConversation(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/enter]}: enterRoom(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}]}: sendMessageToRoom(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/leave]}: leaveRoom(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/leave]}: leaveConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/enter]}: enterConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/typing/room/{roomId}]}: notifyTypingInRoom(Long,TypingNotification,SimpMessageHeaderAccessor)
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ConversationController:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.FileController:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.MessageController:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.NotificationController:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.RoomController:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.UserController:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-06-06 10:25:46 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-06-06 10:25:47 [main] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 10:25:47 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 10:25:47 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-06-06 10:25:47 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@172236ba]
2025-06-06 10:25:47 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@172236ba]
2025-06-06 10:25:47 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@172236ba]]
2025-06-06 10:25:47 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-06-06 10:25:47 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:25:47 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:25:47 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-06 10:25:47 [main] INFO  c.r.chatapp.ChatappApplication - Started ChatappApplication in 13.445 seconds (process running for 14.278)
2025-06-06 10:25:47 [RMI TCP Connection(3)-192.168.1.63] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 10:25:47 [RMI TCP Connection(3)-192.168.1.63] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 10:25:47 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-06-06 10:25:47 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-06-06 10:25:47 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-06-06 10:25:47 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7968afa3
2025-06-06 10:25:47 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@57a7c51d
2025-06-06 10:25:47 [RMI TCP Connection(3)-192.168.1.63] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-06-06 10:25:47 [RMI TCP Connection(3)-192.168.1.63] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-06-06 10:25:48 [boundedElastic-1] WARN  o.s.b.a.d.r.RedisReactiveHealthIndicator - Redis health check failed
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1858)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1789)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1586)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1566)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1527)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1563)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedReactiveConnection(LettuceConnectionFactory.java:1274)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:1149)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:120)
	at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67)
	at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:63)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:41)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:354)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:220)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1787)
	... 16 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:336)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:339)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:784)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 10:26:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:26:12 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 10:26:12 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 10:26:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:26:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:26:12 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 10:26:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:12 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 10:26:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:12 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 10:26:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 10:26:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:26:12 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:26:12 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/signin
2025-06-06 10:26:18 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/signin
2025-06-06 10:26:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/signin", parameters={}
2025-06-06 10:26:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#signIn(LoginRequest)
2025-06-06 10:26:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(username=admin, password=123456)]
2025-06-06 10:26:19 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:19 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:19 [http-nio-8080-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-06 10:26:19 [http-nio-8080-exec-6] INFO  c.r.c.service.impl.AuthServiceImpl - User logged in: admin
2025-06-06 10:26:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE (truncated)...]
2025-06-06 10:26:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:26:19 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180379353
2025-06-06 10:26:19 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:19 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180379353
2025-06-06 10:26:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180379353", parameters={masked}
2025-06-06 10:26:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180379353
2025-06-06 10:26:19 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/617/psp4amsk/websocket
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/617/psp4amsk/websocket
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/617/psp4amsk/websocket", parameters={}
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/617/psp4amsk/websocket
2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:26:19 [http-nio-8080-exec-9] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:26:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=psp4amsk]
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:19 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:19 [http-nio-8080-exec-1] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: psp4amsk
2025-06-06 10:26:19 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=psp4amsk
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:19 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session psp4amsk, scheduling retry...
2025-06-06 10:26:19 [clientInboundChannel-5] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=psp4amsk
2025-06-06 10:26:19 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=psp4amsk
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:26:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:20 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session psp4amsk
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:23 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 10:26:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 10:26:23 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:23 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:23 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 10:26:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 10:26:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 10:26:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 10:26:23 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:23 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:23 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:23 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:23 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:26:23 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:23 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:26:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:26:23 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180383956
2025-06-06 10:26:23 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:26:23 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:26:23 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:26:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:26:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:23 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180383956
2025-06-06 10:26:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180383956", parameters={masked}
2025-06-06 10:26:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 10:26:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180383956
2025-06-06 10:26:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:23 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:26:23 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:26:23 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:23 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180383985
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180383985
2025-06-06 10:26:23 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180383985", parameters={masked}
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180383985
2025-06-06 10:26:23 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/841/xq3alub3/websocket
2025-06-06 10:26:23 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:23 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:23 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/841/xq3alub3/websocket
2025-06-06 10:26:23 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:26:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:23 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:26:23 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/841/xq3alub3/websocket", parameters={}
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/841/xq3alub3/websocket
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:26:24 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:26:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xq3alub3]
2025-06-06 10:26:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:26:24 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:26:24 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:26:24 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/006/wk3ndshh/websocket
2025-06-06 10:26:24 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:24 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/006/wk3ndshh/websocket
2025-06-06 10:26:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/006/wk3ndshh/websocket", parameters={}
2025-06-06 10:26:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/006/wk3ndshh/websocket
2025-06-06 10:26:24 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:26:24 [http-nio-8080-exec-5] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: xq3alub3
2025-06-06 10:26:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wk3ndshh]
2025-06-06 10:26:24 [clientInboundChannel-11] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=xq3alub3
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:26:24 [websocket-async-2] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session xq3alub3, scheduling retry...
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:26:24 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:24 [http-nio-8080-exec-8] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: wk3ndshh
2025-06-06 10:26:24 [clientInboundChannel-14] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=wk3ndshh
2025-06-06 10:26:24 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=wk3ndshh
2025-06-06 10:26:24 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=wk3ndshh
2025-06-06 10:26:24 [websocket-async-3] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session wk3ndshh, scheduling retry...
2025-06-06 10:26:24 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-2 session=wk3ndshh
2025-06-06 10:26:24 [clientInboundChannel-9] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=wk3ndshh
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:26:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:25 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session xq3alub3
2025-06-06 10:26:25 [ForkJoinPool.commonPool-worker-2] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session wk3ndshh
2025-06-06 10:26:25 [clientInboundChannel-12] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-4 session=wk3ndshh
2025-06-06 10:26:25 [clientInboundChannel-14] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=wk3ndshh
2025-06-06 10:26:25 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=wk3ndshh, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:25 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:25 [clientInboundChannel-6] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session wk3ndshh
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:25 [clientInboundChannel-6] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session wk3ndshh
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:26:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:25 [ForkJoinPool.commonPool-worker-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 0 messages as read in conversation 2
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:26:26 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3 in conversation
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3 in conversation
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3 in conversation
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:26 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3 in conversation
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3 in conversation
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:26 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3 in conversation
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3 in conversation
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3 in conversation
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:26 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:26:26 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:26:26 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":3,"username":"quandepzai","co...(truncated)
2025-06-06 10:26:26 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:26:26 [clientInboundChannel-16] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai started in /topic/conversation/2
2025-06-06 10:26:28 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=wk3ndshh, lookupDestination='/chat/conversation/2'
2025-06-06 10:26:28 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:26:28 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:26:28 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:26:28 [clientInboundChannel-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:26:28 [clientInboundChannel-9] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:26:28 [clientInboundChannel-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:26:28 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"651d099f-3135-41e3-915b-8be0b28c...(truncated)
2025-06-06 10:26:28 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:26:28 [clientInboundChannel-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:26:28 [clientInboundChannel-7] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: 123213213
2025-06-06 10:26:29 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:26:29 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:26:29 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:26:29 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:26:29 [clientInboundChannel-13] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:26:31 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:26:31 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:26:31 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":3,"username":"quandepzai","co...(truncated)
2025-06-06 10:26:31 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:26:31 [clientInboundChannel-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai started in /topic/conversation/2
2025-06-06 10:26:32 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=wk3ndshh, lookupDestination='/chat/conversation/2'
2025-06-06 10:26:32 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:26:32 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:26:32 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:26:32 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:26:32 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:26:32 [clientInboundChannel-16] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:26:32 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"e2be921c-9ca7-44e1-a318-303d5981...(truncated)
2025-06-06 10:26:32 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:26:32 [clientInboundChannel-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:26:32 [clientInboundChannel-6] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: 3213
2025-06-06 10:26:33 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:26:33 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:26:33 [clientInboundChannel-12] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:26:33 [clientInboundChannel-12] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:26:33 [clientInboundChannel-12] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:26:33 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/3 id=sub-2 session=psp4amsk
2025-06-06 10:26:33 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=psp4amsk
2025-06-06 10:26:33 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/enter session=psp4amsk, lookupDestination='/chat/conversation/3/enter'
2025-06-06 10:26:33 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:26:33 [clientInboundChannel-3] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:3 with session psp4amsk
2025-06-06 10:26:33 [clientInboundChannel-3] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 3 with session psp4amsk
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/3/messages?page=0&size=50
2025-06-06 10:26:33 [ForkJoinPool.commonPool-worker-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 0 messages as read in conversation 3
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/3/messages?page=0&size=50
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/3/messages?page=0&size=50", parameters={masked}
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:26:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=3
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=3
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=3", parameters={masked}
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-06-06 10:26:34 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:34 [clientInboundChannel-11] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/3/leave session=psp4amsk, lookupDestination='/chat/conversation/3/leave'
2025-06-06 10:26:34 [clientInboundChannel-11] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 10:26:34 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-4 session=psp4amsk
2025-06-06 10:26:34 [clientInboundChannel-14] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=psp4amsk
2025-06-06 10:26:34 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=psp4amsk, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:26:34 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:26:34 [clientInboundChannel-11] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:3 with session psp4amsk
2025-06-06 10:26:34 [clientInboundChannel-11] DEBUG c.r.c.controller.ChatController - User 1 left conversation 3 with session psp4amsk
2025-06-06 10:26:34 [clientInboundChannel-7] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:2 with session psp4amsk
2025-06-06 10:26:34 [clientInboundChannel-7] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 2 with session psp4amsk
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=24885d4c-9586-4b21-908d-7473305abc7e, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d16b939f-6475-44f3-ba69-fa434dd17132, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:34 [ForkJoinPool.commonPool-worker-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 2 messages as read in conversation 2
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quanxauzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quanxauzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 24885d4c-9586-4b21-908d-7473305abc7e marked as read by user 1 in conversation
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message d16b939f-6475-44f3-ba69-fa434dd17132 marked as read by user 1 in conversation
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:34 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:26:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:26:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=9d536ca6-8719-4aad-a9a5-386f20faa656, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=67106a51-ea87-4732-80b7-21af05d669dd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=651d099f-3135-41e3-915b-8be0b28cd869, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd marked as read by user 1 in conversation
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=18ecee51-f6b0-481a-b245-cd3ea296c23c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 marked as read by user 1 in conversation
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 marked as read by user 1 in conversation
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:35 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd marked as read by user 1 in conversation
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 651d099f-3135-41e3-915b-8be0b28cd869 marked as read by user 1 in conversation
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c marked as read by user 1 in conversation
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e2be921c-9ca7-44e1-a318-303d5981047f, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e2be921c-9ca7-44e1-a318-303d5981047f marked as read by user 1 in conversation
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:35 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:39 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=psp4amsk, lookupDestination='/chat/conversation/2/leave'
2025-06-06 10:26:39 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 10:26:39 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=psp4amsk
2025-06-06 10:26:39 [clientInboundChannel-13] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:2 with session psp4amsk
2025-06-06 10:26:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=psp4amsk] closed with CloseStatus[code=1000, reason=null]
2025-06-06 10:26:39 [clientInboundChannel-13] DEBUG c.r.c.controller.ChatController - User 1 left conversation 2 with session psp4amsk
2025-06-06 10:26:39 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session psp4amsk
2025-06-06 10:26:39 [clientOutboundChannel-12] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send WebSocket message to client in session psp4amsk
java.lang.IllegalStateException: Cannot send a message when session is closed
	at org.springframework.util.Assert.state(Assert.java:79)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.sendMessage(AbstractSockJsSession.java:144)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:190)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:163)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:529)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 10:26:39 [clientInboundChannel-9] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=psp4amsk
2025-06-06 10:26:39 [websocket-async-4] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session psp4amsk
2025-06-06 10:26:39 [websocket-async-4] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session psp4amsk marked as offline
2025-06-06 10:26:39 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"psp4amsk"}
2025-06-06 10:26:39 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:26:39 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=1, username=admin}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=psp4amsk}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=psp4amsk}]
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 10:26:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180400053
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180400054
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:40 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180400054
2025-06-06 10:26:40 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180400053
2025-06-06 10:26:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180400053", parameters={masked}
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180400054", parameters={masked}
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180400054
2025-06-06 10:26:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180400053
2025-06-06 10:26:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:26:40 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/932/5l5nonrf/websocket
2025-06-06 10:26:40 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/932/5l5nonrf/websocket
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:26:40 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/932/5l5nonrf/websocket", parameters={}
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:26:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/932/5l5nonrf/websocket
2025-06-06 10:26:40 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:26:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5l5nonrf]
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:26:40 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/912/jc3fv3tc/websocket
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/912/jc3fv3tc/websocket
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/912/jc3fv3tc/websocket", parameters={}
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:26:40 [http-nio-8080-exec-6] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: 5l5nonrf
2025-06-06 10:26:40 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=5l5nonrf
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/912/jc3fv3tc/websocket
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:40 [websocket-async-5] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session 5l5nonrf, scheduling retry...
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:26:40 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=5l5nonrf
2025-06-06 10:26:40 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=5l5nonrf
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jc3fv3tc]
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:40 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-8] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: jc3fv3tc
2025-06-06 10:26:40 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=jc3fv3tc
2025-06-06 10:26:40 [websocket-async-6] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session jc3fv3tc, scheduling retry...
2025-06-06 10:26:40 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-2 session=5l5nonrf
2025-06-06 10:26:40 [clientInboundChannel-12] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=5l5nonrf
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:26:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:26:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:40 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-4 session=5l5nonrf
2025-06-06 10:26:40 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=5l5nonrf
2025-06-06 10:26:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=5l5nonrf, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:26:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:26:40 [clientInboundChannel-5] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:2 with session 5l5nonrf
2025-06-06 10:26:40 [clientInboundChannel-5] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 2 with session 5l5nonrf
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:26:40 [ForkJoinPool.commonPool-worker-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 2 messages as read in conversation 2
2025-06-06 10:26:40 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:26:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:26:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:41 [ForkJoinPool.commonPool-worker-2] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session 5l5nonrf
2025-06-06 10:26:41 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session jc3fv3tc
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:26:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 marked as read by user 1 in conversation
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd marked as read by user 1 in conversation
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:42 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=9d536ca6-8719-4aad-a9a5-386f20faa656, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=651d099f-3135-41e3-915b-8be0b28cd869, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=67106a51-ea87-4732-80b7-21af05d669dd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=18ecee51-f6b0-481a-b245-cd3ea296c23c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 marked as read by user 1 in conversation
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 651d099f-3135-41e3-915b-8be0b28cd869 marked as read by user 1 in conversation
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:42 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c marked as read by user 1 in conversation
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e2be921c-9ca7-44e1-a318-303d5981047f, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd marked as read by user 1 in conversation
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e2be921c-9ca7-44e1-a318-303d5981047f marked as read by user 1 in conversation
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:43 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=wk3ndshh, lookupDestination='/chat/conversation/2/leave'
2025-06-06 10:26:43 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 10:26:43 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-6 session=wk3ndshh
2025-06-06 10:26:43 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-7 session=wk3ndshh
2025-06-06 10:26:43 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=wk3ndshh, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:26:43 [clientInboundChannel-16] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat conversation:2 with session wk3ndshh
2025-06-06 10:26:43 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:26:43 [clientInboundChannel-16] DEBUG c.r.c.controller.ChatController - User 3 left conversation 2 with session wk3ndshh
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:43 [clientInboundChannel-8] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session wk3ndshh
2025-06-06 10:26:43 [clientInboundChannel-8] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session wk3ndshh
2025-06-06 10:26:43 [ForkJoinPool.commonPool-worker-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 0 messages as read in conversation 2
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:26:43 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:26:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3 in conversation
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3 in conversation
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3 in conversation
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3 in conversation
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:44 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:44 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3 in conversation
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3 in conversation
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3 in conversation
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3 in conversation
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:44 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:45 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=wk3ndshh, lookupDestination='/chat/conversation/2/leave'
2025-06-06 10:26:45 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 10:26:45 [clientInboundChannel-5] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-8 session=wk3ndshh
2025-06-06 10:26:45 [clientInboundChannel-4] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat conversation:2 with session wk3ndshh
2025-06-06 10:26:45 [clientInboundChannel-12] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-9 session=wk3ndshh
2025-06-06 10:26:45 [clientInboundChannel-4] DEBUG c.r.c.controller.ChatController - User 3 left conversation 2 with session wk3ndshh
2025-06-06 10:26:45 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=wk3ndshh, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:26:45 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:45 [clientInboundChannel-9] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session wk3ndshh
2025-06-06 10:26:45 [clientInboundChannel-9] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session wk3ndshh
2025-06-06 10:26:45 [ForkJoinPool.commonPool-worker-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 0 messages as read in conversation 2
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:26:45 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:26:45 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3 in conversation
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3 in conversation
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3 in conversation
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3 in conversation
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3 in conversation
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3 in conversation
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:46 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:46 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:46 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3 in conversation
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3 in conversation
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:26:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:26:47 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[4 current WS(4)-HttpStream(0)-HttpPoll(0), 5 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(5)-CONNECTED(5)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 141], outboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 17], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 1, completed tasks = 6]
2025-06-06 10:26:49 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [psp4amsk]
2025-06-06 10:27:31 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:27:31 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:27:31 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:27:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:27:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:27:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:27:31 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/.well (truncated)...]
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:27:31 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:27:39 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:27:39 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:27:39 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":3,"username":"quandepzai","co...(truncated)
2025-06-06 10:27:39 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:27:39 [clientInboundChannel-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai started in /topic/conversation/2
2025-06-06 10:27:41 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=wk3ndshh, lookupDestination='/chat/conversation/2'
2025-06-06 10:27:41 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:27:41 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:27:41 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:27:41 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:27:41 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:27:41 [clientInboundChannel-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:27:41 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"1453d0ff-5e19-431c-b999-aae01b81...(truncated)
2025-06-06 10:27:41 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:27:41 [clientInboundChannel-16] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:27:41 [clientInboundChannel-16] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: 123213213
2025-06-06 10:27:41 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:27:41 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:27:41 [clientInboundChannel-15] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:27:41 [clientInboundChannel-15] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:27:41 [clientInboundChannel-15] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=1453d0ff-5e19-431c-b999-aae01b81c98e, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 1453d0ff-5e19-431c-b999-aae01b81c98e marked as read by user 1 in conversation
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:27:42 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:27:46 [clientInboundChannel-14] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:27:46 [clientInboundChannel-14] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:27:46 [clientInboundChannel-14] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":3,"username":"quandepzai","co...(truncated)
2025-06-06 10:27:46 [clientInboundChannel-14] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:27:46 [clientInboundChannel-14] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai started in /topic/conversation/2
2025-06-06 10:27:48 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:27:48 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:27:48 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:27:48 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:27:48 [clientInboundChannel-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:27:53 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=wk3ndshh, lookupDestination='/chat/conversation/2'
2025-06-06 10:27:53 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=wk3ndshh, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:27:53 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:27:53 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:27:53 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:27:53 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:27:53 [clientInboundChannel-13] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:27:53 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"aa9b3b14-b6bf-4a69-841c-2f1efc1a...(truncated)
2025-06-06 10:27:53 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:27:53 [clientInboundChannel-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:27:53 [clientInboundChannel-1] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: 123213
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=aa9b3b14-b6bf-4a69-841c-2f1efc1a30c5, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Message aa9b3b14-b6bf-4a69-841c-2f1efc1a30c5 marked as read by user 1 in conversation
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:27:54 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:28:05 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=5l5nonrf, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:28:05 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:28:05 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":1,"username":"admin","convers...(truncated)
2025-06-06 10:28:05 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:28:05 [clientInboundChannel-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin started in /topic/conversation/2
2025-06-06 10:28:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=5l5nonrf, lookupDestination='/chat/conversation/2'
2025-06-06 10:28:07 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=5l5nonrf, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:28:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:28:07 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:28:07 [clientInboundChannel-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":1,"username":"admin","conversa...(truncated)
2025-06-06 10:28:07 [clientInboundChannel-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:28:07 [clientInboundChannel-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin stopped in /topic/conversation/2
2025-06-06 10:28:07 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"05c81597-354e-4c5e-a13b-3cfb3322...(truncated)
2025-06-06 10:28:07 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:28:07 [clientInboundChannel-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:28:07 [clientInboundChannel-1] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: xcxcx
2025-06-06 10:28:07 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=5l5nonrf, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:28:07 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:28:07 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":1,"username":"admin","conversa...(truncated)
2025-06-06 10:28:07 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:28:07 [clientInboundChannel-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin stopped in /topic/conversation/2
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=05c81597-354e-4c5e-a13b-3cfb3322a377, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 05c81597-354e-4c5e-a13b-3cfb3322a377 marked as read by user 3 in conversation
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:28:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:33:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/refresh
2025-06-06 10:33:04 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:33:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/refresh
2025-06-06 10:33:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/refresh", parameters={}
2025-06-06 10:33:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.AuthController#refreshToken(String)
2025-06-06 10:33:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to ["eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNzQ5MTc4MDc1LCJleHAiOjE3NDk (truncated)..."]
2025-06-06 10:33:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:33:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtAuthResponse(accessToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE (truncated)...]
2025-06-06 10:33:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:33:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180784818
2025-06-06 10:33:04 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:33:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180784818
2025-06-06 10:33:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180784818", parameters={masked}
2025-06-06 10:33:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:33:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180784818
2025-06-06 10:33:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:33:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/638/p5detrcp/websocket
2025-06-06 10:33:04 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:33:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/638/p5detrcp/websocket
2025-06-06 10:33:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/638/p5detrcp/websocket", parameters={}
2025-06-06 10:33:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:33:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/638/p5detrcp/websocket
2025-06-06 10:33:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:33:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=p5detrcp]
2025-06-06 10:33:04 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:33:04 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:33:04 [http-nio-8080-exec-1] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: p5detrcp
2025-06-06 10:33:04 [clientInboundChannel-50] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=p5detrcp
2025-06-06 10:33:04 [websocket-async-7] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session p5detrcp, scheduling retry...
2025-06-06 10:33:04 [clientInboundChannel-53] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=p5detrcp
2025-06-06 10:33:04 [clientInboundChannel-1] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=p5detrcp
2025-06-06 10:33:06 [ForkJoinPool.commonPool-worker-4] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session p5detrcp
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5l5nonrf] closed with CloseStatus[code=1000, reason=null]
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5l5nonrf
2025-06-06 10:35:06 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=5l5nonrf, lookupDestination='/chat/conversation/2/leave'
2025-06-06 10:35:06 [clientInboundChannel-54] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 10:35:06 [clientInboundChannel-54] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 left chat conversation:2 with session 5l5nonrf
2025-06-06 10:35:06 [clientInboundChannel-54] DEBUG c.r.c.controller.ChatController - User 1 left conversation 2 with session 5l5nonrf
2025-06-06 10:35:06 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=5l5nonrf
2025-06-06 10:35:06 [clientInboundChannel-54] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=5l5nonrf
2025-06-06 10:35:06 [clientOutboundChannel-82] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=1, username=admin}, simpHeartbeat=[J@523577d3, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=5l5nonrf}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=5l5nonrf}]
2025-06-06 10:35:06 [websocket-async-8] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session 5l5nonrf
2025-06-06 10:35:06 [websocket-async-8] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session 5l5nonrf marked as offline
2025-06-06 10:35:06 [clientOutboundChannel-95] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=1, username=admin}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=5l5nonrf}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=5l5nonrf}]
2025-06-06 10:35:06 [websocket-async-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"5l5nonrf"}
2025-06-06 10:35:06 [websocket-async-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jc3fv3tc] closed with CloseStatus[code=1000, reason=null]
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jc3fv3tc
2025-06-06 10:35:06 [websocket-async-1] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session jc3fv3tc
2025-06-06 10:35:06 [clientInboundChannel-58] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=jc3fv3tc
2025-06-06 10:35:06 [websocket-async-1] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session jc3fv3tc marked as offline
2025-06-06 10:35:06 [websocket-async-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"jc3fv3tc"}
2025-06-06 10:35:06 [websocket-async-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:06 [clientOutboundChannel-84] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=1, username=admin}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=jc3fv3tc}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=jc3fv3tc}]
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 10:35:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 10:35:06 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 10:35:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 10:35:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:35:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180906566
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180906565
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180906565
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180906566
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180906565", parameters={masked}
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180906566", parameters={masked}
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180906566
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180906565
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:35:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:35:06 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:35:06 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:35:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/149/p35as1ng/websocket
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/149/p35as1ng/websocket
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/149/p35as1ng/websocket", parameters={}
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/149/p35as1ng/websocket
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:35:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=p35as1ng]
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:35:06 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:35:06 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:06 [http-nio-8080-exec-8] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: p35as1ng
2025-06-06 10:35:06 [clientInboundChannel-61] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=p35as1ng
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:35:06 [websocket-async-2] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session p35as1ng, scheduling retry...
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/140/othmosdj/websocket
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/140/othmosdj/websocket
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/140/othmosdj/websocket", parameters={}
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/140/othmosdj/websocket
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:35:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=othmosdj]
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:06 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:06 [http-nio-8080-exec-5] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: othmosdj
2025-06-06 10:35:06 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=othmosdj
2025-06-06 10:35:06 [websocket-async-3] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session othmosdj, scheduling retry...
2025-06-06 10:35:06 [clientInboundChannel-64] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-1 session=othmosdj
2025-06-06 10:35:06 [clientInboundChannel-68] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-2 session=othmosdj
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:35:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:07 [ForkJoinPool.commonPool-worker-5] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session p35as1ng
2025-06-06 10:35:07 [ForkJoinPool.commonPool-worker-6] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session othmosdj
2025-06-06 10:35:14 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [5l5nonrf, jc3fv3tc]
2025-06-06 10:35:15 [clientInboundChannel-66] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=wk3ndshh
2025-06-06 10:35:15 [clientInboundChannel-63] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/leave session=wk3ndshh, lookupDestination='/chat/conversation/2/leave'
2025-06-06 10:35:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wk3ndshh] closed with CloseStatus[code=1000, reason=null]
2025-06-06 10:35:15 [clientInboundChannel-63] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#leaveConversation[2 args]
2025-06-06 10:35:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wk3ndshh
2025-06-06 10:35:15 [websocket-async-4] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session wk3ndshh
2025-06-06 10:35:15 [websocket-async-4] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session wk3ndshh marked as offline
2025-06-06 10:35:15 [clientInboundChannel-69] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=wk3ndshh
2025-06-06 10:35:15 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"wk3ndshh"}
2025-06-06 10:35:15 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:15 [clientOutboundChannel-91] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wk3ndshh}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wk3ndshh}]
2025-06-06 10:35:15 [clientInboundChannel-63] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 left chat conversation:2 with session wk3ndshh
2025-06-06 10:35:15 [clientInboundChannel-63] DEBUG c.r.c.controller.ChatController - User 3 left conversation 2 with session wk3ndshh
2025-06-06 10:35:15 [clientOutboundChannel-96] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpHeartbeat=[J@5b00915b, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wk3ndshh}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wk3ndshh}]
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xq3alub3] closed with CloseStatus[code=1000, reason=null]
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xq3alub3
2025-06-06 10:35:15 [websocket-async-5] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session xq3alub3
2025-06-06 10:35:15 [websocket-async-5] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session xq3alub3 marked as offline
2025-06-06 10:35:15 [websocket-async-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"xq3alub3"}
2025-06-06 10:35:15 [websocket-async-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:15 [clientInboundChannel-60] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=xq3alub3
2025-06-06 10:35:15 [clientOutboundChannel-82] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=3, username=quandepzai}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xq3alub3}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=3, username='quandepzai', email='quan@example.com', fullName='Vu Anh Quan', enabled=true, authorities=[ROLE_USER]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xq3alub3}]
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180915470
2025-06-06 10:35:15 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180915470
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180915471
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180915471
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180915471", parameters={masked}
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 10:35:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180915470", parameters={masked}
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180915471
2025-06-06 10:35:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180915470
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/659/zmrhziww/websocket
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:35:15 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/659/zmrhziww/websocket
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/659/zmrhziww/websocket", parameters={}
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/659/zmrhziww/websocket
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:35:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zmrhziww]
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:35:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/879/low3dgfh/websocket
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/879/low3dgfh/websocket
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/879/low3dgfh/websocket", parameters={}
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/879/low3dgfh/websocket
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:35:15 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:35:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=low3dgfh]
2025-06-06 10:35:15 [http-nio-8080-exec-10] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: zmrhziww
2025-06-06 10:35:15 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=zmrhziww
2025-06-06 10:35:15 [websocket-async-6] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session zmrhziww, scheduling retry...
2025-06-06 10:35:15 [clientInboundChannel-67] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=zmrhziww
2025-06-06 10:35:15 [clientInboundChannel-66] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=zmrhziww
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:15 [http-nio-8080-exec-8] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: low3dgfh
2025-06-06 10:35:15 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=low3dgfh
2025-06-06 10:35:15 [websocket-async-7] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session low3dgfh, scheduling retry...
2025-06-06 10:35:15 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-2 session=zmrhziww
2025-06-06 10:35:15 [clientInboundChannel-60] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=zmrhziww
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:35:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:16 [ForkJoinPool.commonPool-worker-6] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session zmrhziww
2025-06-06 10:35:16 [ForkJoinPool.commonPool-worker-5] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session low3dgfh
2025-06-06 10:35:16 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=othmosdj
2025-06-06 10:35:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=othmosdj] closed with CloseStatus[code=1000, reason=null]
2025-06-06 10:35:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session othmosdj
2025-06-06 10:35:16 [websocket-async-8] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session othmosdj
2025-06-06 10:35:16 [clientInboundChannel-67] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=othmosdj
2025-06-06 10:35:16 [websocket-async-8] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session othmosdj marked as offline
2025-06-06 10:35:16 [websocket-async-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"othmosdj"}
2025-06-06 10:35:16 [clientOutboundChannel-86] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=1, username=admin}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=othmosdj}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=othmosdj}]
2025-06-06 10:35:16 [websocket-async-8] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:16 [clientOutboundChannel-81] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send WebSocket message to client in session othmosdj
java.lang.IllegalStateException: Cannot send a message when session is closed
	at org.springframework.util.Assert.state(Assert.java:79)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.sendMessage(AbstractSockJsSession.java:144)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:190)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:163)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:529)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 10:35:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=p35as1ng] closed with CloseStatus[code=1000, reason=null]
2025-06-06 10:35:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session p35as1ng
2025-06-06 10:35:16 [websocket-async-1] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session p35as1ng
2025-06-06 10:35:16 [clientInboundChannel-66] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=p35as1ng
2025-06-06 10:35:16 [websocket-async-1] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session p35as1ng marked as offline
2025-06-06 10:35:16 [clientOutboundChannel-87] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, userId=1, username=admin}, simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=p35as1ng}], simpUser=UsernamePasswordAuthenticationToken [Principal=UserPrincipal{id=1, username='admin', email='admin@example.com', fullName='Administrator', enabled=true, authorities=[ROLE_USER, ROLE_ADMIN]}, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER, ROLE_ADMIN]], simpSessionId=p35as1ng}]
2025-06-06 10:35:16 [websocket-async-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"p35as1ng"}
2025-06-06 10:35:16 [websocket-async-1] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180917036
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180917036
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180917036", parameters={masked}
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180917036
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180917037
2025-06-06 10:35:17 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:17 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180917037
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180917037", parameters={masked}
2025-06-06 10:35:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180917037
2025-06-06 10:35:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/152/ocrarhpc/websocket
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:35:17 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/152/ocrarhpc/websocket
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/152/ocrarhpc/websocket", parameters={}
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:35:17 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/152/ocrarhpc/websocket
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ocrarhpc]
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:35:17 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/623/w1bgdzst/websocket
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/623/w1bgdzst/websocket
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/623/w1bgdzst/websocket", parameters={}
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@31b5bf26
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/623/w1bgdzst/websocket
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:35:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=w1bgdzst]
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:17 [http-nio-8080-exec-6] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: ocrarhpc
2025-06-06 10:35:17 [clientInboundChannel-65] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=ocrarhpc
2025-06-06 10:35:17 [websocket-async-2] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session ocrarhpc, scheduling retry...
2025-06-06 10:35:17 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-3] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: w1bgdzst
2025-06-06 10:35:17 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=w1bgdzst
2025-06-06 10:35:17 [clientInboundChannel-61] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=w1bgdzst
2025-06-06 10:35:17 [websocket-async-3] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session w1bgdzst, scheduling retry...
2025-06-06 10:35:17 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=w1bgdzst
2025-06-06 10:35:17 [clientInboundChannel-69] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-2 session=w1bgdzst
2025-06-06 10:35:17 [clientInboundChannel-57] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=w1bgdzst
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:35:17 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:17 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-4 session=w1bgdzst
2025-06-06 10:35:17 [clientInboundChannel-64] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=w1bgdzst
2025-06-06 10:35:17 [clientInboundChannel-61] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=w1bgdzst, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:35:17 [clientInboundChannel-61] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:35:17 [clientInboundChannel-61] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:2 with session w1bgdzst
2025-06-06 10:35:17 [clientInboundChannel-61] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 2 with session w1bgdzst
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:35:17 [ForkJoinPool.commonPool-worker-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 4 messages as read in conversation 2
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:35:17 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:18 [ForkJoinPool.commonPool-worker-5] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session ocrarhpc
2025-06-06 10:35:18 [ForkJoinPool.commonPool-worker-6] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session w1bgdzst
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:35:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:19 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-4 session=zmrhziww
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:35:19 [clientInboundChannel-69] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=zmrhziww
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:19 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=zmrhziww, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=9d536ca6-8719-4aad-a9a5-386f20faa656, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:19 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:19 [clientInboundChannel-57] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session zmrhziww
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:19 [clientInboundChannel-57] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session zmrhziww
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=67106a51-ea87-4732-80b7-21af05d669dd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=18ecee51-f6b0-481a-b245-cd3ea296c23c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=651d099f-3135-41e3-915b-8be0b28cd869, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:19 [ForkJoinPool.commonPool-worker-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 1 messages as read in conversation 2
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 651d099f-3135-41e3-915b-8be0b28cd869 marked as read by user 1 in conversation
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c marked as read by user 1 in conversation
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 marked as read by user 1 in conversation
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd marked as read by user 1 in conversation
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:19 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 marked as read by user 1 in conversation
2025-06-06 10:35:19 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd marked as read by user 1 in conversation
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e2be921c-9ca7-44e1-a318-303d5981047f, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=1453d0ff-5e19-431c-b999-aae01b81c98e, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=aa9b3b14-b6bf-4a69-841c-2f1efc1a30c5, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message aa9b3b14-b6bf-4a69-841c-2f1efc1a30c5 marked as read by user 1 in conversation
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 1453d0ff-5e19-431c-b999-aae01b81c98e marked as read by user 1 in conversation
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e2be921c-9ca7-44e1-a318-303d5981047f marked as read by user 1 in conversation
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:19 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:35:19 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:35:19 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3 in conversation
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3 in conversation
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3 in conversation
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3 in conversation
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3 in conversation
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3 in conversation
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=05c81597-354e-4c5e-a13b-3cfb3322a377, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3 in conversation
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3 in conversation
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 05c81597-354e-4c5e-a13b-3cfb3322a377 marked as read by user 3 in conversation
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:21 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=zmrhziww, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:21 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:21 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":3,"username":"quandepzai","co...(truncated)
2025-06-06 10:35:21 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:21 [clientInboundChannel-70] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai started in /topic/conversation/2
2025-06-06 10:35:22 [clientInboundChannel-64] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=zmrhziww, lookupDestination='/chat/conversation/2'
2025-06-06 10:35:22 [clientInboundChannel-64] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:35:22 [clientInboundChannel-68] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=zmrhziww, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:22 [clientInboundChannel-68] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:22 [clientInboundChannel-68] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:35:22 [clientInboundChannel-68] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:22 [clientInboundChannel-68] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:35:22 [clientInboundChannel-64] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"233a2a9b-5e99-42c1-80e2-25981ba8...(truncated)
2025-06-06 10:35:22 [clientInboundChannel-64] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:22 [clientInboundChannel-64] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:35:22 [clientInboundChannel-64] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: cxcxc
2025-06-06 10:35:23 [clientInboundChannel-66] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=zmrhziww, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:23 [clientInboundChannel-66] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:23 [clientInboundChannel-66] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:35:23 [clientInboundChannel-66] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:23 [clientInboundChannel-66] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=233a2a9b-5e99-42c1-80e2-25981ba89c4f, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 233a2a9b-5e99-42c1-80e2-25981ba89c4f marked as read by user 1 in conversation
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:23 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:23 [clientInboundChannel-69] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=w1bgdzst, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:23 [clientInboundChannel-69] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:23 [clientInboundChannel-69] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":1,"username":"admin","convers...(truncated)
2025-06-06 10:35:23 [clientInboundChannel-69] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:23 [clientInboundChannel-69] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin started in /topic/conversation/2
2025-06-06 10:35:24 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 4 sessions: [wk3ndshh, othmosdj, p35as1ng, xq3alub3]
2025-06-06 10:35:25 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=w1bgdzst, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:25 [clientInboundChannel-57] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:25 [clientInboundChannel-57] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":1,"username":"admin","conversa...(truncated)
2025-06-06 10:35:25 [clientInboundChannel-57] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:25 [clientInboundChannel-57] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin stopped in /topic/conversation/2
2025-06-06 10:35:26 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=w1bgdzst, lookupDestination='/chat/conversation/2'
2025-06-06 10:35:26 [clientInboundChannel-62] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=w1bgdzst, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:26 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:35:26 [clientInboundChannel-62] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:26 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":1,"username":"admin","conversa...(truncated)
2025-06-06 10:35:26 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:26 [clientInboundChannel-62] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin stopped in /topic/conversation/2
2025-06-06 10:35:26 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"aa2b34ba-6713-4c1f-9959-a51d830c...(truncated)
2025-06-06 10:35:26 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:26 [clientInboundChannel-70] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:35:26 [clientInboundChannel-70] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: 123123
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=aa2b34ba-6713-4c1f-9959-a51d830c0bb9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message aa2b34ba-6713-4c1f-9959-a51d830c0bb9 marked as read by user 3 in conversation
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:31 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:35:31 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:31 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:35:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:35:31 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:35:31 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:35:31 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/.well (truncated)...]
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:35:31 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:35:44 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=zmrhziww, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:44 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:44 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":3,"username":"quandepzai","co...(truncated)
2025-06-06 10:35:44 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:44 [clientInboundChannel-70] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai started in /topic/conversation/2
2025-06-06 10:35:47 [clientInboundChannel-59] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=zmrhziww, lookupDestination='/chat/conversation/2'
2025-06-06 10:35:47 [clientInboundChannel-59] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:35:47 [clientInboundChannel-65] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=zmrhziww, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:47 [clientInboundChannel-65] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:47 [clientInboundChannel-65] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:35:47 [clientInboundChannel-65] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:47 [clientInboundChannel-65] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:35:47 [clientInboundChannel-63] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=zmrhziww, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:47 [clientInboundChannel-63] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:47 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:35:47 [clientInboundChannel-63] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:47 [clientInboundChannel-63] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:35:47 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"e1317ae8-3758-400f-8ce3-270e6a60...(truncated)
2025-06-06 10:35:47 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:47 [clientInboundChannel-59] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:35:47 [clientInboundChannel-59] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: 123123
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e1317ae8-3758-400f-8ce3-270e6a607a37, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"readerName":"Admi...(truncated)
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e1317ae8-3758-400f-8ce3-270e6a607a37 marked as read by user 1 in conversation
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:35:49 [clientInboundChannel-61] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=w1bgdzst, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:49 [clientInboundChannel-61] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:49 [clientInboundChannel-61] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":1,"username":"admin","convers...(truncated)
2025-06-06 10:35:49 [clientInboundChannel-61] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:49 [clientInboundChannel-61] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin started in /topic/conversation/2
2025-06-06 10:35:51 [clientInboundChannel-62] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=w1bgdzst, lookupDestination='/chat/conversation/2'
2025-06-06 10:35:51 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=w1bgdzst, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:51 [clientInboundChannel-62] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:35:51 [clientInboundChannel-70] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:51 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":1,"username":"admin","conversa...(truncated)
2025-06-06 10:35:51 [clientInboundChannel-70] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:51 [clientInboundChannel-70] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin stopped in /topic/conversation/2
2025-06-06 10:35:51 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"c76f555e-ee38-443e-bff9-4a303eea...(truncated)
2025-06-06 10:35:51 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:51 [clientInboundChannel-62] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:35:51 [clientInboundChannel-62] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: 123123213
2025-06-06 10:35:51 [clientInboundChannel-69] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=w1bgdzst, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:35:51 [clientInboundChannel-69] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:35:51 [clientInboundChannel-69] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":1,"username":"admin","conversa...(truncated)
2025-06-06 10:35:51 [clientInboundChannel-69] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:35:51 [clientInboundChannel-69] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin stopped in /topic/conversation/2
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=c76f555e-ee38-443e-bff9-4a303eead375, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"readerName":"Vu A...(truncated)
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message c76f555e-ee38-443e-bff9-4a303eead375 marked as read by user 3 in conversation
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:35:52 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:00 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-06 10:36:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session w1bgdzst with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=w1bgdzst]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=w1bgdzst] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session w1bgdzst
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session low3dgfh with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [clientInboundChannel-56] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=w1bgdzst
2025-06-06 10:36:00 [websocket-async-4] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session w1bgdzst
2025-06-06 10:36:00 [websocket-async-4] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session w1bgdzst marked as offline
2025-06-06 10:36:00 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"w1bgdzst"}
2025-06-06 10:36:00 [websocket-async-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=low3dgfh]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=low3dgfh] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session low3dgfh
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session p5detrcp with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [websocket-async-5] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session low3dgfh
2025-06-06 10:36:00 [clientInboundChannel-59] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=low3dgfh
2025-06-06 10:36:00 [websocket-async-5] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session low3dgfh marked as offline
2025-06-06 10:36:00 [websocket-async-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"low3dgfh"}
2025-06-06 10:36:00 [websocket-async-5] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=p5detrcp]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=p5detrcp] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session p5detrcp
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session zmrhziww with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [websocket-async-6] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session p5detrcp
2025-06-06 10:36:00 [clientInboundChannel-61] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=p5detrcp
2025-06-06 10:36:00 [websocket-async-6] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session p5detrcp marked as offline
2025-06-06 10:36:00 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"p5detrcp"}
2025-06-06 10:36:00 [websocket-async-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 1 sessions.
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=zmrhziww]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zmrhziww] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zmrhziww
2025-06-06 10:36:00 [websocket-async-7] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session zmrhziww
2025-06-06 10:36:00 [websocket-async-7] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session zmrhziww marked as offline
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ocrarhpc with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [clientInboundChannel-66] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=zmrhziww
2025-06-06 10:36:00 [websocket-async-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":3,"username":"quandepzai","status":"OFFLINE","sessionId":"zmrhziww"}
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ocrarhpc]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ocrarhpc] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ocrarhpc
2025-06-06 10:36:00 [clientInboundChannel-62] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=ocrarhpc
2025-06-06 10:36:00 [websocket-async-8] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session ocrarhpc
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 10:36:00 [websocket-async-8] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session ocrarhpc marked as offline
2025-06-06 10:36:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-06-06 10:36:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@172236ba]]
2025-06-06 10:36:00 [websocket-async-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/user-status session=null payload={"userId":1,"username":"admin","status":"OFFLINE","sessionId":"ocrarhpc"}
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@172236ba]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@172236ba]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:36:00 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 10:36:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown initiated...
2025-06-06 10:36:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown completed.
2025-06-06 10:36:03 [main] INFO  c.r.chatapp.ChatappApplication - Starting ChatappApplication using Java 17.0.11 with PID 10480 (D:\job\chatapp\build\classes\java\main started by dskva in D:\job\chatapp)
2025-06-06 10:36:03 [main] DEBUG c.r.chatapp.ChatappApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-06 10:36:03 [main] INFO  c.r.chatapp.ChatappApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 168 ms. Found 11 JPA repository interfaces.
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.ConversationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.FileAttachmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageDeliveryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageReactionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.MessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomMemberRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.RoomRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserContactRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.revotech.chatapp.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-06 10:36:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2025-06-06 10:36:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-06 10:36:05 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-06 10:36:05 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-06 10:36:05 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-06 10:36:05 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2367 ms
2025-06-06 10:36:05 [main] INFO  c.r.chatapp.security.JwtTokenUtil - JWT configuration initialized - Expiration: 3600s, Refresh: 86400s
2025-06-06 10:36:05 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-06 10:36:05 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-06 10:36:05 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-06 10:36:06 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-06 10:36:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Starting...
2025-06-06 10:36:06 [main] INFO  com.zaxxer.hikari.pool.HikariPool - ChatAppHikariCP - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f5c0eda
2025-06-06 10:36:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Start completed.
2025-06-06 10:36:06 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.7.17 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-06-06 10:36:06 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-06 10:36:06 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (ChatAppHikariCP)']
	Database driver: undefined/unknown
	Database version: 5.7.17
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-06 10:36:07 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-06 10:36:07 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 10:36:07 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-06 10:36:10 [main] INFO  c.r.c.config.RateLimitingConfig - Rate limiting is disabled
2025-06-06 10:36:10 [main] DEBUG c.r.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-06 10:36:10 [main] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-06 10:36:10 [main] DEBUG c.r.c.security.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-06-06 10:36:10 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-06 10:36:10 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-06 10:36:11 [main] INFO  c.r.c.s.impl.UserSessionServiceImpl - UserSessionService initialized - Redis available: false
2025-06-06 10:36:11 [main] WARN  c.r.chatapp.config.EncryptionConfig - No encryption key provided. Generated new key: sIIpN7+btJbm7bvGWQvc67KMQG2k5i3UaA8fvSDy4Xs=
2025-06-06 10:36:11 [main] WARN  c.r.chatapp.config.EncryptionConfig - Please save this key and add it to your configuration!
2025-06-06 10:36:12 [main] INFO  c.r.chatapp.config.CacheConfig - Redis Cache configuration initialized - Default TTL: 600s, User TTL: 1800s, Message TTL: 3600s
2025-06-06 10:36:12 [main] INFO  c.revotech.chatapp.config.CorsConfig - CORS configured - Origins: [http://localhost:3000, http://localhost:3001, http://127.0.0.1:3000], Methods: [GET, POST, PUT, DELETE, OPTIONS], Allow credentials: true
2025-06-06 10:36:12 [main] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**] in 'stompWebSocketHandlerMapping'
2025-06-06 10:36:12 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-06-06 10:36:12 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 70 mappings in 'requestMappingHandlerMapping'
2025-06-06 10:36:12 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-06-06 10:36:12 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-06 10:36:12 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.AuthController:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ChatController:
	{[MESSAGE],[/chat/conversation/{conversationId}]}: sendMessageToConversation(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/typing/conversation/{conversationId}]}: notifyTypingInConversation(Long,TypingNotification,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/enter]}: enterConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/enter]}: enterRoom(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/typing/room/{roomId}]}: notifyTypingInRoom(Long,TypingNotification,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/conversation/{conversationId}/leave]}: leaveConversation(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}]}: sendMessageToRoom(Long,SendMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat/room/{roomId}/leave]}: leaveRoom(Long,SimpMessageHeaderAccessor)
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.ConversationController:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.FileController:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.MessageController:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.NotificationController:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.RoomController:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.r.c.c.UserController:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-06-06 10:36:13 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-06-06 10:36:13 [main] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 10:36:13 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 10:36:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-06-06 10:36:13 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@737c5ebb]
2025-06-06 10:36:13 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@737c5ebb]
2025-06-06 10:36:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@737c5ebb]]
2025-06-06 10:36:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-06-06 10:36:13 [main] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:36:13 [main] DEBUG org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:36:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-06 10:36:13 [main] INFO  c.r.chatapp.ChatappApplication - Started ChatappApplication in 11.283 seconds (process running for 11.849)
2025-06-06 10:36:14 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-06 10:36:14 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2e8cb8a7
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@450cd433
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-06-06 10:36:14 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /.well-known/appspecific/com.chrome.devtools.json
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:36:14 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:36:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:36:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:36:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:36:14 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/.well (truncated)...]
2025-06-06 10:36:14 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:36:14 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:36:14 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:36:14 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180974460
2025-06-06 10:36:14 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180974461
2025-06-06 10:36:14 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180974460
2025-06-06 10:36:14 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180974461
2025-06-06 10:36:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180974460", parameters={masked}
2025-06-06 10:36:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180974461", parameters={masked}
2025-06-06 10:36:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@85b4160
2025-06-06 10:36:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@85b4160
2025-06-06 10:36:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180974461
2025-06-06 10:36:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180974460
2025-06-06 10:36:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/373/ndu21mhq/websocket
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:36:14 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/373/ndu21mhq/websocket
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/373/ndu21mhq/websocket", parameters={}
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@85b4160
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/373/ndu21mhq/websocket
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:36:14 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:36:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:14 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:14 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/579/ks4vbmnk/websocket
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/579/ks4vbmnk/websocket
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/579/ks4vbmnk/websocket", parameters={}
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@85b4160
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/579/ks4vbmnk/websocket
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ndu21mhq]
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ks4vbmnk]
2025-06-06 10:36:14 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:14 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:15 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-4] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: ndu21mhq
2025-06-06 10:36:15 [http-nio-8080-exec-3] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: admin with ID: 1 for session: ks4vbmnk
2025-06-06 10:36:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:36:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:36:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:36:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:36:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:36:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:36:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:36:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:36:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:36:15 [clientInboundChannel-3] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=ndu21mhq
2025-06-06 10:36:15 [clientInboundChannel-5] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=admin session=ks4vbmnk
2025-06-06 10:36:15 [websocket-async-1] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session ndu21mhq, scheduling retry...
2025-06-06 10:36:15 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-3 session=ks4vbmnk
2025-06-06 10:36:15 [clientInboundChannel-8] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-0 session=ks4vbmnk
2025-06-06 10:36:15 [websocket-async-2] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session ks4vbmnk, scheduling retry...
2025-06-06 10:36:15 [clientInboundChannel-14] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-2 session=ks4vbmnk
2025-06-06 10:36:15 [clientInboundChannel-11] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-1 session=ks4vbmnk
2025-06-06 10:36:15 [http-nio-8080-exec-8] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-06-06 10:36:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:36:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:36:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:36:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:36:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:36:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:15 [boundedElastic-1] WARN  o.s.b.a.d.r.RedisReactiveHealthIndicator - Redis health check failed
org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1858)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1789)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1586)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1566)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1527)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1563)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedReactiveConnection(LettuceConnectionFactory.java:1274)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:1149)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getReactiveConnection(LettuceConnectionFactory.java:120)
	at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67)
	at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:63)
	at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:41)
	at io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:354)
	at io.lettuce.core.RedisClient.connect(RedisClient.java:220)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)
	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1787)
	... 16 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:6379
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:336)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:339)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:784)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-06-06 10:36:16 [ForkJoinPool.commonPool-worker-2] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session ndu21mhq
2025-06-06 10:36:16 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session ks4vbmnk
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.view.InternalResourceView - View name [forward:], model {}
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.view.InternalResourceView - Forwarding to [index.html]
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /index.html
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /index.html
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "FORWARD" dispatch for GET "/index.html", parameters={}
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "FORWARD" dispatch, status 200
2025-06-06 10:36:17 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/style.css
2025-06-06 10:36:17 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/style.css
2025-06-06 10:36:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/style.css", parameters={}
2025-06-06 10:36:17 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/app.js
2025-06-06 10:36:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:36:17 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:17 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/pin.js
2025-06-06 10:36:17 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/app.js
2025-06-06 10:36:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/app.js", parameters={}
2025-06-06 10:36:17 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:17 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:36:17 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/pin.js
2025-06-06 10:36:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/pin.js", parameters={}
2025-06-06 10:36:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-06 10:36:17 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:17 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:36:17 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:36:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:36:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:17 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:17 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:17 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:17 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:17 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:36:18 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:36:18 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:36:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:36:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180977993
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-06-06 10:36:18 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/info?t=1749180977992
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:18 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-06-06 10:36:18 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180977992
2025-06-06 10:36:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180977992", parameters={masked}
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-06-06 10:36:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@85b4160
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/info?t=1749180977993
2025-06-06 10:36:18 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180977992
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/info?t=1749180977993", parameters={masked}
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-06-06 10:36:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@85b4160
2025-06-06 10:36:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1749180977993
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-06-06 10:36:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Fri Jun 06 10:36:18 ICT 2025, status=403, error=Forbidden, message=Forbidden, path=/favic (truncated)...]
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations?page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/846/fyctnx23/websocket
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-06-06 10:36:18 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/846/fyctnx23/websocket
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/846/fyctnx23/websocket", parameters={}
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@85b4160
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/846/fyctnx23/websocket
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fyctnx23]
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/users/contacts?status=ACCEPTED&page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users/contacts?status=ACCEPTED&page=0&size=50", parameters={masked}
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.UserController#getContacts(ContactStatus, int, int, UserPrincipal)
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 0 containing UNKNOWN instances]
2025-06-06 10:36:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations?page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations?page=0&size=50", parameters={masked}
2025-06-06 10:36:18 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getUserConversations(int, int, UserPrincipal)
2025-06-06 10:36:18 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /ws/550/3hkk2n13/websocket
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rooms?page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-06 10:36:18 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /ws/550/3hkk2n13/websocket
2025-06-06 10:36:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/ws/550/3hkk2n13/websocket", parameters={}
2025-06-06 10:36:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@85b4160
2025-06-06 10:36:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/550/3hkk2n13/websocket
2025-06-06 10:36:18 [http-nio-8080-exec-3] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: fyctnx23
2025-06-06 10:36:18 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 101 SWITCHING_PROTOCOLS
2025-06-06 10:36:18 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=fyctnx23
2025-06-06 10:36:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3hkk2n13]
2025-06-06 10:36:18 [websocket-async-3] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session fyctnx23, scheduling retry...
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ConversationListResponse(conversations=[ConversationDTO(id=2, title=null, type=DIRECT, participant=U (truncated)...]
2025-06-06 10:36:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/rooms?page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/rooms?page=0&size=50", parameters={masked}
2025-06-06 10:36:18 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.RoomController#getUserRooms(int, int, UserPrincipal)
2025-06-06 10:36:18 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-7] INFO  c.r.chatapp.config.WebSocketConfig - WebSocket authenticated user: quandepzai with ID: 3 for session: 3hkk2n13
2025-06-06 10:36:18 [clientInboundChannel-5] DEBUG org.springframework.web.SimpLogging - Processing CONNECT user=quandepzai session=3hkk2n13
2025-06-06 10:36:18 [websocket-async-4] WARN  c.r.c.l.WebSocketEventListener - Session attributes is null for session 3hkk2n13, scheduling retry...
2025-06-06 10:36:18 [clientInboundChannel-10] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/user-status id=sub-1 session=3hkk2n13
2025-06-06 10:36:18 [clientInboundChannel-14] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-2 session=3hkk2n13
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.RoomDTO instances]
2025-06-06 10:36:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:18 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-3 session=3hkk2n13
2025-06-06 10:36:18 [clientInboundChannel-16] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-4 session=3hkk2n13
2025-06-06 10:36:18 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=3hkk2n13, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:36:18 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:18 [clientInboundChannel-4] DEBUG c.r.c.s.impl.MessageServiceImpl - User 3 entered chat conversation:2 with session 3hkk2n13
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:18 [clientInboundChannel-4] DEBUG c.r.c.controller.ChatController - User 3 entered conversation 2 with session 3hkk2n13
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:36:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:36:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:19 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:36:19 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:19 [ForkJoinPool.commonPool-worker-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 3 messages as read in conversation 2
2025-06-06 10:36:19 [ForkJoinPool.commonPool-worker-1] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session fyctnx23
2025-06-06 10:36:19 [ForkJoinPool.commonPool-worker-2] ERROR c.r.c.l.WebSocketEventListener - Failed to establish connection after 3 retries for session 3hkk2n13
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:36:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=4160824a-ced4-4e8f-b626-016c8784a7db, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=3c97df02-713f-4be7-b580-eae32c592992, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=724b112c-d308-44b2-bc26-84e01078d21d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=8d65be0b-3aee-4136-a0df-a5fcea8820c9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=dc50f85e-393e-4b2b-92a0-f53c173b872d, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b0c76bb8-010f-4ece-aa86-36dba461db5c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"3c97d...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"8d65b...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"b0c76...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"41608...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"dc50f...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"724b1...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 8d65be0b-3aee-4136-a0df-a5fcea8820c9 marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 724b112c-d308-44b2-bc26-84e01078d21d marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message dc50f85e-393e-4b2b-92a0-f53c173b872d marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b0c76bb8-010f-4ece-aa86-36dba461db5c marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 4160824a-ced4-4e8f-b626-016c8784a7db marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 3c97df02-713f-4be7-b580-eae32c592992 marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=05c81597-354e-4c5e-a13b-3cfb3322a377, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=c76f555e-ee38-443e-bff9-4a303eead375, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e4503b50-8a13-4765-b77e-8e1a7c08e199, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=b09a4099-8bc5-4ae3-9d72-780873310d76, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=aa2b34ba-6713-4c1f-9959-a51d830c0bb9, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"05c81...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"c76f5...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 05c81597-354e-4c5e-a13b-3cfb3322a377 marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message c76f555e-ee38-443e-bff9-4a303eead375 marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"b09a4...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message b09a4099-8bc5-4ae3-9d72-780873310d76 marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"aa2b3...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Message aa2b34ba-6713-4c1f-9959-a51d830c0bb9 marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"e4503...(truncated)
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e4503b50-8a13-4765-b77e-8e1a7c08e199 marked as read by user 3 in conversation
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:20 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:25 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /topic/conversation/2 id=sub-4 session=ks4vbmnk
2025-06-06 10:36:25 [clientInboundChannel-2] DEBUG org.springframework.web.SimpLogging - Processing SUBSCRIBE /user/queue/message-status id=sub-5 session=ks4vbmnk
2025-06-06 10:36:25 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2/enter session=ks4vbmnk, lookupDestination='/chat/conversation/2/enter'
2025-06-06 10:36:25 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#enterConversation[2 args]
2025-06-06 10:36:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:36:25 [clientInboundChannel-10] DEBUG c.r.c.s.impl.MessageServiceImpl - User 1 entered chat conversation:2 with session ks4vbmnk
2025-06-06 10:36:25 [clientInboundChannel-10] DEBUG c.r.c.controller.ChatController - User 1 entered conversation 2 with session ks4vbmnk
2025-06-06 10:36:25 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:25 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:25 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/conversations/2/messages?page=0&size=50
2025-06-06 10:36:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/conversations/2/messages?page=0&size=50", parameters={masked}
2025-06-06 10:36:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.ConversationController#getConversationMessages(Long, int, int, UserPrincipal)
2025-06-06 10:36:26 [ForkJoinPool.commonPool-worker-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Auto-marked 6 messages as read in conversation 2
2025-06-06 10:36:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.revotech.chatapp.model.dto.ChatMessage instances]
2025-06-06 10:36:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/messages/pinned?conversationId=2
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/messages/pinned?conversationId=2
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/messages/pinned?conversationId=2", parameters={masked}
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#getPinnedMessages(Long, Long, UserPrincipal)
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[ChatMessage(id=b09a4099-8bc5-4ae3-9d72-780873310d76, content=123213213213, senderId=1, senderName=A (truncated)...]
2025-06-06 10:36:26 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=651d099f-3135-41e3-915b-8be0b28cd869, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=67106a51-ea87-4732-80b7-21af05d669dd, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=18ecee51-f6b0-481a-b245-cd3ea296c23c, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"651d0...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 651d099f-3135-41e3-915b-8be0b28cd869 marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=9d536ca6-8719-4aad-a9a5-386f20faa656, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"18ece...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 18ecee51-f6b0-481a-b245-cd3ea296c23c marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e2be921c-9ca7-44e1-a318-303d5981047f, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"498ae...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 498ae16e-bd54-4a5e-b5e9-8bd8ba53eebd marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"e2be9...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e2be921c-9ca7-44e1-a318-303d5981047f marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=1453d0ff-5e19-431c-b999-aae01b81c98e, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"1453d...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 1453d0ff-5e19-431c-b999-aae01b81c98e marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"67106...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 67106a51-ea87-4732-80b7-21af05d669dd marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"d1a2c...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG c.r.c.s.impl.MessageServiceImpl - Message d1a2ccb7-a8ed-42d9-aa80-1a5994b2c093 marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=233a2a9b-5e99-42c1-80e2-25981ba89c4f, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=e1317ae8-3758-400f-8ce3-270e6a607a37, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"e1317...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message e1317ae8-3758-400f-8ce3-270e6a607a37 marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"233a2...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 233a2a9b-5e99-42c1-80e2-25981ba89c4f marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"9d536...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 9d536ca6-8719-4aad-a9a5-386f20faa656 marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=aa9b3b14-b6bf-4a69-841c-2f1efc1a30c5, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"aa9b3...(truncated)
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG c.r.c.s.impl.MessageServiceImpl - Message aa9b3b14-b6bf-4a69-841c-2f1efc1a30c5 marked as read by user 1 in conversation
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:27 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:31 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=ks4vbmnk, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:36:31 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:36:31 [clientInboundChannel-12] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":1,"username":"admin","convers...(truncated)
2025-06-06 10:36:31 [clientInboundChannel-12] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:31 [clientInboundChannel-12] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin started in /topic/conversation/2
2025-06-06 10:36:33 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=ks4vbmnk, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:36:33 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:36:33 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":1,"username":"admin","conversa...(truncated)
2025-06-06 10:36:33 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:33 [clientInboundChannel-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin stopped in /topic/conversation/2
2025-06-06 10:36:33 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=ks4vbmnk, lookupDestination='/chat/conversation/2'
2025-06-06 10:36:33 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:36:33 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=ks4vbmnk, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:36:33 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:36:33 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":1,"username":"admin","conversa...(truncated)
2025-06-06 10:36:33 [clientInboundChannel-7] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:33 [clientInboundChannel-7] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: admin stopped in /topic/conversation/2
2025-06-06 10:36:33 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"52e73c59-10c4-41a3-a584-d3471877...(truncated)
2025-06-06 10:36:33 [clientInboundChannel-4] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:33 [clientInboundChannel-4] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:36:33 [clientInboundChannel-4] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: 123123213
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: quandepzai
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: quandepzai
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: quandepzai
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=52e73c59-10c4-41a3-a584-d3471877ac47, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/admin/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":3,"messageId":"52e73...(truncated)
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 52e73c59-10c4-41a3-a584-d3471877ac47 marked as read by user 3 in conversation
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:36:35 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=3hkk2n13, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:36:35 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:36:35 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"START","data":{"userId":3,"username":"quandepzai","co...(truncated)
2025-06-06 10:36:35 [clientInboundChannel-13] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:35 [clientInboundChannel-13] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai started in /topic/conversation/2
2025-06-06 10:36:37 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/conversation/2 session=3hkk2n13, lookupDestination='/chat/conversation/2'
2025-06-06 10:36:37 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=3hkk2n13, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:36:37 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessageToConversation[3 args]
2025-06-06 10:36:37 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:36:37 [clientInboundChannel-12] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:36:37 [clientInboundChannel-12] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:37 [clientInboundChannel-12] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:36:37 [clientInboundChannel-10] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"MESSAGE","action":"SEND","data":{"id":"022255b2-4b43-4248-b155-acdb2b17...(truncated)
2025-06-06 10:36:37 [clientInboundChannel-10] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:37 [clientInboundChannel-10] DEBUG c.r.c.s.impl.MessageServiceImpl - Message broadcasted to /topic/conversation/2
2025-06-06 10:36:37 [clientInboundChannel-10] INFO  c.r.c.controller.ChatController - Message sent to conversation 2: 123213213
2025-06-06 10:36:38 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/typing/conversation/2 session=3hkk2n13, lookupDestination='/chat/typing/conversation/2'
2025-06-06 10:36:38 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#notifyTypingInConversation[3 args]
2025-06-06 10:36:38 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/topic/conversation/2 session=null payload={"type":"TYPING","action":"STOP","data":{"userId":3,"username":"quandepzai","con...(truncated)
2025-06-06 10:36:38 [clientInboundChannel-6] DEBUG org.springframework.web.SimpLogging - Broadcasting to 2 sessions.
2025-06-06 10:36:38 [clientInboundChannel-6] DEBUG c.r.c.s.impl.MessageServiceImpl - Typing notification sent: quandepzai stopped in /topic/conversation/2
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/messages/read
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Loading user by username: admin
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG c.r.c.s.UserDetailsServiceImpl - Successfully loaded user: admin
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG c.r.c.s.JwtAuthenticationFilter - Set Authentication for user: admin
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/messages/read
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/messages/read", parameters={}
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.revotech.chatapp.controller.MessageController#markMessageAsRead(MarkMessageReadRequest, UserPrincipal)
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MarkMessageReadRequest(messageId=022255b2-4b43-4248-b155-acdb2b17b9a6, roomId=null, conversationId=2 (truncated)...]
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG org.springframework.web.SimpLogging - Processing MESSAGE destination=/user/quandepzai/queue/read-receipts session=null payload={"type":"MESSAGE_READ","action":"UPDATE","data":{"readerId":1,"messageId":"02225...(truncated)
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG c.r.c.s.impl.MessageServiceImpl - Message 022255b2-4b43-4248-b155-acdb2b17b9a6 marked as read by user 1 in conversation
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-06-06 10:36:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-06 10:37:13 [MessageBroker-6] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[4 current WS(4)-HttpStream(0)-HttpPoll(0), 4 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(4)-CONNECTED(4)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 96], outboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 24], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 1, completed tasks = 12]
2025-06-06 10:47:54 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-06 10:48:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ks4vbmnk with CloseStatus[code=1001, reason=null]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ks4vbmnk]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ks4vbmnk] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ks4vbmnk
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 3hkk2n13 with CloseStatus[code=1001, reason=null]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=3hkk2n13]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3hkk2n13] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3hkk2n13
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session ndu21mhq with CloseStatus[code=1001, reason=null]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=ndu21mhq]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ndu21mhq] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ndu21mhq
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session fyctnx23 with CloseStatus[code=1001, reason=null]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=fyctnx23]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:778)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:575)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:48:00 [clientInboundChannel-112] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=ks4vbmnk
2025-06-06 10:48:00 [clientInboundChannel-115] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=3hkk2n13
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:271)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:272)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1634)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1037)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1426)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1352)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1323)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fyctnx23] closed with CloseStatus[code=1001, reason=null]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fyctnx23
2025-06-06 10:48:00 [clientInboundChannel-118] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=ndu21mhq
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-06-06 10:48:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@737c5ebb]]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@737c5ebb]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@737c5ebb]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:48:00 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-06-06 10:48:00 [clientInboundChannel-90] DEBUG org.springframework.web.SimpLogging - Processing DISCONNECT session=fyctnx23
2025-06-06 10:48:00 [websocket-async-6] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session 3hkk2n13
2025-06-06 10:48:00 [websocket-async-5] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session ks4vbmnk
2025-06-06 10:48:00 [websocket-async-6] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session 3hkk2n13 marked as offline
2025-06-06 10:48:00 [websocket-async-5] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session ks4vbmnk marked as offline
2025-06-06 10:48:00 [websocket-async-7] INFO  c.r.c.l.WebSocketEventListener - User admin disconnected from session ndu21mhq
2025-06-06 10:48:00 [websocket-async-7] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 1 session ndu21mhq marked as offline
2025-06-06 10:48:00 [websocket-async-8] INFO  c.r.c.l.WebSocketEventListener - User quandepzai disconnected from session fyctnx23
2025-06-06 10:48:00 [websocket-async-8] DEBUG c.r.c.s.impl.UserSessionServiceImpl - User 3 session fyctnx23 marked as offline
2025-06-06 10:48:00 [websocket-async-7] ERROR o.s.a.i.SimpleAsyncUncaughtExceptionHandler - Unexpected exception occurred invoking async method: public void com.revotech.chatapp.listener.WebSocketEventListener.handleWebSocketDisconnectListener(org.springframework.web.socket.messaging.SessionDisconnectEvent)
java.lang.NoClassDefFoundError: com/revotech/chatapp/model/dto/OnlineUser
	at com.revotech.chatapp.listener.WebSocketEventListener.processDisconnection(WebSocketEventListener.java:150)
	at com.revotech.chatapp.listener.WebSocketEventListener.handleWebSocketDisconnectListener(WebSocketEventListener.java:75)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.lang.ClassNotFoundException: com.revotech.chatapp.model.dto.OnlineUser
	... 14 common frames omitted
2025-06-06 10:48:00 [websocket-async-8] ERROR o.s.a.i.SimpleAsyncUncaughtExceptionHandler - Unexpected exception occurred invoking async method: public void com.revotech.chatapp.listener.WebSocketEventListener.handleWebSocketDisconnectListener(org.springframework.web.socket.messaging.SessionDisconnectEvent)
java.lang.NoClassDefFoundError: com/revotech/chatapp/model/dto/OnlineUser
	at com.revotech.chatapp.listener.WebSocketEventListener.processDisconnection(WebSocketEventListener.java:150)
	at com.revotech.chatapp.listener.WebSocketEventListener.handleWebSocketDisconnectListener(WebSocketEventListener.java:75)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.lang.ClassNotFoundException: com.revotech.chatapp.model.dto.OnlineUser
	... 14 common frames omitted
2025-06-06 10:48:00 [websocket-async-5] ERROR o.s.a.i.SimpleAsyncUncaughtExceptionHandler - Unexpected exception occurred invoking async method: public void com.revotech.chatapp.listener.WebSocketEventListener.handleWebSocketDisconnectListener(org.springframework.web.socket.messaging.SessionDisconnectEvent)
java.lang.NoClassDefFoundError: com/revotech/chatapp/model/dto/OnlineUser
	at com.revotech.chatapp.listener.WebSocketEventListener.processDisconnection(WebSocketEventListener.java:150)
	at com.revotech.chatapp.listener.WebSocketEventListener.handleWebSocketDisconnectListener(WebSocketEventListener.java:75)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.lang.ClassNotFoundException: com.revotech.chatapp.model.dto.OnlineUser
	... 14 common frames omitted
2025-06-06 10:48:00 [websocket-async-6] ERROR o.s.a.i.SimpleAsyncUncaughtExceptionHandler - Unexpected exception occurred invoking async method: public void com.revotech.chatapp.listener.WebSocketEventListener.handleWebSocketDisconnectListener(org.springframework.web.socket.messaging.SessionDisconnectEvent)
java.lang.NoClassDefFoundError: com/revotech/chatapp/model/dto/OnlineUser
	at com.revotech.chatapp.listener.WebSocketEventListener.processDisconnection(WebSocketEventListener.java:150)
	at com.revotech.chatapp.listener.WebSocketEventListener.handleWebSocketDisconnectListener(WebSocketEventListener.java:75)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.lang.ClassNotFoundException: com.revotech.chatapp.model.dto.OnlineUser
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	... 14 common frames omitted
2025-06-06 10:48:00 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-06 10:48:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown initiated...
2025-06-06 10:48:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ChatAppHikariCP - Shutdown completed.
